"use strict";(globalThis.webpackChunkconvengine_docs=globalThis.webpackChunkconvengine_docs||[]).push([[158],{267(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"local-development","title":"Local Development","description":"Prerequisites","source":"@site/docs/local-development.mdx","sourceDirName":".","slug":"/local-development","permalink":"/docs/local-development","draft":false,"unlisted":false,"editUrl":"https://github.com/salilvnair/convengine-docs/tree/main/docs/local-development.mdx","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Local Development","sidebar_position":4},"sidebar":"docSidebar","previous":{"title":"Examples","permalink":"/docs/examples"},"next":{"title":"Consumer Guide","permalink":"/docs/consumer/"}}');var s=i(4848),l=i(8453),a=i(3224);const o={title:"Local Development",sidebar_position:4},r="Local Development",c={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Minimal integration",id:"minimal-integration",level:2},{value:"Required runtime beans from consumer side",id:"required-runtime-beans-from-consumer-side",level:2},{value:"Recommended local test loop",id:"recommended-local-test-loop",level:2},{value:"Transport toggles",id:"transport-toggles",level:2},{value:"Optional feature annotations",id:"optional-feature-annotations",level:2}];function p(e){const n={br:"br",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"local-development",children:"Local Development"})}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Java 21"}),"\n",(0,s.jsx)(n.li,{children:"Spring-compatible host app"}),"\n",(0,s.jsxs)(n.li,{children:["PostgreSQL + ConvEngine ",(0,s.jsx)(a.Mn,{children:"ce_*"})," schema"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(a.pu,{children:"LlmClient"})," implementation bean"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"minimal-integration",children:"Minimal integration"}),"\n",(0,s.jsx)(a.vl,{title:"Enable ConvEngine",language:"java",packagePath:"your.app",children:"@EnableConvEngine\n@SpringBootApplication\npublic class MyApplication {\npublic static void main(String[] args) {\n  SpringApplication.run(MyApplication.class, args);\n}\n}"}),"\n",(0,s.jsx)(n.h2,{id:"required-runtime-beans-from-consumer-side",children:"Required runtime beans from consumer side"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(a.pu,{children:"LlmClient"}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"datasource + JPA config"}),"\n",(0,s.jsx)(n.li,{children:"any custom hooks/transformers you need"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"recommended-local-test-loop",children:"Recommended local test loop"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Send one turn to ",(0,s.jsx)(a.Mn,{children:"/message"})]}),"\n",(0,s.jsxs)(n.li,{children:["Read ",(0,s.jsxs)(a.Mn,{children:["/audit/","{conversationId}"]})]}),"\n",(0,s.jsxs)(n.li,{children:["Read ",(0,s.jsxs)(a.Mn,{children:["/audit/","{conversationId}","/trace"]})]}),"\n",(0,s.jsx)(n.li,{children:"Tune DB rows and rerun same conversation id"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"transport-toggles",children:"Transport toggles"}),"\n",(0,s.jsx)(a.vl,{title:"application.yml",language:"yaml",children:'server:\n  port: 8080\n\nspring:\n  datasource:\n    url: jdbc:postgresql://localhost:5432/convengine\n    username: convengine_user\n    password: convengine_pwd\n\nconvengine:\ndemo:\n  stream-mode: SSE\n  step-hook:\n    enabled: true\n\nllm:\n  provider: openai\n  openai:\n    api-key: ${OPENAI_API_KEY}\n    model: gpt-4.1\n\ntransport:\n  sse:\n    enabled: true\n    emitter-timeout-ms: 1800000\n  stomp:\n    enabled: false\n    endpoint: /ws-convengine\n    app-destination-prefix: /app\n    topic-prefix: /topic\n    audit-destination-base: /topic/convengine/audit\n    allowed-origin-pattern: "*"\n    sock-js: true\n    broker:\n      mode: SIMPLE\n      relay-destination-prefixes: /topic,/queue\n      relay-host: localhost\n      relay-port: 61613\n      client-login: ""\n      client-passcode: ""\n      system-login: ""\n      system-passcode: ""\n      virtual-host: ""\n      system-heartbeat-send-interval-ms: 10000\n      system-heartbeat-receive-interval-ms: 10000\n\naudit:\n  enabled: true\n  level: ALL\n  include-stages: []\n  exclude-stages: []\n  persistence:\n    mode: IMMEDIATE\n    jdbc-batch-size: 200\n    max-buffered-events: 5000\n    flush-stages: ENGINE_KNOWN_FAILURE,ENGINE_UNKNOWN_FAILURE\n    final-step-names: PipelineEndGuardStep\n    flush-on-stop-outcome: true\n  dispatch:\n    async-enabled: false\n    worker-threads: 2\n    queue-capacity: 2000\n    rejection-policy: CALLER_RUNS\n    keep-alive-seconds: 60\n  rate-limit:\n    enabled: false\n    max-events: 200\n    window-ms: 1000\n    per-conversation: true\n    per-stage: true\n    max-tracked-buckets: 20000\n\nexperimental:\n    enabled: false'}),"\n",(0,s.jsx)(a.f4,{type:"warning",title:"When enabling STOMP",children:(0,s.jsx)(n.p,{children:"Keep SSE enabled initially. Use STOMP only when your client architecture needs bidirectional websocket semantics."})}),"\n",(0,s.jsx)(n.h2,{id:"optional-feature-annotations",children:"Optional feature annotations"}),"\n",(0,s.jsx)(a.vl,{title:"Enable optional performance features",language:"java",children:"@EnableConvEngine(stream = true)\n@EnableConvEngineAsyncAuditDispatch\n@EnableConvEngineStompBrokerRelay\n@SpringBootApplication\npublic class MyApplication {\npublic static void main(String[] args) {\n  SpringApplication.run(MyApplication.class, args);\n}\n}"}),"\n",(0,s.jsx)(a.f4,{type:"info",title:"Stream flag behavior",children:(0,s.jsxs)(n.p,{children:["With ",(0,s.jsx)(a.pu,{children:"@EnableConvEngine(stream = true)"})," (default), startup fails if both SSE and STOMP are disabled.",(0,s.jsx)(n.br,{}),"\n","With ",(0,s.jsx)(a.pu,{children:"@EnableConvEngine(stream = false)"}),", transport flags are ignored and only REST flow is active."]})})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}}}]);