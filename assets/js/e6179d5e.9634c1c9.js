"use strict";(globalThis.webpackChunkconvengine_docs=globalThis.webpackChunkconvengine_docs||[]).push([[1803],{4483(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>x,frontMatter:()=>s,metadata:()=>c,toc:()=>t});const c=JSON.parse('{"id":"deep-dive/data-model","title":"Data Model","description":"ConvEngine relies entirely on configuration over code. State, relationships, and execution boundaries are encoded in the schema.","source":"@site/docs/v2/deep-dive/data-model.mdx","sourceDirName":"deep-dive","slug":"/deep-dive/data-model","permalink":"/docs/v2/deep-dive/data-model","draft":false,"unlisted":false,"editUrl":"https://github.com/salilvnair/convengine-docs/tree/main/docs/v2/deep-dive/data-model.mdx","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Data Model","sidebar_position":4},"sidebar":"docSidebar","previous":{"title":"Real World Examples","permalink":"/docs/v2/deep-dive/examples"},"next":{"title":"Thymeleaf and SpEL","permalink":"/docs/v2/deep-dive/thymeleaf-spel"}}');var l=i(4848),d=i(8453);const s={title:"Data Model",sidebar_position:4},r="Data Model",o={},t=[{value:"Control-plane tables",id:"control-plane-tables",level:2},{value:"Runtime tables",id:"runtime-tables",level:2},{value:"<code>ce_conversation_history</code>",id:"ce_conversation_history",level:2},{value:"<code>ce_pending_action</code>",id:"ce_pending_action",level:2},{value:"<code>ce_verbose</code>",id:"ce_verbose",level:2},{value:"<code>ce_prompt_template</code>",id:"ce_prompt_template",level:2},{value:"Rule phase compatibility",id:"rule-phase-compatibility",level:2},{value:"Rule action compatibility",id:"rule-action-compatibility",level:2},{value:"Tool-group compatibility",id:"tool-group-compatibility",level:2},{value:"MCP tool scope columns",id:"mcp-tool-scope-columns",level:2},{value:"MCP planner scope columns",id:"mcp-planner-scope-columns",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"data-model",children:"Data Model"})}),"\n",(0,l.jsx)(n.p,{children:"ConvEngine relies entirely on configuration over code. State, relationships, and execution boundaries are encoded in the schema."}),"\n",(0,l.jsx)(n.h2,{id:"control-plane-tables",children:"Control-plane tables"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ce_config"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ce_container_config"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ce_intent"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ce_intent_classifier"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ce_output_schema"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ce_prompt_template"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ce_response"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ce_rule"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ce_policy"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ce_mcp_tool"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ce_mcp_db_tool"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ce_mcp_planner"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ce_pending_action"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ce_verbose"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"runtime-tables",children:"Runtime tables"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ce_conversation"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ce_audit"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ce_conversation_history"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ce_llm_call_log"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"ce_conversation_history",children:(0,l.jsx)(n.code,{children:"ce_conversation_history"})}),"\n",(0,l.jsxs)(n.p,{children:["Introduced to store chronological multi-turn array states strictly decoupled from internal ",(0,l.jsx)(n.code,{children:"ce_audit"})," tracking."]}),"\n",(0,l.jsx)(n.p,{children:"Key columns:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"history_id"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"conversation_id"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"user_input"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"assistant_output"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"created_at"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"modified_at"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"ce_pending_action",children:(0,l.jsx)(n.code,{children:"ce_pending_action"})}),"\n",(0,l.jsx)(n.p,{children:"Introduced for confirm-before-run logic and unambiguous multi-action resolution."}),"\n",(0,l.jsx)(n.p,{children:"Purpose:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"declarative catalog for executable pending actions by intent/state/action key"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Key columns:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"pending_action_id"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"intent_code"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"state_code"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"action_key"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"bean_name"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"method_names"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"priority"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"enabled"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"description"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"created_at"})}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Lookup index:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"(enabled, action_key, intent_code, state_code, priority)"})}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Important:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["runtime status (",(0,l.jsx)(n.code,{children:"OPEN/IN_PROGRESS/EXECUTED/REJECTED/EXPIRED"}),") is not stored in this table"]}),"\n",(0,l.jsxs)(n.li,{children:["runtime status is stored in ",(0,l.jsx)(n.code,{children:"context.pending_action_runtime"})]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"ce_verbose",children:(0,l.jsx)(n.code,{children:"ce_verbose"})}),"\n",(0,l.jsxs)(n.p,{children:["Introduced in ",(0,l.jsx)(n.code,{children:"2.0.8"})," for deterministic runtime progress/error messages emitted by the Java pipeline. In ",(0,l.jsx)(n.code,{children:"2.0.9"}),", the same resolver path can also be triggered from consumer code through ",(0,l.jsx)(n.code,{children:"ConvEngineVerboseAdapter"}),"."]}),"\n",(0,l.jsx)(n.p,{children:"Purpose:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"declarative message mapping by runtime context (intent/state/step/determinant/rule/tool)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Key columns:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"verbose_id"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"intent_code"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"state_code"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"step_match"})," (",(0,l.jsx)(n.code,{children:"EXACT|REGEX|JSON_PATH"}),")"]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"step_value"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"determinant"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"rule_id"})," (optional)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"tool_code"})," (optional)"]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"message"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"error_message"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"priority"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"enabled"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"created_at"})}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Lookup index:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"(enabled, intent_code, state_code, determinant, step_match, step_value, rule_id, tool_code, priority)"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"ce_prompt_template",children:(0,l.jsx)(n.code,{children:"ce_prompt_template"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"ce_prompt_template"})," is used for both schema extraction prompts and derived response generation."]}),"\n",(0,l.jsx)(n.p,{children:"Key columns:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"template_id"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"intent_code"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"state_code"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"response_type"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"system_prompt"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"user_prompt"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"temperature"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"interaction_mode"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"interaction_contract"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"enabled"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"created_at"})}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Runtime notes:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["prompts are rendered through the shared ",(0,l.jsx)(n.code,{children:"ThymeleafTemplateRenderer"})]}),"\n",(0,l.jsxs)(n.li,{children:["legacy ",(0,l.jsx)(n.code,{children:"{{...}}"})," placeholders still work, but Thymeleaf expressions are the native path"]}),"\n",(0,l.jsxs)(n.li,{children:["common runtime vars include ",(0,l.jsx)(n.code,{children:"user_input"}),", ",(0,l.jsx)(n.code,{children:"resolved_user_input"}),", ",(0,l.jsx)(n.code,{children:"standalone_query"}),", ",(0,l.jsx)(n.code,{children:"intent"}),", ",(0,l.jsx)(n.code,{children:"state"}),", ",(0,l.jsx)(n.code,{children:"context"}),", and ",(0,l.jsx)(n.code,{children:"inputParams"})]}),"\n",(0,l.jsxs)(n.li,{children:["see ",(0,l.jsx)(n.a,{href:"/docs/v2/deep-dive/thymeleaf-spel",children:"Thymeleaf and SpEL"})," for expression examples across prompts and ",(0,l.jsx)(n.code,{children:"ce_verbose"})]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"interaction_mode"})," is the coarse semantic contract for the turn. Supported values:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"NORMAL"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"IDLE"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"COLLECT"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"CONFIRM"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PROCESSING"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"FINAL"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ERROR"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"DISAMBIGUATE"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"FOLLOW_UP"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PENDING_ACTION"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"REVIEW"})}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"interaction_contract"})," is extensible JSON text for concrete capabilities and expectations. Recommended shape:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{"allows":["affirm","edit","retry","reset"],"expects":["structured_input"]}\n'})}),"\n",(0,l.jsx)(n.p,{children:"Current conventions:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"allows"}),": turn capabilities such as ",(0,l.jsx)(n.code,{children:"affirm"}),", ",(0,l.jsx)(n.code,{children:"edit"}),", ",(0,l.jsx)(n.code,{children:"retry"}),", ",(0,l.jsx)(n.code,{children:"reset"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"expects"}),": input expectations such as ",(0,l.jsx)(n.code,{children:"structured_input"})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Design note:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["prefer extending ",(0,l.jsx)(n.code,{children:"interaction_contract"})," arrays for new capabilities instead of adding new columns"]}),"\n",(0,l.jsxs)(n.li,{children:["use ",(0,l.jsx)(n.code,{children:"interaction_mode"})," for broad semantics and ",(0,l.jsx)(n.code,{children:"interaction_contract"})," for fine-grained runtime behavior"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"rule-phase-compatibility",children:"Rule phase compatibility"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"ce_rule.phase"})," includes phases:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"POST_DIALOGUE_ACT"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PRE_RESPONSE_RESOLUTION"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"POST_AGENT_INTENT"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"POST_SCHEMA_EXTRACTION"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PRE_AGENT_MCP"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"POST_AGENT_MCP"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"POST_TOOL_EXECUTION"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"rule-action-compatibility",children:"Rule action compatibility"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"ce_rule.action"})," includes:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"SET_INTENT"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"SET_STATE"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"SET_DIALOGUE_ACT"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"SET_JSON"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"GET_CONTEXT"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"GET_SCHEMA_JSON"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"GET_SESSION"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"SET_TASK"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"SET_INPUT_PARAM"})}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"SET_INPUT_PARAM"})," is the lightweight runtime-flag action. Use it for values like:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"awaiting_confirmation=true"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"confirmation_key=LOAN_APPLICATION_CONFIRM"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"skip_schema_extraction=true"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"routing_decision=PROCEED_CONFIRMED"})}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"SET_DIALOGUE_ACT"})," is the lightweight post-classification override action. Use it when a ",(0,l.jsx)(n.code,{children:"POST_DIALOGUE_ACT"})," rule should replace the final ",(0,l.jsx)(n.code,{children:"dialogue_act"})," with a more appropriate normalized value (for example promoting a guarded ",(0,l.jsx)(n.code,{children:"NEW_REQUEST"})," back to ",(0,l.jsx)(n.code,{children:"EDIT"}),")."]}),"\n",(0,l.jsx)(n.h2,{id:"tool-group-compatibility",children:"Tool-group compatibility"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"ce_mcp_tool.tool_group"})," normalizes to:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"DB"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"HTTP_API"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"WORKFLOW_ACTION"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"DOCUMENT_RETRIEVAL"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"CALCULATOR_TRANSFORM"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"NOTIFICATION"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"FILES"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"mcp-tool-scope-columns",children:"MCP tool scope columns"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"ce_mcp_tool"})," also supports optional scope columns:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"intent_code"})," (nullable)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"state_code"})," (nullable)"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Behavior:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["if both are ",(0,l.jsx)(n.code,{children:"NULL"}),", the tool is globally eligible"]}),"\n",(0,l.jsxs)(n.li,{children:["if set, tool eligibility is constrained to matching runtime ",(0,l.jsx)(n.code,{children:"session.intent"})," and ",(0,l.jsx)(n.code,{children:"session.state"})]}),"\n",(0,l.jsx)(n.li,{children:"non-matching scoped tools are skipped from MCP planning/execution"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"mcp-planner-scope-columns",children:"MCP planner scope columns"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"ce_mcp_planner"})," supports scoped planner prompts:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"intent_code"})," (nullable)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"state_code"})," (nullable)"]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"system_prompt"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"user_prompt"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"enabled"})}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Behavior:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"exact intent/state row wins"}),"\n",(0,l.jsx)(n.li,{children:"intent-only row is next"}),"\n",(0,l.jsxs)(n.li,{children:["global default row (",(0,l.jsx)(n.code,{children:"NULL/NULL"}),") is fallback"]}),"\n",(0,l.jsxs)(n.li,{children:["if not found, planner uses legacy ",(0,l.jsx)(n.code,{children:"ce_config"})," prompts"]}),"\n"]})]})}function x(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}}}]);