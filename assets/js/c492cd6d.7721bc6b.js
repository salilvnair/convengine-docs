"use strict";(globalThis.webpackChunkconvengine_docs=globalThis.webpackChunkconvengine_docs||[]).push([[620],{1470(e,t,s){s.d(t,{A:()=>A});var a=s(6540),n=s(4164),i=s(7559),l=s(3104),r=s(6347),o=s(205),c=s(7485),d=s(1682),p=s(679);function u(e){return a.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function _(e){const{values:t,children:s}=e;return(0,a.useMemo)(()=>{const e=t??function(e){return u(e).map(({props:{value:e,label:t,attributes:s,default:a}})=>({value:e,label:t,attributes:s,default:a}))}(s);return function(e){const t=(0,d.XI)(e,(e,t)=>e.value===t.value);if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[t,s])}function m({value:e,tabValues:t}){return t.some(t=>t.value===e)}function E({queryString:e=!1,groupId:t}){const s=(0,r.W6)(),n=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,c.aZ)(n),(0,a.useCallback)(e=>{if(!n)return;const t=new URLSearchParams(s.location.search);t.set(n,e),s.replace({...s.location,search:t.toString()})},[n,s])]}function S(e){const{defaultValue:t,queryString:s=!1,groupId:n}=e,i=_(e),[l,r]=(0,a.useState)(()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const s=t.find(e=>e.default)??t[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:t,tabValues:i})),[c,d]=E({queryString:s,groupId:n}),[u,S]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[s,n]=(0,p.Dv)(t);return[s,(0,a.useCallback)(e=>{t&&n.set(e)},[t,n])]}({groupId:n}),T=(()=>{const e=c??u;return m({value:e,tabValues:i})?e:null})();(0,o.A)(()=>{T&&r(T)},[T]);return{selectedValue:l,selectValue:(0,a.useCallback)(e=>{if(!m({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);r(e),d(e),S(e)},[d,S,i]),tabValues:i}}var T=s(2303);const x="tabList__CuJ",h="tabItem_LNqP";var g=s(4848);function b({className:e,block:t,selectedValue:s,selectValue:a,tabValues:i}){const r=[],{blockElementScrollPositionUntilNextRender:o}=(0,l.a_)(),c=e=>{const t=e.currentTarget,n=r.indexOf(t),l=i[n].value;l!==s&&(o(t),a(l))},d=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const s=r.indexOf(e.currentTarget)+1;t=r[s]??r[0];break}case"ArrowLeft":{const s=r.indexOf(e.currentTarget)-1;t=r[s]??r[r.length-1];break}}t?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,n.A)("tabs",{"tabs--block":t},e),children:i.map(({value:e,label:t,attributes:a})=>(0,g.jsx)("li",{role:"tab",tabIndex:s===e?0:-1,"aria-selected":s===e,ref:e=>{r.push(e)},onKeyDown:d,onClick:c,...a,className:(0,n.A)("tabs__item",h,a?.className,{"tabs__item--active":s===e}),children:t??e},e))})}function v({lazy:e,children:t,selectedValue:s}){const i=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=i.find(e=>e.props.value===s);return e?(0,a.cloneElement)(e,{className:(0,n.A)("margin-top--md",e.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:i.map((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==s}))})}function R(e){const t=S(e);return(0,g.jsxs)("div",{className:(0,n.A)(i.G.tabs.container,"tabs-container",x),children:[(0,g.jsx)(b,{...t,...e}),(0,g.jsx)(v,{...t,...e})]})}function A(e){const t=(0,T.A)();return(0,g.jsx)(R,{...e,children:u(e.children)},String(t))}},8385(e,t,s){s.r(t),s.d(t,{assets:()=>p,contentTitle:()=>d,default:()=>j,disconnectDetails:()=>T,disconnectEdges:()=>S,disconnectNodes:()=>E,faqDetails:()=>m,faqEdges:()=>_,faqNodes:()=>u,frontMatter:()=>c,logDetails:()=>g,logEdges:()=>h,logNodes:()=>x,metadata:()=>a,resetDetails:()=>I,resetEdges:()=>f,resetNodes:()=>A,toc:()=>N,trackerDetails:()=>R,trackerEdges:()=>v,trackerNodes:()=>b});const a=JSON.parse('{"id":"deep-dive/examples","title":"Real-world Examples (Debug Trace)","description":"Canonical Runtime Step Set","source":"@site/docs/deep-dive/examples.mdx","sourceDirName":"deep-dive","slug":"/deep-dive/examples","permalink":"/docs/deep-dive/examples","draft":false,"unlisted":false,"editUrl":"https://github.com/salilvnair/convengine-docs/tree/main/docs/deep-dive/examples.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Real-world Examples (Debug Trace)","sidebar_position":3,"hide_table_of_contents":true},"sidebar":"docSidebar","previous":{"title":"Request Lifecycle","permalink":"/docs/deep-dive/lifecycle"},"next":{"title":"Data Model","permalink":"/docs/deep-dive/data-model"}}');var n=s(4848),i=s(8453),l=s(1470),r=s(9365),o=s(9131);const c={title:"Real-world Examples (Debug Trace)",sidebar_position:3,hide_table_of_contents:!0},d="Real-world Examples (Debug Trace)",p={},u=[{id:"faq_api",position:{x:20,y:50},data:{label:"ConversationController.message"}},{id:"faq_engine",position:{x:280,y:50},data:{label:"DefaultConversationalEngine.process"}},{id:"faq_pipeline",position:{x:540,y:50},data:{label:"EnginePipeline.execute"}},{id:"faq_intent",position:{x:20,y:220},data:{label:"IntentResolutionStep"}},{id:"faq_rules",position:{x:280,y:220},data:{label:"RulesStep"}},{id:"faq_response",position:{x:540,y:220},data:{label:"ResponseResolutionStep"}},{id:"faq_persist",position:{x:800,y:220},data:{label:"PersistConversationStep"}}],_=[{id:"faq_e1",source:"faq_api",target:"faq_engine"},{id:"faq_e2",source:"faq_engine",target:"faq_pipeline"},{id:"faq_e3",source:"faq_pipeline",target:"faq_intent"},{id:"faq_e4",source:"faq_intent",target:"faq_rules"},{id:"faq_e5",source:"faq_rules",target:"faq_response"},{id:"faq_e6",source:"faq_response",target:"faq_persist"}],m={faq_api:{title:"API entry",file:"api/controller/ConversationController.java",method:"message(...)",stage:"HTTP_ENTRY",summary:"Builds EngineContext and calls engine.process.",session:["userText set","inputParams normalized"],tables:["none"]},faq_engine:{title:"Engine entry",file:"engine/provider/DefaultConversationalEngine.java",method:"process(...)",stage:"ENGINE_ENTRY",summary:"Opens session and executes pipeline.",session:["session hydrated"],tables:["ce_conversation (R)"]},faq_pipeline:{title:"Step loop",file:"engine/pipeline/EnginePipeline.java",method:"execute(...)",stage:"STEP_ENTER/STEP_EXIT",summary:"Runs all steps in DAG order.",session:["timing + audits emitted"],tables:["ce_audit (W)"]},faq_intent:{title:"Intent resolve",file:"engine/steps/IntentResolutionStep.java",method:"execute(...)",stage:"INTENT_RESOLVED",summary:"Classifier picks FAQ.",session:["intent=FAQ"],tables:["ce_intent_classifier (R)","ce_intent (R)"]},faq_rules:{title:"Rules pass",file:"engine/steps/RulesStep.java",method:"execute(...)",stage:"RULE_NO_MATCH",summary:"No matching action.",session:["state unchanged"],tables:["ce_rule (R)"]},faq_response:{title:"Response resolve",file:"engine/steps/ResponseResolutionStep.java",method:"execute(...)",stage:"ASSISTANT_OUTPUT",summary:"Returns EXACT response.",session:["payload type TEXT"],tables:["ce_response (R)"]},faq_persist:{title:"Persist",file:"engine/steps/PersistConversationStep.java",method:"execute(...)",stage:"CONVERSATION_PERSIST",summary:"Writes latest state/result.",session:["conversation synced"],tables:["ce_conversation (W)"]}},E=[{id:"d_intent",position:{x:20,y:60},data:{label:"IntentResolutionStep"}},{id:"d_schema",position:{x:280,y:60},data:{label:"SchemaExtractionStep"}},{id:"d_lock",position:{x:540,y:60},data:{label:"Intent lock (incomplete schema)"}},{id:"d_ask",position:{x:800,y:60},data:{label:"Follow-up response"}},{id:"d_turn2",position:{x:20,y:220},data:{label:"Next turn resume"}},{id:"d_merge",position:{x:280,y:220},data:{label:"Context merge + complete"}},{id:"d_rules",position:{x:540,y:220},data:{label:"RulesStep (SET_STATE/SET_TASK)"}},{id:"d_done",position:{x:800,y:220},data:{label:"Final response + persist"}}],S=[{id:"d1",source:"d_intent",target:"d_schema"},{id:"d2",source:"d_schema",target:"d_lock"},{id:"d3",source:"d_lock",target:"d_ask"},{id:"d4",source:"d_ask",target:"d_turn2"},{id:"d5",source:"d_turn2",target:"d_merge"},{id:"d6",source:"d_merge",target:"d_rules"},{id:"d7",source:"d_rules",target:"d_done"}],T={d_intent:{title:"Intent",file:"engine/steps/IntentResolutionStep.java",method:"execute(...)",stage:"INTENT_RESOLVED",summary:"Resolves DISCONNECT_ELECTRICITY.",session:["intent fixed for flow"],tables:["ce_intent (R)"]},d_schema:{title:"Extract schema",file:"engine/steps/SchemaExtractionStep.java",method:"execute(...)",stage:"SCHEMA_EVALUATED",summary:"Gets accountId, missing required fields remain.",session:["contextJson partial","missing fields tracked"],tables:["ce_output_schema (R)","ce_prompt_template (R)"]},d_lock:{title:"Lock",file:"engine/steps/SchemaExtractionStep.java",method:"lockIntentWhenIncomplete(...)",stage:"SCHEMA_INCOMPLETE",summary:"Prevents reclassification next turn.",session:["intent locked"],tables:["ce_audit (W)"]},d_ask:{title:"Follow-up",file:"engine/steps/ResponseResolutionStep.java",method:"execute(...)",stage:"ASSISTANT_OUTPUT",summary:"Asks user only missing fields.",session:["followups prepared"],tables:["ce_response (R)"]},d_turn2:{title:"Resume",file:"engine/steps/LoadOrCreateConversationStep.java",method:"execute(...)",stage:"SESSION_REHYDRATE",summary:"Loads same conversationId state.",session:["prior context loaded"],tables:["ce_conversation (R)"]},d_merge:{title:"Complete",file:"engine/steps/SchemaExtractionStep.java",method:"mergeExtractedWithContext(...)",stage:"SCHEMA_COMPLETE",summary:"Merges new values and unlocks intent.",session:["contextJson complete"],tables:["ce_output_schema (R)"]},d_rules:{title:"Actions",file:"engine/steps/RulesStep.java",method:"execute(...)",stage:"RULE_MATCHED",summary:"Moves state and task.",session:["state updated","task set"],tables:["ce_rule (R)"]},d_done:{title:"Done",file:"engine/steps/ResponseResolutionStep.java",method:"execute(...)",stage:"ASSISTANT_OUTPUT",summary:"Final confirmation.",session:["payload final"],tables:["ce_response (R)","ce_conversation (W)"]}},x=[{id:"l_api",position:{x:20,y:60},data:{label:"API entry"}},{id:"l_intent",position:{x:280,y:60},data:{label:"IntentResolutionStep"}},{id:"l_schema",position:{x:540,y:60},data:{label:"SchemaExtractionStep"}},{id:"l_rules",position:{x:800,y:60},data:{label:"RulesStep (GET_SCHEMA_JSON)"}},{id:"l_resp",position:{x:280,y:220},data:{label:"ResponseResolutionStep (DERIVED)"}},{id:"l_persist",position:{x:540,y:220},data:{label:"PersistConversationStep"}}],h=[{id:"l1",source:"l_api",target:"l_intent"},{id:"l2",source:"l_intent",target:"l_schema"},{id:"l3",source:"l_schema",target:"l_rules"},{id:"l4",source:"l_rules",target:"l_resp"},{id:"l5",source:"l_resp",target:"l_persist"}],g={l_api:{title:"API",file:"api/controller/ConversationController.java",method:"message(...)",stage:"HTTP_ENTRY",summary:"Start turn.",session:["incoming log text"],tables:["none"]},l_intent:{title:"Intent",file:"engine/steps/IntentResolutionStep.java",method:"execute(...)",stage:"INTENT_RESOLVED",summary:"LOG_ANALYSIS selected.",session:["intent=LOG_ANALYSIS"],tables:["ce_intent (R)"]},l_schema:{title:"Structured extraction",file:"engine/steps/SchemaExtractionStep.java",method:"execute(...)",stage:"SCHEMA_EVALUATED",summary:"Extracts errorCode/component/severity from text.",session:["schemaJson built"],tables:["ce_output_schema (R)"]},l_rules:{title:"Schema-aware rule",file:"engine/steps/RulesStep.java",method:"execute(...)",stage:"RULE_MATCHED",summary:"Reads extracted schema via GET_SCHEMA_JSON.",session:["state maybe ESCALATE"],tables:["ce_rule (R)"]},l_resp:{title:"Derived answer",file:"engine/steps/ResponseResolutionStep.java",method:"execute(...)",stage:"ASSISTANT_OUTPUT",summary:"Prompt template creates root-cause summary.",session:["derived payload"],tables:["ce_response (R)","ce_prompt_template (R)"]},l_persist:{title:"Persist",file:"engine/steps/PersistConversationStep.java",method:"execute(...)",stage:"CONVERSATION_PERSIST",summary:"Stores turn output.",session:["state saved"],tables:["ce_conversation (W)"]}},b=[{id:"t_api",position:{x:20,y:60},data:{label:"API entry"}},{id:"t_intent",position:{x:260,y:60},data:{label:"IntentResolutionStep"}},{id:"t_rules",position:{x:500,y:60},data:{label:"RulesStep (SET_TASK)"}},{id:"t_task",position:{x:740,y:60},data:{label:"Consumer service call"}},{id:"t_resp",position:{x:260,y:220},data:{label:"ResponseResolutionStep"}},{id:"t_done",position:{x:500,y:220},data:{label:"Persist + output"}}],v=[{id:"t1",source:"t_api",target:"t_intent"},{id:"t2",source:"t_intent",target:"t_rules"},{id:"t3",source:"t_rules",target:"t_task"},{id:"t4",source:"t_task",target:"t_resp"},{id:"t5",source:"t_resp",target:"t_done"}],R={t_api:{title:"API",file:"api/controller/ConversationController.java",method:"message(...)",stage:"HTTP_ENTRY",summary:"Request starts.",session:["request id detected"],tables:["none"]},t_intent:{title:"Intent",file:"engine/steps/IntentResolutionStep.java",method:"execute(...)",stage:"INTENT_RESOLVED",summary:"REQUEST_TRACKER resolved.",session:["intent set"],tables:["ce_intent (R)"]},t_rules:{title:"Task assignment",file:"engine/steps/RulesStep.java",method:"execute(...)",stage:"RULE_MATCHED",summary:"SET_TASK marks downstream work.",session:["task=TRACK_REQUEST_STATUS"],tables:["ce_rule (R)"]},t_task:{title:"Consumer callback",file:"consumer hook/service",method:"afterStep(...) or service call",stage:"TASK_EXECUTION",summary:"Consumer fetches tracker state from own system and injects context.",session:["context.status/context.lastUpdated set"],tables:["consumer DB/API"]},t_resp:{title:"Final response",file:"engine/steps/ResponseResolutionStep.java",method:"execute(...)",stage:"ASSISTANT_OUTPUT",summary:"Builds tracker response from context.",session:["payload text/json"],tables:["ce_response (R)"]},t_done:{title:"Persist",file:"engine/steps/PersistConversationStep.java",method:"execute(...)",stage:"CONVERSATION_PERSIST",summary:"Persists turn.",session:["conversation updated"],tables:["ce_conversation (W)"]}},A=[{id:"r_api",position:{x:20,y:60},data:{label:"API entry"}},{id:"r_load",position:{x:260,y:60},data:{label:"LoadOrCreateConversationStep"}},{id:"r_reset",position:{x:500,y:60},data:{label:"ResetConversationStep"}},{id:"r_audit",position:{x:740,y:60},data:{label:"CONVERSATION_RESET audit"}},{id:"r_resp",position:{x:260,y:220},data:{label:"ResponseResolutionStep"}},{id:"r_done",position:{x:500,y:220},data:{label:"PersistConversationStep"}}],f=[{id:"r1",source:"r_api",target:"r_load"},{id:"r2",source:"r_load",target:"r_reset"},{id:"r3",source:"r_reset",target:"r_audit"},{id:"r4",source:"r_audit",target:"r_resp"},{id:"r5",source:"r_resp",target:"r_done"}],I={r_api:{title:"API",file:"api/controller/ConversationController.java",method:"message(...)",stage:"HTTP_ENTRY",summary:"Receives reset command.",session:["message contains reset token"],tables:["none"]},r_load:{title:"Load",file:"engine/steps/LoadOrCreateConversationStep.java",method:"execute(...)",stage:"SESSION_REHYDRATE",summary:"Loads existing session state.",session:["existing intent/state/context loaded"],tables:["ce_conversation (R)"]},r_reset:{title:"Reset",file:"engine/steps/ResetConversationStep.java",method:"execute(...)",stage:"CONVERSATION_RESET",summary:"Clears intent/state/context by configured reset command.",session:["intent/state/context wiped"],tables:["ce_config (R)","ce_conversation (W)"]},r_audit:{title:"Audit",file:"audit/DbAuditService.java",method:"audit(...)",stage:"CONVERSATION_RESET",summary:"Writes reset trace.",session:["meta includes conversationId"],tables:["ce_audit (W)"]},r_resp:{title:"Reset response",file:"engine/steps/ResponseResolutionStep.java",method:"execute(...)",stage:"ASSISTANT_OUTPUT",summary:"Returns fresh-start message.",session:["final payload"],tables:["ce_response (R)"]},r_done:{title:"Persist",file:"engine/steps/PersistConversationStep.java",method:"execute(...)",stage:"CONVERSATION_PERSIST",summary:"Saves empty baseline state.",session:["new baseline saved"],tables:["ce_conversation (W)"]}},N=[{value:"Canonical Runtime Step Set",id:"canonical-runtime-step-set",level:2},{value:"Example 1: FAQ",id:"example-1-faq",level:2},{value:"Example 2: DISCONNECT_ELECTRICITY",id:"example-2-disconnect_electricity",level:2},{value:"Example 3: LOG_ANALYSIS",id:"example-3-log_analysis",level:2},{value:"Example 4: REQUEST_TRACKER",id:"example-4-request_tracker",level:2},{value:"Example 5: RESET_SESSION",id:"example-5-reset_session",level:2}];function C(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"real-world-examples-debug-trace",children:"Real-world Examples (Debug Trace)"})}),"\n",(0,n.jsx)(t.h2,{id:"canonical-runtime-step-set",children:"Canonical Runtime Step Set"}),"\n",(0,n.jsxs)("div",{className:"ce-step-badge-list",role:"list","aria-label":"Canonical runtime step set",children:[(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"1"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"LoadOrCreateConversationStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"2"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"ResetConversationStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"3"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"PersistConversationBootstrapStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"4"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"AuditUserInputStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"5"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"PolicyEnforcementStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"6"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"IntentResolutionStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"7"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"ResetResolvedIntentStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"8"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"FallbackIntentStateStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"9"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"AddContainerDataStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"10"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"McpToolStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"11"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"SchemaExtractionStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"12"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"AutoAdvanceStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"13"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"RulesStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"14"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"ResponseResolutionStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"15"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"PersistConversationStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"16"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"PipelineEndGuardStep"})]})]}),"\n",(0,n.jsx)(t.p,{children:"These examples zoom into relevant branches; conditional/system steps from the canonical set are omitted in each graph unless they materially affect that scenario."}),"\n",(0,n.jsx)(t.p,{children:"Each example has three tabs:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Conversation"}),": chat + execution flow"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"DML Entries"}),": starter rows for ",(0,n.jsx)(t.code,{children:"ce_intent"}),", ",(0,n.jsx)(t.code,{children:"ce_prompt_template"}),", ",(0,n.jsx)(t.code,{children:"ce_output_schema"}),", ",(0,n.jsx)(t.code,{children:"ce_response"})]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Audit Trail"}),": stage-by-stage ",(0,n.jsx)(t.code,{children:"ce_audit"})," view"]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"example-1-faq",children:"Example 1: FAQ"}),"\n",(0,n.jsxs)(l.A,{groupId:"ex-faq-tabs",children:[(0,n.jsxs)(r.A,{value:"conversation",label:"Conversation",default:!0,children:[(0,n.jsxs)(o.sy,{title:"FAQ",children:[(0,n.jsx)(o.KJ,{children:"Can I move my connection within Zapper?"}),(0,n.jsx)(o.Fb,{children:"Yes, you can request relocation from the support portal."})]}),(0,n.jsx)(o.il,{title:"FAQ flow",subtitle:"Classifier-first deterministic path",nodes:u,edges:_,detailsById:m,defaultSelectedId:"faq_intent"})]}),(0,n.jsxs)(r.A,{value:"dml",label:"DML Entries",children:[(0,n.jsx)(o.vl,{title:"FAQ scenario DML",language:"sql",children:"insert into ce_intent(intent_code, enabled) values ('FAQ', true);\ninsert into ce_prompt_template(intent_code, state_code, response_type, system_prompt, user_prompt, enabled)\nvalues ('FAQ', null, 'TEXT', 'You are a support assistant.', 'Answer FAQ clearly in one paragraph from user text: {{user_input}}', true);\ninsert into ce_output_schema(intent_code, state_code, schema_json, enabled)\nvalues ('FAQ', null, '{\"type\":\"object\",\"properties\":{\"question\":{\"type\":\"string\"}}}', true);\ninsert into ce_response(intent_code, state_code, response_type, output_format, exact_text, enabled)\nvalues ('FAQ', 'IDLE', 'EXACT', 'TEXT', 'Yes, you can request relocation from the support portal.', true);"}),(0,n.jsx)(o.p,{title:"FAQ config rows preview",columns:["Table","Key values"],rows:[["ce_intent","intent_code=FAQ"],["ce_prompt_template","intent_code=FAQ, state_code=null, response_type=TEXT"],["ce_output_schema","intent_code=FAQ"],["ce_response","response_type=EXACT, output_format=TEXT"]]})]}),(0,n.jsxs)(r.A,{value:"audit",label:"Audit Trail",children:[(0,n.jsx)(o.p,{title:"FAQ ce_audit trail",columns:["Stage","What happened"],rows:[["USER_INPUT","Incoming user message stored"],["STEP_ENTER (IntentResolutionStep)","Intent step starts"],["INTENT_RESOLVED","Classifier matched FAQ"],["RULE_NO_MATCH","No rule action"],["ASSISTANT_OUTPUT","Exact FAQ response selected"],["STEP_EXIT (PersistConversationStep)","Conversation persisted"]]}),(0,n.jsx)(o.vl,{title:"FAQ audit payload sample",language:"json",children:'{\n"_meta": {\n  "stage": "ASSISTANT_OUTPUT",\n  "conversationId": "conv-faq-001",\n  "intent": "FAQ",\n  "state": "IDLE"\n},\n"responseType": "EXACT",\n"outputFormat": "TEXT"\n}'})]})]}),"\n",(0,n.jsx)(t.h2,{id:"example-2-disconnect_electricity",children:"Example 2: DISCONNECT_ELECTRICITY"}),"\n",(0,n.jsxs)(l.A,{groupId:"ex-disconnect-tabs",children:[(0,n.jsxs)(r.A,{value:"conversation",label:"Conversation",default:!0,children:[(0,n.jsxs)(o.sy,{title:"DISCONNECT_ELECTRICITY",children:[(0,n.jsx)(o.KJ,{children:"Disconnect electricity for account 10004567."}),(0,n.jsx)(o.Fb,{children:"Please share disconnect date and reason."}),(0,n.jsx)(o.KJ,{children:"Date is 2026-03-31, reason moving out."}),(0,n.jsx)(o.Fb,{children:"Done, request submitted."})]}),(0,n.jsx)(o.il,{title:"Disconnect flow",subtitle:"Multi-turn schema completion and intent lock/unlock",nodes:E,edges:S,detailsById:T,defaultSelectedId:"d_schema"})]}),(0,n.jsxs)(r.A,{value:"dml",label:"DML Entries",children:[(0,n.jsx)(o.vl,{title:"DISCONNECT_ELECTRICITY scenario DML",language:"sql",children:'insert into ce_intent(intent_code, enabled) values (\'DISCONNECT_ELECTRICITY\', true);\ninsert into ce_prompt_template(intent_code, state_code, response_type, system_prompt, user_prompt, enabled)\nvalues (\'DISCONNECT_ELECTRICITY\', \'COLLECT_REQUIRED\', \'TEXT\', \'Collect missing disconnect fields.\', \'If required fields are missing, ask only for missing values. User: {{user_input}}\', true);\ninsert into ce_output_schema(intent_code, state_code, schema_json, enabled)\nvalues (\'DISCONNECT_ELECTRICITY\', \'COLLECT_REQUIRED\',\n      \'{"type":"object","properties":{"accountId":{"type":"string"},"disconnectDate":{"type":"string"},"reason":{"type":"string"}},"required":["accountId","disconnectDate","reason"]}\',\n      true);\ninsert into ce_response(intent_code, state_code, response_type, output_format, exact_text, enabled)\nvalues (\'DISCONNECT_ELECTRICITY\', \'COLLECT_REQUIRED\', \'DERIVED\', \'TEXT\', null, true);'}),(0,n.jsx)(o.p,{title:"DISCONNECT_ELECTRICITY config rows preview",columns:["Table","Key values"],rows:[["ce_intent","intent_code=DISCONNECT_ELECTRICITY"],["ce_prompt_template","intent_code=DISCONNECT_ELECTRICITY, state_code=COLLECT_REQUIRED"],["ce_output_schema","required=accountId,disconnectDate,reason"],["ce_response","response_type=DERIVED"]]})]}),(0,n.jsxs)(r.A,{value:"audit",label:"Audit Trail",children:[(0,n.jsx)(o.p,{title:"DISCONNECT_ELECTRICITY ce_audit trail",columns:["Stage","What happened"],rows:[["INTENT_RESOLVED","Intent set to DISCONNECT_ELECTRICITY"],["SCHEMA_EVALUATED","accountId extracted, fields missing"],["SCHEMA_INCOMPLETE","Intent lock enabled"],["ASSISTANT_OUTPUT","Follow-up question asked"],["SCHEMA_COMPLETE","All required fields merged"],["RULE_MATCHED","SET_STATE/SET_TASK applied"],["ASSISTANT_OUTPUT","Final confirmation response"]]}),(0,n.jsx)(o.vl,{title:"Schema incomplete audit payload sample",language:"json",children:'{\n"_meta": {\n  "stage": "SCHEMA_INCOMPLETE",\n  "conversationId": "conv-disconnect-001",\n  "intent": "DISCONNECT_ELECTRICITY"\n},\n"missingFields": ["disconnectDate", "reason"],\n"locked": true\n}'})]})]}),"\n",(0,n.jsx)(t.h2,{id:"example-3-log_analysis",children:"Example 3: LOG_ANALYSIS"}),"\n",(0,n.jsxs)(l.A,{groupId:"ex-log-tabs",children:[(0,n.jsxs)(r.A,{value:"conversation",label:"Conversation",default:!0,children:[(0,n.jsxs)(o.sy,{title:"LOG_ANALYSIS",children:[(0,n.jsx)(o.KJ,{children:"Analyze this stack trace and tell root cause."}),(0,n.jsx)(o.Fb,{children:"Likely connection pool exhaustion; tune pool and reduce long transactions."})]}),(0,n.jsx)(o.il,{title:"Log analysis flow",subtitle:"Schema extraction + GET_SCHEMA_JSON rule + derived response",nodes:x,edges:h,detailsById:g,defaultSelectedId:"l_schema"})]}),(0,n.jsxs)(r.A,{value:"dml",label:"DML Entries",children:[(0,n.jsx)(o.vl,{title:"LOG_ANALYSIS scenario DML",language:"sql",children:"insert into ce_intent(intent_code, enabled) values ('LOG_ANALYSIS', true);\ninsert into ce_prompt_template(intent_code, state_code, response_type, system_prompt, user_prompt, enabled)\nvalues ('LOG_ANALYSIS', 'ANALYZE', 'TEXT', 'Generate root-cause analysis from extracted fields.', 'Use extracted severity/component/errorCode and explain cause + fix in bullets.', true);\ninsert into ce_output_schema(intent_code, state_code, schema_json, enabled)\nvalues ('LOG_ANALYSIS', 'ANALYZE',\n      '{\"type\":\"object\",\"properties\":{\"errorCode\":{\"type\":\"string\"},\"component\":{\"type\":\"string\"},\"severity\":{\"type\":\"string\"}}}',\n      true);\ninsert into ce_response(intent_code, state_code, response_type, output_format, exact_text, enabled)\nvalues ('LOG_ANALYSIS', 'ANALYZE', 'DERIVED', 'TEXT', null, true);"}),(0,n.jsx)(o.p,{title:"LOG_ANALYSIS config rows preview",columns:["Table","Key values"],rows:[["ce_intent","intent_code=LOG_ANALYSIS"],["ce_prompt_template","intent_code=LOG_ANALYSIS, state_code=ANALYZE"],["ce_output_schema","properties=errorCode,component,severity"],["ce_response","response_type=DERIVED"]]})]}),(0,n.jsx)(r.A,{value:"audit",label:"Audit Trail",children:(0,n.jsx)(o.p,{title:"LOG_ANALYSIS ce_audit trail",columns:["Stage","What happened"],rows:[["INTENT_RESOLVED","Intent set to LOG_ANALYSIS"],["SCHEMA_EVALUATED","errorCode/component/severity extracted"],["RULE_MATCHED","GET_SCHEMA_JSON branch triggered"],["ASSISTANT_OUTPUT","Derived explanation generated"],["CONVERSATION_PERSIST","Final payload persisted"]]})})]}),"\n",(0,n.jsx)(t.h2,{id:"example-4-request_tracker",children:"Example 4: REQUEST_TRACKER"}),"\n",(0,n.jsxs)(l.A,{groupId:"ex-tracker-tabs",children:[(0,n.jsxs)(r.A,{value:"conversation",label:"Conversation",default:!0,children:[(0,n.jsxs)(o.sy,{title:"REQUEST_TRACKER",children:[(0,n.jsx)(o.KJ,{children:"Track request REQ-99123"}),(0,n.jsx)(o.Fb,{children:"REQ-99123 is APPROVAL_PENDING since 2026-02-10."})]}),(0,n.jsx)(o.il,{title:"Tracker flow",subtitle:"SET_TASK driven consumer integration path",nodes:b,edges:v,detailsById:R,defaultSelectedId:"t_rules"})]}),(0,n.jsxs)(r.A,{value:"dml",label:"DML Entries",children:[(0,n.jsx)(o.vl,{title:"REQUEST_TRACKER scenario DML",language:"sql",children:"insert into ce_intent(intent_code, enabled) values ('REQUEST_TRACKER', true);\ninsert into ce_prompt_template(intent_code, state_code, response_type, system_prompt, user_prompt, enabled)\nvalues ('REQUEST_TRACKER', 'LOOKUP', 'TEXT', 'Render request tracker status from context.', 'Respond with requestId, status and lastUpdated.', true);\ninsert into ce_output_schema(intent_code, state_code, schema_json, enabled)\nvalues ('REQUEST_TRACKER', 'LOOKUP', '{\"type\":\"object\",\"properties\":{\"requestId\":{\"type\":\"string\"}}}', true);\ninsert into ce_response(intent_code, state_code, response_type, output_format, exact_text, enabled)\nvalues ('REQUEST_TRACKER', 'LOOKUP', 'DERIVED', 'TEXT', null, true);"}),(0,n.jsx)(o.p,{title:"REQUEST_TRACKER config rows preview",columns:["Table","Key values"],rows:[["ce_intent","intent_code=REQUEST_TRACKER"],["ce_prompt_template","intent_code=REQUEST_TRACKER, state_code=LOOKUP"],["ce_output_schema","property=requestId"],["ce_response","response_type=DERIVED"]]})]}),(0,n.jsx)(r.A,{value:"audit",label:"Audit Trail",children:(0,n.jsx)(o.p,{title:"REQUEST_TRACKER ce_audit trail",columns:["Stage","What happened"],rows:[["INTENT_RESOLVED","Intent set to REQUEST_TRACKER"],["RULE_MATCHED","SET_TASK=TRACK_REQUEST_STATUS"],["TASK_EXECUTION","Consumer service injected context"],["ASSISTANT_OUTPUT","Tracker response built"],["CONVERSATION_PERSIST","Payload and state persisted"]]})})]}),"\n",(0,n.jsx)(t.h2,{id:"example-5-reset_session",children:"Example 5: RESET_SESSION"}),"\n",(0,n.jsxs)(l.A,{groupId:"ex-reset-tabs",children:[(0,n.jsxs)(r.A,{value:"conversation",label:"Conversation",default:!0,children:[(0,n.jsxs)(o.sy,{title:"RESET_SESSION",children:[(0,n.jsx)(o.KJ,{children:"RESET_SESSION"}),(0,n.jsx)(o.Fb,{children:"Session reset complete. Starting fresh."})]}),(0,n.jsx)(o.il,{title:"Reset flow",subtitle:"Config-driven reset command through ResetConversationStep",nodes:A,edges:f,detailsById:I,defaultSelectedId:"r_reset"})]}),(0,n.jsxs)(r.A,{value:"dml",label:"DML Entries",children:[(0,n.jsx)(o.vl,{title:"RESET_SESSION scenario DML",language:"sql",children:"insert into ce_intent(intent_code, enabled) values ('RESET_SESSION', true);\ninsert into ce_prompt_template(intent_code, state_code, response_type, system_prompt, user_prompt, enabled)\nvalues ('RESET_SESSION', 'IDLE', 'TEXT', 'Confirm reset and ask next request.', 'User issued reset. Confirm reset and ask how to help next.', true);\ninsert into ce_output_schema(intent_code, state_code, schema_json, enabled)\nvalues ('RESET_SESSION', 'IDLE', '{\"type\":\"object\",\"properties\":{}}', true);\ninsert into ce_response(intent_code, state_code, response_type, output_format, exact_text, enabled)\nvalues ('RESET_SESSION', 'IDLE', 'EXACT', 'TEXT', 'Session reset complete. Starting fresh.', true);"}),(0,n.jsx)(o.p,{title:"RESET_SESSION config rows preview",columns:["Table","Key values"],rows:[["ce_intent","intent_code=RESET_SESSION"],["ce_prompt_template","intent_code=RESET_SESSION, state_code=IDLE"],["ce_output_schema","empty schema object"],["ce_response","response_type=EXACT"]]})]}),(0,n.jsx)(r.A,{value:"audit",label:"Audit Trail",children:(0,n.jsx)(o.p,{title:"RESET_SESSION ce_audit trail",columns:["Stage","What happened"],rows:[["SESSION_REHYDRATE","Existing conversation loaded"],["CONVERSATION_RESET","Intent/state/context wiped"],["STEP_EXIT (ResetConversationStep)","Reset step completed"],["ASSISTANT_OUTPUT","Reset confirmation emitted"],["CONVERSATION_PERSIST","Baseline state saved"]]})})]}),"\n",(0,n.jsx)(o.f4,{type:"tip",title:"Intervention points",children:(0,n.jsxs)(t.p,{children:["For extraction customization hook ",(0,n.jsx)(o.pu,{children:"EngineStep.Name.SchemaExtractionStep"}),". For final output normalization use ",(0,n.jsx)(o.pu,{children:"ResponseTransformer"}),"."]})})]})}function j(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(C,{...e})}):C(e)}},9365(e,t,s){s.d(t,{A:()=>l});s(6540);var a=s(4164);const n="tabItem_Ymn6";var i=s(4848);function l({children:e,hidden:t,className:s}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,a.A)(n,s),hidden:t,children:e})}}}]);