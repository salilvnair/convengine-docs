"use strict";(globalThis.webpackChunkconvengine_docs=globalThis.webpackChunkconvengine_docs||[]).push([[1461],{3986(e,n,l){l.r(n),l.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>p,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"consumer/mcp/http-tool","title":"MCP HTTP Tool","description":"ConvEngine supports two HTTP MCP integration models.","source":"@site/docs/v2/consumer/mcp/http-tool.mdx","sourceDirName":"consumer/mcp","slug":"/consumer/mcp/http-tool","permalink":"/docs/v2/consumer/mcp/http-tool","draft":false,"unlisted":false,"editUrl":"https://github.com/salilvnair/convengine-docs/tree/main/docs/v2/consumer/mcp/http-tool.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"MCP HTTP Tool","sidebar_position":3},"sidebar":"docSidebar","previous":{"title":"MCP Advanced Guide","permalink":"/docs/v2/consumer/mcp/advanced"},"next":{"title":"MCP Deep Dive","permalink":"/docs/v2/consumer/mcp/deep-dive"}}');var i=l(4848),o=l(8453),r=l(7555);const c={title:"MCP HTTP Tool",sidebar_position:3},d="MCP HTTP Tool",t={},a=[{value:"Two ways",id:"two-ways",level:2},{value:"Model A: HttpApiRequestingToolHandler",id:"model-a-httpapirequestingtoolhandler",level:2},{value:"Flow",id:"flow",level:3},{value:"Model B: HttpApiProcessorToolHandler",id:"model-b-httpapiprocessortoolhandler",level:2},{value:"Flow",id:"flow-1",level:3},{value:"convengine-demo package convention",id:"convengine-demo-package-convention",level:2},{value:"What MockOrderAsyncTraceToolHandler does",id:"what-mockorderasynctracetoolhandler-does",level:2},{value:"Related",id:"related",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"mcp-http-tool",children:"MCP HTTP Tool"})}),"\n",(0,i.jsx)(n.p,{children:"ConvEngine supports two HTTP MCP integration models."}),"\n",(0,i.jsx)(n.h2,{id:"two-ways",children:"Two ways"}),"\n",(0,i.jsx)(r.p,{title:"HTTP MCP models",columns:["Model","Use when","How it executes"],rows:[["HttpApiRequestingToolHandler","You want framework-managed retries/timeouts/circuit/auth/mapping","HttpApiToolInvoker (framework HttpClient)"],["HttpApiProcessorToolHandler","You already use [api-processor](https://github.com/salilvnair/api-processor) in your app","RestWebServiceFacade -> delegate.invoke -> processResponse"]]}),"\n",(0,i.jsx)(n.p,{children:"Related libraries:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/salilvnair/api-processor",children:"api-processor"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/salilvnair/ccf-core",children:"ccf-core"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"model-a-httpapirequestingtoolhandler",children:"Model A: HttpApiRequestingToolHandler"}),"\n",(0,i.jsx)(n.h3,{id:"flow",children:"Flow"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Handler returns ",(0,i.jsx)(n.code,{children:"HttpApiRequestSpec"})]}),"\n",(0,i.jsx)(n.li,{children:"Framework executes HTTP call"}),"\n",(0,i.jsx)(n.li,{children:"Mapping mode resolves output"}),"\n",(0,i.jsx)(n.li,{children:"MCP observation is stored"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Supported mapping modes:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"RAW_JSON"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"JSON_PATH"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"FIELD_TEMPLATE"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"MAPPER_CLASS"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"TEXT"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"MAPPER_CLASS"})," example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'new HttpApiResponseMapping(\n        HttpApiResponseMappingMode.MAPPER_CLASS,\n        null,\n        Map.of(),\n        "com.acme.api.OrderStatusResponse");\n'})}),"\n",(0,i.jsx)(n.h2,{id:"model-b-httpapiprocessortoolhandler",children:"Model B: HttpApiProcessorToolHandler"}),"\n",(0,i.jsx)(n.h3,{id:"flow-1",children:"Flow"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"wsContext(...)"})," builds tool context"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"wsHandler(...)"})," returns ",(0,i.jsx)(n.code,{children:"RestWebServiceHandler"})]}),"\n",(0,i.jsxs)(n.li,{children:["Framework calls ",(0,i.jsx)(n.code,{children:"RestWebServiceFacade.initiate(...)"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"prepareRequest(...)"})," runs"]}),"\n",(0,i.jsxs)(n.li,{children:["delegate ",(0,i.jsx)(n.code,{children:"invoke(...)"})," runs"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"processResponse(...)"})," maps output"]}),"\n",(0,i.jsxs)(n.li,{children:["framework calls ",(0,i.jsx)(n.code,{children:"extractResponse(...)"})," and stores MCP observation"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"convengine-demo-package-convention",children:"convengine-demo package convention"}),"\n",(0,i.jsxs)(n.p,{children:["In demo we now keep each ",(0,i.jsx)(n.a,{href:"https://github.com/salilvnair/api-processor",children:"api-processor"})," MCP tool in its own folder tree with dedicated handler/delegate:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"mcp/handler/loan/credit/rating/..."})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"mcp/handler/loan/credit/fraud/..."})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"mcp/handler/loan/application/submit/..."})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"mcp/handler/mock/customer/profile/..."})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"mcp/handler/mock/order/status/..."})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"mcp/handler/mock/order/async/trace/..."})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"mcp/handler/mock/order/submit/..."})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Each tool folder contains:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"<Tool>ToolHandler"})," (MCP SPI class)"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"handler/<Tool>WsHandler"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"delegate/<Tool>WsDelegate"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Shared lightweight helper types are in:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"mcp/handler/common/..."})}),"\n"]}),"\n",(0,i.jsx)(r.f4,{type:"tip",title:"Debt tool intentionally unchanged",children:(0,i.jsxs)(n.p,{children:["As requested, ",(0,i.jsx)(n.code,{children:"LoanDebtSummaryToolHandler"})," remains ",(0,i.jsx)(n.code,{children:"HttpApiRequestingToolHandler"})," to demonstrate the framework-managed HTTP model side-by-side with ",(0,i.jsx)(n.a,{href:"https://github.com/salilvnair/api-processor",children:"api-processor"})," mode."]})}),"\n",(0,i.jsx)(n.h2,{id:"what-mockorderasynctracetoolhandler-does",children:"What MockOrderAsyncTraceToolHandler does"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"mock.order.async.trace"})," fetches async callback trace details for an order:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"traceId"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"api4AsyncStatus"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"callbackReceivedAt"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"message"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"It is used in order diagnostics flow to explain why an order can be submitted while async callback is still pending or null."}),"\n",(0,i.jsx)(n.h2,{id:"related",children:"Related"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/v2/consumer/mcp/basics",children:"MCP Basics"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/v2/consumer/mcp/advanced",children:"MCP Advanced Guide"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/v2/consumer/mcp/example1",children:"MCP Example 1"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/v2/consumer/mcp/example2",children:"MCP Example 2"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);