"use strict";(globalThis.webpackChunkconvengine_docs=globalThis.webpackChunkconvengine_docs||[]).push([[609],{2200(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"deep-dive/lifecycle","title":"Request Lifecycle","description":"This page is the quick lifecycle view. For the full interactive debug tree, open /docs/deep-dive/request-lifecycle.","source":"@site/docs/deep-dive/lifecycle.mdx","sourceDirName":"deep-dive","slug":"/deep-dive/lifecycle","permalink":"/docs/deep-dive/lifecycle","draft":false,"unlisted":false,"editUrl":"https://github.com/salilvnair/convengine-docs/tree/main/docs/deep-dive/lifecycle.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Request Lifecycle","sidebar_position":2,"hide_table_of_contents":true},"sidebar":"docSidebar","previous":{"title":"Overview","permalink":"/docs/deep-dive/"},"next":{"title":"Real-world Examples (Debug Trace)","permalink":"/docs/deep-dive/examples"}}');var s=i(4848),o=i(8453),r=i(4566);const l={title:"Request Lifecycle",sidebar_position:2,hide_table_of_contents:!0},c="Request Lifecycle",a={},d=[{value:"1. API Entry Point",id:"1-api-entry-point",level:2},{value:"2. Engine Processing",id:"2-engine-processing",level:2},{value:"3. The Pipeline (Step-by-Step)",id:"3-the-pipeline-step-by-step",level:2}];function p(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"request-lifecycle",children:"Request Lifecycle"})}),"\n",(0,s.jsxs)(n.p,{children:["This page is the quick lifecycle view. For the full interactive debug tree, open ",(0,s.jsx)(r.Mn,{children:"/docs/deep-dive/request-lifecycle"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"1-api-entry-point",children:"1. API Entry Point"}),"\n",(0,s.jsxs)(n.p,{children:["The journey begins when a client sends a POST request to ",(0,s.jsx)(n.code,{children:"/api/v1/conversation/message"}),"."]}),"\n",(0,s.jsx)(r.vl,{title:"ConversationController.message",language:"java",packagePath:"com.github.salilvnair.convengine.api.controller",filePath:"src/main/java/com/github/salilvnair/convengine/api/controller/ConversationController.java",children:'@PostMapping("/message")\npublic ConversationResponse message(@RequestBody ConversationRequest request) {\nEngineContext engineContext = EngineContext.builder()\n    .conversationId(request.getConversationId())\n    .userText(request.getMessage())\n    .inputParams(request.getInputParams())\n    .build();\n\nEngineResult result = engine.process(engineContext);\n\nreturn mapToResponse(result);\n}'}),"\n",(0,s.jsx)(n.h2,{id:"2-engine-processing",children:"2. Engine Processing"}),"\n",(0,s.jsx)(r.vl,{title:"DefaultConversationalEngine.process",language:"java",packagePath:"com.github.salilvnair.convengine.engine.provider",filePath:"src/main/java/com/github/salilvnair/convengine/engine/provider/DefaultConversationalEngine.java",children:"@Override\npublic EngineResult process(EngineContext engineContext) {\nEngineSession session = sessionFactory.open(engineContext);\nsession.setConversationHistory(historyProvider.lastTurns(session.getConversationId(), 10));\nEnginePipeline pipeline = pipelineFactory.create();\nreturn pipeline.execute(session);\n}"}),"\n",(0,s.jsx)(n.h2,{id:"3-the-pipeline-step-by-step",children:"3. The Pipeline (Step-by-Step)"}),"\n",(0,s.jsx)(r.Ve,{ariaLabel:"Pipeline step-by-step"}),"\n",(0,s.jsx)(r.f4,{type:"info",title:"Core path vs conditional steps",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"PolicyEnforcementStep"}),", ",(0,s.jsx)(n.code,{children:"ResetResolvedIntentStep"}),", ",(0,s.jsx)(n.code,{children:"FallbackIntentStateStep"}),", ",(0,s.jsx)(n.code,{children:"AddContainerDataStep"}),", and ",(0,s.jsx)(n.code,{children:"McpToolStep"})," are route-conditional and run only when config/session conditions match."]})}),"\n",(0,s.jsx)(r.f4,{type:"success",title:"Audit Trail",children:(0,s.jsxs)(n.p,{children:["Every step above emits an audit event. Use ",(0,s.jsx)(n.code,{children:"/audit/{id}/trace"})," and then open ",(0,s.jsx)(r.Mn,{children:"/docs/deep-dive/request-lifecycle"})," for the full interactive step tree and method-level trace."]})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}}}]);