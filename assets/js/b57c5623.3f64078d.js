"use strict";(globalThis.webpackChunkconvengine_docs=globalThis.webpackChunkconvengine_docs||[]).push([[666],{375(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"api/rest-api","title":"REST API","description":"Base","source":"@site/docs/api/rest-api.mdx","sourceDirName":"api","slug":"/api/rest-api","permalink":"/docs/api/rest-api","draft":false,"unlisted":false,"editUrl":"https://github.com/salilvnair/convengine-docs/tree/main/docs/api/rest-api.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"REST API","sidebar_position":1},"sidebar":"docSidebar","previous":{"title":"Session, Reset, Continuity","permalink":"/docs/consumer/session-reset-and-continuity"},"next":{"title":"Java API","permalink":"/docs/api/java-api"}}');var a=t(4848),i=t(8453),r=t(2073);const o={title:"REST API",sidebar_position:1},l="REST API",d={},c=[{value:"Base",id:"base",level:2},{value:"Endpoints",id:"endpoints",level:2},{value:"POST <FileRef>/message</FileRef>",id:"post-message",level:2},{value:"Experimental endpoint (feature-flagged)",id:"experimental-endpoint-feature-flagged",level:2},{value:"Runtime performance controls (no new endpoint)",id:"runtime-performance-controls-no-new-endpoint",level:2}];function p(e){const n={h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"rest-api",children:"REST API"})}),"\n",(0,a.jsx)(n.h2,{id:"base",children:"Base"}),"\n",(0,a.jsx)(r.Mn,{children:"/api/v1/conversation"}),"\n",(0,a.jsx)(n.h2,{id:"endpoints",children:"Endpoints"}),"\n",(0,a.jsx)(r.p,{title:"Conversation endpoints",columns:["Method","Path","Purpose"],rows:[["POST","/message","Process one turn and return payload"],["GET","/audit/{conversationId}","Raw audit rows for conversation"],["GET","/audit/{conversationId}/trace","Normalized step+stage timeline"],["GET","/stream/{conversationId}","SSE live stream of audit events"]]}),"\n",(0,a.jsxs)(n.h2,{id:"post-message",children:["POST ",(0,a.jsx)(r.Mn,{children:"/message"})]}),"\n",(0,a.jsx)(r.vl,{title:"Request body",language:"json",defaultOpen:!0,children:'{\n"conversationId": "uuid-optional",\n"message": "Track request REQ-778102",\n"reset": false,\n"inputParams": {\n  "tenant": "acme"\n}\n}'}),"\n",(0,a.jsx)(r.vl,{title:"Success response",language:"json",defaultOpen:!0,children:'{\n"success": true,\n"conversationId": "9bf7540a-b129-4685-a120-730e8a0cb94b",\n"intent": "REQUEST_TRACKER",\n"state": "IDLE",\n"payload": {\n  "type": "TEXT",\n  "value": "Request REQ-778102 is IN_REVIEW."\n},\n"context": "{...}"\n}'}),"\n",(0,a.jsx)(n.h2,{id:"experimental-endpoint-feature-flagged",children:"Experimental endpoint (feature-flagged)"}),"\n",(0,a.jsxs)(n.p,{children:["Base: ",(0,a.jsx)(r.Mn,{children:"/api/v1/conversation/experimental"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(r.pu,{children:"POST /generate-sql"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Enable with:"}),"\n",(0,a.jsx)(r.vl,{title:"application.yml (feature flag)",language:"yaml",children:"convengine:\nexperimental:\n  enabled: true"}),"\n",(0,a.jsx)(r.f4,{type:"warning",title:"Experimental output",children:(0,a.jsx)(n.p,{children:"Generated SQL should be reviewed before use. The endpoint applies safety checks but does not replace human review."})}),"\n",(0,a.jsx)(n.h2,{id:"runtime-performance-controls-no-new-endpoint",children:"Runtime performance controls (no new endpoint)"}),"\n",(0,a.jsx)(r.vl,{title:"application.yml (audit + transport controls)",language:"yaml",children:"convengine:\naudit:\n  enabled: true\n  level: ALL # ALL | STANDARD | ERROR_ONLY | NONE\n  include-stages: [] # wildcard supported e.g. STEP_*\n  exclude-stages: []\n  persistence:\n    mode: IMMEDIATE # IMMEDIATE | DEFERRED_BULK\n    jdbc-batch-size: 200\n    max-buffered-events: 5000\n    flush-stages: ENGINE_KNOWN_FAILURE,ENGINE_UNKNOWN_FAILURE\n    final-step-names: PipelineEndGuardStep\n    flush-on-stop-outcome: true\n  dispatch:\n    async-enabled: false\n    worker-threads: 2\n    queue-capacity: 2000\n    rejection-policy: CALLER_RUNS # CALLER_RUNS | DROP_NEWEST | DROP_OLDEST | ABORT\n    keep-alive-seconds: 60\n  rate-limit:\n    enabled: false\n    max-events: 200\n    window-ms: 1000\n    per-conversation: true\n    per-stage: true\n    max-tracked-buckets: 20000\n\ntransport:\n  stomp:\n    enabled: true\n    broker:\n      mode: SIMPLE # SIMPLE | RELAY\n      relay-destination-prefixes: /topic,/queue\n      relay-host: localhost\n      relay-port: 61613"})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}}}]);