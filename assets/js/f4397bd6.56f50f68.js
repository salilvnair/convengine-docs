"use strict";(globalThis.webpackChunkconvengine_docs=globalThis.webpackChunkconvengine_docs||[]).push([[2408],{1987(n,e,t){t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>p});const s=JSON.parse('{"id":"consumer/annotations-reference","title":"Annotations Reference","description":"This page lists all annotation types currently present in ConvEngine and how consumers should use them.","source":"@site/docs/v2/consumer/annotations-reference.mdx","sourceDirName":"consumer","slug":"/consumer/annotations-reference","permalink":"/docs/v2/consumer/annotations-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/salilvnair/convengine-docs/tree/main/docs/v2/consumer/annotations-reference.mdx","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"title":"Annotations Reference","sidebar_position":6,"hide_table_of_contents":true},"sidebar":"docSidebar","previous":{"title":"Configuration","permalink":"/docs/v2/consumer/configuration"},"next":{"title":"Extensions","permalink":"/docs/v2/consumer/extensions"}}');var o=t(4848),r=t(8453),a=t(9131);const i={title:"Annotations Reference",sidebar_position:6,hide_table_of_contents:!0},l="Annotations Reference",c={},p=[{value:"Consumer entry annotations",id:"consumer-entry-annotations",level:2},{value:"Extension annotations (consumer customization)",id:"extension-annotations-consumer-customization",level:2},{value:"Internal pipeline annotations (advanced / framework contributors)",id:"internal-pipeline-annotations-advanced--framework-contributors",level:2},{value:"Quick recommendations for consumers",id:"quick-recommendations-for-consumers",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",...(0,r.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"annotations-reference",children:"Annotations Reference"})}),"\n",(0,o.jsx)(e.p,{children:"This page lists all annotation types currently present in ConvEngine and how consumers should use them."}),"\n",(0,o.jsx)(e.h2,{id:"consumer-entry-annotations",children:"Consumer entry annotations"}),"\n",(0,o.jsx)(a.p,{title:"Use these in your consumer app",columns:["Annotation","Target","Purpose","Typical usage"],rows:[["`@EnableConvEngine(stream = true|false)`","Spring Boot app class","Bootstraps ConvEngine auto-configuration and stream setting.","Always required to activate framework."],["`@CeEnableCaching`","Spring Boot app class","Hooks ConvEngine's pipeline to Spring's CacheManager to intercept slow relational DB saves.","Apply to resolve conversation I/O latency."],["`@CeEnableAsyncConversation`","Spring Boot app class","Ties ConvEngine into Spring's thread pools for asynchronous background tasks.","Apply alongside caching."],["`@EnableConvEngineAsyncAuditDispatch`","Spring config/app class","Forces async audit dispatch marker mode.","Use when you intentionally want async listener dispatch."],["`@EnableConvEngineStompBrokerRelay`","Spring config/app class","Forces STOMP broker relay marker mode.","Use when deploying with external STOMP broker relay."]]}),"\n",(0,o.jsx)(a.vl,{title:"Basic enablement",language:"java",children:"@SpringBootApplication\n@EnableConvEngine(stream = true)\n@CeEnableCaching\n@CeEnableAsyncConversation\npublic class MyApplication {\npublic static void main(String[] args) {\n  SpringApplication.run(MyApplication.class, args);\n}\n}"}),"\n",(0,o.jsx)(a.vl,{title:"Optional relay + async markers",language:"java",children:"@Configuration\n@EnableConvEngineAsyncAuditDispatch\n@EnableConvEngineStompBrokerRelay\npublic class ConvEngineFeatureFlags {\n}"}),"\n",(0,o.jsx)(a.f4,{type:"info",title:"How stream mode works",children:(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.code,{children:"stream"})," is an annotation parameter on ",(0,o.jsx)(e.code,{children:"@EnableConvEngine"}),", not a YAML key. Keep it aligned with ",(0,o.jsx)(e.code,{children:"convengine.transport.sse.enabled"})," and ",(0,o.jsx)(e.code,{children:"convengine.transport.stomp.enabled"}),"."]})}),"\n",(0,o.jsx)(e.h2,{id:"extension-annotations-consumer-customization",children:"Extension annotations (consumer customization)"}),"\n",(0,o.jsx)(a.p,{title:"Extension points",columns:["Annotation","Must implement","Purpose","Key parameters"],rows:[["`@ResponseTransformer`","`ResponseTransformerHandler`","Last-mile payload shaping by intent/state.","`intent`, `state`"],["`@ContainerDataTransformer`","`ContainerDataTransformerHandler`","Transforms CCF container data before session attach.","`intent`, `state`"],["`@ContainerDataInterceptor`","`ContainerDataRequestInterceptor` and/or `ContainerDataResponseInterceptor`","Intercepts CCF request/response around execution.","`intent`, `state`, `order`"]]}),"\n",(0,o.jsx)(a.vl,{title:"Response transformer example",language:"java",children:'@Component\n@ResponseTransformer(intent = "REQUEST_TRACKER", state = "IDLE")\npublic class TrackerResponseTransformer implements ResponseTransformerHandler {\n@Override\npublic OutputPayload transform(OutputPayload responsePayload,\n                               EngineSession session,\n                               Map<String, Object> inputParams) {\n  return responsePayload;\n}\n}'}),"\n",(0,o.jsx)(a.vl,{title:"Container transformer example",language:"java",children:'@Component\n@ContainerDataTransformer(intent = "DISCONNECT_ELECTRICITY", state = "COLLECTING")\npublic class DisconnectContainerTransformer implements ContainerDataTransformerHandler {\n@Override\npublic Map<String, Object> transform(ContainerComponentResponse response,\n                                     EngineSession session,\n                                     Map<String, Object> inputParams) {\n  return Map.of("normalized", response);\n}\n}'}),"\n",(0,o.jsx)(a.vl,{title:"Container interceptor example",language:"java",children:'@Component\n@ContainerDataInterceptor(intent = "*", state = "*", order = 10)\npublic class TraceContainerInterceptor\n  implements ContainerDataRequestInterceptor, ContainerDataResponseInterceptor {\n\n@Override\npublic void intercept(ContainerComponentRequest request, EngineSession session) {\n  // mutate request if needed\n}\n\n@Override\npublic ContainerComponentResponse intercept(ContainerComponentResponse response, EngineSession session) {\n  return response;\n}\n}'}),"\n",(0,o.jsx)(a.f4,{type:"warning",title:"Transformer/interceptor registration rules",children:(0,o.jsxs)(e.p,{children:["If a class uses ",(0,o.jsx)(e.code,{children:"@ResponseTransformer"})," or ",(0,o.jsx)(e.code,{children:"@ContainerDataTransformer"})," but does not implement the required handler interface, startup fails."]})}),"\n",(0,o.jsx)(e.h2,{id:"internal-pipeline-annotations-advanced--framework-contributors",children:"Internal pipeline annotations (advanced / framework contributors)"}),"\n",(0,o.jsx)(a.p,{title:"Engine DAG annotations",columns:["Annotation","Role","Who should use it"],rows:[["`@MustRunAfter(...)`","Declares DAG dependency: step runs after listed steps.","Framework contributors adding new `EngineStep` beans."],["`@MustRunBefore(...)`","Declares DAG dependency: step runs before listed steps.","Framework contributors adding new `EngineStep` beans."],["`@RequiresConversationPersisted`","Forces ordering after bootstrap persistence step.","Framework/internal step authors."],["`@ConversationBootstrapStep`","Marks the single bootstrap step in pipeline.","Framework internals only."],["`@TerminalStep`","Marks the single terminal step in pipeline.","Framework internals only."],["`@PromptVar`","Maps fields in internal prompt context models to template aliases.","Framework internals only; not for consumer app classes."]]}),"\n",(0,o.jsx)(a.vl,{title:"Custom step with ordering",language:"java",children:"@Component\n@RequiresConversationPersisted\n@MustRunAfter(IntentResolutionStep.class)\n@MustRunBefore(ResponseResolutionStep.class)\npublic class CustomValidationStep implements EngineStep {\n@Override\npublic StepResult execute(EngineSession session) {\n  return new StepResult.Continue();\n}\n}"}),"\n",(0,o.jsx)(a.f4,{type:"warning",title:"Important constraints",children:(0,o.jsxs)(e.p,{children:["Pipeline requires exactly one ",(0,o.jsx)(e.code,{children:"@ConversationBootstrapStep"})," and one ",(0,o.jsx)(e.code,{children:"@TerminalStep"}),". Misuse can break startup DAG validation."]})}),"\n",(0,o.jsx)(e.h2,{id:"quick-recommendations-for-consumers",children:"Quick recommendations for consumers"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:["Use ",(0,o.jsx)(e.code,{children:"@EnableConvEngine"}),", ",(0,o.jsx)(e.code,{children:"@CeEnableCaching"}),", and ",(0,o.jsx)(e.code,{children:"@CeEnableAsyncConversation"})," initially for zero-latency pipelines."]}),"\n",(0,o.jsxs)(e.li,{children:["Add ",(0,o.jsx)(e.code,{children:"@ResponseTransformer"})," or container annotations only when you have a concrete customization need."]}),"\n",(0,o.jsx)(e.li,{children:"Avoid pipeline DAG annotations unless you are intentionally adding custom engine steps and can test full ordering."}),"\n",(0,o.jsx)(e.li,{children:"Keep annotation usage paired with integration tests for one real conversation flow."}),"\n"]}),"\n",(0,o.jsx)(a.f4,{type:"info",title:"Related pages",children:(0,o.jsxs)(e.p,{children:["See ",(0,o.jsx)(e.a,{href:"/docs/v2/consumer/",children:"Consumer Guide"}),", ",(0,o.jsx)(e.a,{href:"/docs/v2/consumer/new-consumer-onboarding",children:"New Consumer Onboarding"}),", and ",(0,o.jsx)(e.a,{href:"/docs/v2/consumer/extensions",children:"Extensions"})," for end-to-end integration context."]})})]})}function u(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(d,{...n})}):d(n)}}}]);