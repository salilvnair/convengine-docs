"use strict";(globalThis.webpackChunkconvengine_docs=globalThis.webpackChunkconvengine_docs||[]).push([[1803],{4483(e,n,i){i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>o,default:()=>a,frontMatter:()=>s,metadata:()=>l,toc:()=>t});const l=JSON.parse('{"id":"deep-dive/data-model","title":"Data Model","description":"ConvEngine relies entirely on configuration over code. State, relationships, and execution boundaries are encoded in the schema.","source":"@site/docs/v2/deep-dive/data-model.mdx","sourceDirName":"deep-dive","slug":"/deep-dive/data-model","permalink":"/docs/v2/deep-dive/data-model","draft":false,"unlisted":false,"editUrl":"https://github.com/salilvnair/convengine-docs/tree/main/docs/v2/deep-dive/data-model.mdx","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Data Model","sidebar_position":4},"sidebar":"docSidebar","previous":{"title":"Real World Examples","permalink":"/docs/v2/deep-dive/examples"},"next":{"title":"Developer Guide","permalink":"/docs/v2/deep-dive/developer-guide"}}');var c=i(4848),d=i(8453);const s={title:"Data Model",sidebar_position:4},o="Data Model",r={},t=[{value:"Control-plane tables",id:"control-plane-tables",level:2},{value:"Runtime tables",id:"runtime-tables",level:2},{value:"<code>ce_conversation_history</code>",id:"ce_conversation_history",level:2},{value:"<code>ce_pending_action</code>",id:"ce_pending_action",level:2},{value:"Rule phase compatibility",id:"rule-phase-compatibility",level:2},{value:"Tool-group compatibility",id:"tool-group-compatibility",level:2},{value:"MCP tool scope columns",id:"mcp-tool-scope-columns",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,d.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"data-model",children:"Data Model"})}),"\n",(0,c.jsx)(n.p,{children:"ConvEngine relies entirely on configuration over code. State, relationships, and execution boundaries are encoded in the schema."}),"\n",(0,c.jsx)(n.h2,{id:"control-plane-tables",children:"Control-plane tables"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"ce_config"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"ce_container_config"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"ce_intent"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"ce_intent_classifier"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"ce_output_schema"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"ce_prompt_template"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"ce_response"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"ce_rule"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"ce_policy"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"ce_mcp_tool"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"ce_mcp_db_tool"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"ce_pending_action"})}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"runtime-tables",children:"Runtime tables"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"ce_conversation"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"ce_audit"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"ce_conversation_history"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"ce_llm_call_log"})}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"ce_conversation_history",children:(0,c.jsx)(n.code,{children:"ce_conversation_history"})}),"\n",(0,c.jsxs)(n.p,{children:["Introduced to store chronological multi-turn array states strictly decoupled from internal ",(0,c.jsx)(n.code,{children:"ce_audit"})," tracking."]}),"\n",(0,c.jsx)(n.p,{children:"Key columns:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"history_id"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"conversation_id"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"user_input"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"assistant_output"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"created_at"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"modified_at"})}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"ce_pending_action",children:(0,c.jsx)(n.code,{children:"ce_pending_action"})}),"\n",(0,c.jsx)(n.p,{children:"Introduced for confirm-before-run logic and unambiguous multi-action resolution."}),"\n",(0,c.jsx)(n.p,{children:"Purpose:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"declarative catalog for executable pending actions by intent/state/action key"}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"Key columns:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"pending_action_id"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"intent_code"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"state_code"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"action_key"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"bean_name"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"method_names"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"priority"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"enabled"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"description"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"created_at"})}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"Lookup index:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"(enabled, action_key, intent_code, state_code, priority)"})}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"Important:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["runtime status (",(0,c.jsx)(n.code,{children:"OPEN/IN_PROGRESS/EXECUTED/REJECTED/EXPIRED"}),") is not stored in this table"]}),"\n",(0,c.jsxs)(n.li,{children:["runtime status is stored in ",(0,c.jsx)(n.code,{children:"context.pending_action_runtime"})]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"rule-phase-compatibility",children:"Rule phase compatibility"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"ce_rule.phase"})," includes phases:"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"PRE_EVAL"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"EVAL"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"POST_EVAL"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"PIPELINE_RULES"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"AGENT_POST_INTENT"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"MCP_POST_LLM"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"TOOL_POST_EXECUTION"})}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"tool-group-compatibility",children:"Tool-group compatibility"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"ce_mcp_tool.tool_group"})," normalizes to:"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"DB"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"HTTP_API"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"WORKFLOW_ACTION"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"DOCUMENT_RETRIEVAL"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"CALCULATOR_TRANSFORM"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"NOTIFICATION"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"FILES"})}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"mcp-tool-scope-columns",children:"MCP tool scope columns"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"ce_mcp_tool"})," also supports optional scope columns:"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"intent_code"})," (nullable)"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"state_code"})," (nullable)"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"Behavior:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["if both are ",(0,c.jsx)(n.code,{children:"NULL"}),", the tool is globally eligible"]}),"\n",(0,c.jsxs)(n.li,{children:["if set, tool eligibility is constrained to matching runtime ",(0,c.jsx)(n.code,{children:"session.intent"})," and ",(0,c.jsx)(n.code,{children:"session.state"})]}),"\n",(0,c.jsx)(n.li,{children:"non-matching scoped tools are skipped from MCP planning/execution"}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(h,{...e})}):h(e)}}}]);