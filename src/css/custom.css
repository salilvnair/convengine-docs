@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=Manrope:wght@400;500;600;700;800&display=swap');

:root {
  --ifm-font-family-base: 'Manrope', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --ifm-font-family-monospace: 'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, monospace;
  --ifm-container-width-xl: 1480px;

  --ifm-color-primary: #1d4ed8;
  --ifm-color-primary-dark: #1a45c2;
  --ifm-color-primary-darker: #163dab;
  --ifm-color-primary-darkest: #133591;
  --ifm-color-primary-light: #2257ee;
  --ifm-color-primary-lighter: #3064f2;
  --ifm-color-primary-lightest: #4d7df5;
  --ifm-background-color: #f4f8ff;
  --ifm-background-surface-color: #ffffff;
  --ifm-navbar-background-color: rgba(255, 255, 255, 0.88);
  --ifm-footer-background-color: #0f172a;
  --ifm-color-content: #0f172a;
  --ifm-color-content-secondary: #334155;
  --ifm-card-background-color: #ffffff;
  --ifm-toc-border-color: #dbeafe;
  --ifm-table-border-color: #dbeafe;
  --ifm-color-emphasis-100: #eff6ff;
  --ifm-color-emphasis-200: #dbeafe;
  --ifm-color-emphasis-300: #bfdbfe;
  --ifm-color-emphasis-700: #334155;

  --ce-surface: #ffffff;
  --ce-surface-2: #f4f8ff;
  --ce-border: #dbeafe;
  --ce-text-soft: #334155;
}

[data-theme='dark'] {
  --ifm-color-primary: #60a5fa;
  --ifm-color-primary-dark: #3b82f6;
  --ifm-color-primary-darker: #2563eb;
  --ifm-color-primary-darkest: #1d4ed8;
  --ifm-color-primary-light: #7ab8fb;
  --ifm-color-primary-lighter: #92c5fc;
  --ifm-color-primary-lightest: #b5dbfd;
  --ifm-background-color: #020617;
  /* Slate-950 (darker) */
  --ifm-background-surface-color: #0f172a;
  /* Slate-900 */
  --ifm-navbar-background-color: rgba(2, 6, 23, 0.9);
  --ifm-footer-background-color: #020617;
  --ifm-color-content: #e2e8f0;
  /* Slate-200 (whiter) */
  --ifm-color-content-secondary: #94a3b8;
  /* Slate-400 */
  --ifm-heading-color: #f8fafc;
  /* Slate-50 (almost white) */
  --ifm-card-background-color: #0f172a;
  --ifm-toc-border-color: #1e293b;
  --ifm-table-border-color: #334155;
  /* Slate-700 (more visible) */
  --ifm-color-emphasis-100: #0f172a;
  --ifm-color-emphasis-200: #1e293b;
  --ifm-color-emphasis-300: #334155;
  --ifm-color-emphasis-700: #cbd5e1;

  --ce-surface: #0f172a;
  --ce-surface-2: #1e293b;
  --ce-border: #334155;
  /* Increased contrast border */
  --ce-text-soft: #94a3b8;
  /* Slate-400 */
}

html,
body {
  background: var(--ifm-background-color);
}

.docs-doc-page .container {
  max-width: min(1480px, 96vw);
}

.theme-doc-markdown.markdown {
  max-width: none;
}

.navbar {
  backdrop-filter: blur(8px);
}

[data-theme='dark'] .navbar,
[data-theme='dark'] .theme-doc-sidebar-container,
[data-theme='dark'] .menu {
  background: #0a1324;
  border-color: #1f3556;
}

[data-theme='dark'] .footer {
  background: #070f1d;
}

[data-theme='dark'] .main-wrapper {
  background: radial-gradient(1200px 600px at 80% -10%, rgba(37, 99, 235, 0.06), transparent 55%),
    radial-gradient(900px 500px at -10% 10%, rgba(14, 116, 144, 0.04), transparent 50%),
    var(--ifm-background-color);
}

[data-theme='dark'] .menu__link {
  color: #c7dafb;
}

[data-theme='dark'] .navbar__link {
  color: #c9dcfb;
}

[data-theme='dark'] .navbar__link:hover,
[data-theme='dark'] .navbar__link--active {
  color: #eaf2ff;
}

/* Navbar light/dark toggle visibility */
.navbar [class*='colorModeToggle'] button {
  width: 34px;
  height: 34px;
  border-radius: 999px;
  border: 1px solid var(--ce-border);
  background: var(--ce-surface);
  color: #1e293b;
}

.navbar [class*='colorModeToggle'] button:hover {
  border-color: rgba(37, 99, 235, 0.62);
  background: rgba(37, 99, 235, 0.08);
}

.navbar [class*='colorModeToggle'] button :is(svg, svg path) {
  color: currentColor;
  stroke: currentColor;
}

[data-theme='dark'] .navbar [class*='colorModeToggle'] button {
  border-color: #334155;
  background: #0f172a;
  color: #e2e8f0;
}

[data-theme='dark'] .navbar [class*='colorModeToggle'] button:hover {
  border-color: #60a5fa;
  background: rgba(37, 99, 235, 0.24);
  color: #f8fafc;
}

[data-theme='dark'] .pagination-nav__label,
[data-theme='dark'] .pagination-nav__sublabel,
[data-theme='dark'] .breadcrumbs__link {
  color: #c8daf8;
}

[data-theme='dark'] .breadcrumbs__item--active .breadcrumbs__link {
  color: #eaf2ff;
}

[data-theme='dark'] .menu__list-item-collapsible:hover {
  background: rgba(37, 99, 235, 0.16);
}

[data-theme='dark'] .menu__link--active,
[data-theme='dark'] .menu__link:hover {
  background: rgba(37, 99, 235, 0.2);
  color: #eaf2ff;
}

[data-theme='dark'] .table-of-contents__link {
  color: #a9c0e5;
}

[data-theme='dark'] .table-of-contents__link--active,
[data-theme='dark'] .table-of-contents__link:hover {
  color: #d9e8ff;
}

[data-theme='dark'] .pagination-nav__link,
[data-theme='dark'] .card {
  background: #0d1a30;
  border-color: #1f3658;
}

[data-theme='dark'] .alert {
  background: #0e1930;
  border-color: #2b4a78;
}

[data-theme='dark'] .theme-doc-markdown blockquote {
  background: #0d1a30;
  border-left-color: #3b82f6;
  color: #d7e4ff;
}

[data-theme='dark'] .theme-doc-markdown table {
  background: #0d1a30;
}

[data-theme='dark'] .theme-doc-markdown table thead tr {
  background: #122340;
}

[data-theme='dark'] .theme-doc-markdown table tr:nth-child(even) {
  background: #0b1528;
}

[data-theme='dark'] .theme-doc-markdown table tr:hover {
  background: #16305a;
}

[data-theme='dark'] .theme-doc-markdown details {
  background: #0d1a30;
  border: 1px solid #1f3658;
  border-radius: 12px;
  padding: 0.5rem 0.75rem;
}

[data-theme='dark'] .theme-admonition {
  background: #0d1a30;
  border-color: #2b4a78;
}

[data-theme='dark'] .theme-doc-markdown hr {
  border-color: #28456e;
}

.theme-doc-markdown h1,
.theme-doc-markdown h2,
.theme-doc-markdown h3,
.theme-doc-markdown h4 {
  letter-spacing: -0.01em;
}

.markdown>h1:first-child {
  border-bottom: 1px solid var(--ce-border);
  padding-bottom: 0.6rem;
}

/* IntelliJ-like code styling */
.theme-code-block,
pre code {
  font-family: var(--ifm-font-family-monospace);
}

.theme-code-block {
  border: 1px solid var(--ce-border);
  border-radius: 14px;
  overflow: hidden;
}

.theme-code-block pre {
  background: #f8fafc;
}

[data-theme='dark'] .theme-code-block pre {
  background: #111827;
}

.ce-code-panel {
  border: 1px solid var(--ce-border);
  border-radius: 14px;
  overflow: hidden;
  margin: 1rem 0;
  background: var(--ce-surface);
}

.ce-code-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.8rem;
  padding: 0.75rem 0.9rem;
  border-bottom: 1px solid var(--ce-border);
  background: linear-gradient(90deg, rgba(29, 78, 216, 0.08), rgba(59, 130, 246, 0.03));
  cursor: pointer;
}

.ce-code-panel-title {
  font-weight: 700;
  font-size: 0.95rem;
}

.ce-code-panel-head-left {
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
}

.ce-code-panel-path-wrap {
  display: flex;
  flex-wrap: wrap;
  gap: 0.35rem;
}

.ce-code-panel-path {
  font-size: 0.72rem;
  font-family: var(--ifm-font-family-monospace);
  border: 1px solid var(--ce-border);
  padding: 0.16rem 0.45rem;
  border-radius: 999px;
  background: var(--ce-surface-2);
  color: var(--ce-text-soft);
}

.ce-code-panel-head-right {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.ce-code-lang {
  font-size: 0.74rem;
  font-weight: 700;
  border: 1px solid var(--ce-border);
  padding: 0.2rem 0.46rem;
  border-radius: 8px;
}

.ce-code-toggle-btn {
  border: none;
  border-radius: 10px;
  background: var(--ifm-color-primary);
  color: #fff;
  font-weight: 700;
  padding: 0.32rem 0.7rem;
  font-size: 0.75rem;
}

.ce-code-panel-body {
  padding: 0.45rem;
}

.ce-code-panel .theme-code-block {
  margin: 0;
}

.ce-code-panel .theme-code-block pre {
  overflow-x: auto;
}

.ce-code-panel .theme-code-block pre code {
  white-space: pre !important;
  tab-size: 2;
}

.ce-callout {
  border-radius: 12px;
  border: 1px solid var(--ce-border);
  padding: 0.85rem 0.95rem;
  margin: 1rem 0;
  background: var(--ce-surface);
  color: var(--ifm-color-content);
  /* Explicitly inherit text color */
}

.ce-callout p,
.ce-callout span,
.ce-callout li,
.ce-callout div {
  color: inherit;
}

.ce-callout-title {
  font-weight: 800;
  margin-bottom: 0.35rem;
}

.ce-callout-info {
  border-left: 4px solid #2563eb;
}

.ce-callout-success {
  border-left: 4px solid #059669;
}

.ce-callout-warning {
  border-left: 4px solid #d97706;
}

.ce-callout-danger {
  border-left: 4px solid #dc2626;
}

.ce-chat-shell {
  border: 1px solid var(--ce-border);
  border-radius: 16px;
  overflow: hidden;
  background: var(--ce-surface);
  margin: 1.2rem 0;
  max-width: none;
}

.ce-chat-shell-title {
  padding: 0.7rem 0.9rem;
  font-weight: 700;
  border-bottom: 1px solid var(--ce-border);
  background: linear-gradient(90deg, rgba(29, 78, 216, 0.12), rgba(29, 78, 216, 0.02));
}

.ce-chat-body {
  padding: 0.95rem 1.15rem;
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
  width: 100%;
  max-width: 980px;
  margin: 0 auto;
}

.ce-chat-row {
  display: flex;
  align-items: flex-end;
  gap: 0.55rem;
}

.ce-chat-row-user {
  justify-content: flex-end;
}

.ce-chat-row-assistant {
  justify-content: flex-start;
}

.ce-chat-icon {
  width: 34px;
  height: 34px;
  border-radius: 999px;
  display: grid;
  place-items: center;
  border: 1px solid var(--ce-border);
  color: var(--ifm-color-primary);
  background: var(--ce-surface-2);
  flex: 0 0 auto;
}

.ce-chat-icon-svg {
  width: 18px;
  height: 18px;
}

.ce-chat-bubble-wrap {
  max-width: min(78%, 720px);
}

.ce-chat-bubble-meta {
  font-size: 0.72rem;
  color: var(--ce-text-soft);
  margin-bottom: 0.2rem;
}

.ce-chat-bubble {
  padding: 0.7rem 0.85rem;
  border-radius: 12px;
  border: 1px solid var(--ce-border);
  position: relative;
  line-height: 1.45;
}

.ce-chat-bubble-user {
  background: linear-gradient(180deg, #2563eb, #1d4ed8);
  color: #fff;
  border-color: transparent;
}

.ce-chat-bubble-assistant {
  background: var(--ce-surface-2);
}

.ce-chat-bubble-user::after {
  content: '';
  position: absolute;
  right: -6px;
  bottom: 10px;
  width: 12px;
  height: 12px;
  transform: rotate(45deg);
  background: #1d4ed8;
}

.ce-chat-bubble-assistant::after {
  content: '';
  position: absolute;
  left: -7px;
  bottom: 10px;
  width: 12px;
  height: 12px;
  transform: rotate(45deg);
  background: var(--ce-surface-2);
  border-left: 1px solid var(--ce-border);
  border-bottom: 1px solid var(--ce-border);
}

.ce-table-card {
  border: 1px solid var(--ce-border);
  border-radius: 14px;
  margin: 1rem 0;
  overflow: hidden;
}

.ce-table-card-title {
  margin: 0;
  padding: 0.8rem 0.9rem;
  border-bottom: 1px solid var(--ce-border);
  background: var(--ce-surface-2);
}

.ce-table-wrap {
  overflow-x: auto;
}

.ce-table-card table {
  width: 100%;
  border-collapse: collapse;
}

.ce-table-card th,
.ce-table-card td {
  text-align: left;
  padding: 0.62rem 0.8rem;
  border-bottom: 1px solid var(--ce-border);
  vertical-align: top;
}

.ce-table-card th {
  background: rgba(29, 78, 216, 0.08);
  font-weight: 700;
}

.ce-table-note {
  padding: 0.7rem 0.9rem;
  font-size: 0.82rem;
  color: var(--ce-text-soft);
}

.ce-decision-card,
.ce-flow-step-card,
.ce-schema-card {
  border: 1px solid var(--ce-border);
  border-radius: 12px;
  padding: 0.85rem 0.95rem;
  margin: 0.9rem 0;
  background: var(--ce-surface);
  color: var(--ifm-color-content);
  /* Explicitly inherit text color */
}

.ce-flow-step-card p,
.ce-flow-step-card span,
.ce-flow-step-card div,
.ce-flow-step-card li {
  color: inherit;
}

.ce-flow-step-card>header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.55rem;
}

.ce-flow-step-index {
  width: 28px;
  height: 28px;
  border-radius: 999px;
  border: 1px solid rgba(47, 125, 199, 0.42);
  background: rgba(47, 125, 199, 0.16);
  color: #2f7dc7;
  display: grid;
  place-items: center;
  font-size: 0.76rem;
  font-weight: 800;
}

.ce-schema-title {
  font-weight: 700;
  margin-bottom: 0.45rem;
}

@media (max-width: 768px) {
  .ce-code-panel-header {
    flex-direction: column;
    align-items: flex-start;
  }

  .ce-code-panel-head-right {
    width: 100%;
    justify-content: flex-end;
  }

  .ce-chat-bubble-wrap {
    max-width: 92%;
  }
}

/* --- E2E docs polish overrides --- */
.ce-flow-step-card header {
  display: flex;
  align-items: center;
  gap: 0.65rem;
  margin-bottom: 0.5rem;
}

.ce-flow-step-index {
  box-shadow: 0 4px 10px rgba(47, 125, 199, 0.18);
}

.ce-flow-step-card h4 {
  margin: 0;
}

.ce-flow-step-header {
  margin-bottom: 0.62rem;
}

.ce-flow-step-title-ribbon {
  display: inline;
  align-items: center;
  min-height: 0;
  margin: 0;
  padding: 0;
  border-radius: 0;
  border: 0;
  background: transparent;
  color: #2f7dc7;
  font-size: 0.89rem;
  font-weight: 800;
  letter-spacing: 0.01em;
}

.ce-flow-step-body {
  color: var(--ifm-color-content);
}

.ce-flow-step-body :is(p, li, div) {
  color: inherit;
}

.ce-code-panel {
  box-shadow: 0 10px 30px rgba(2, 18, 52, 0.08);
}

[data-theme='dark'] .ce-code-panel {
  box-shadow: 0 14px 38px rgba(2, 8, 22, 0.42);
}

.ce-code-panel-header {
  background: linear-gradient(90deg, rgba(59, 130, 246, 0.14), rgba(147, 197, 253, 0.08));
}

[data-theme='dark'] .ce-code-panel-header {
  background: linear-gradient(90deg, rgba(37, 99, 235, 0.44), rgba(96, 165, 250, 0.26));
}

.ce-code-panel-ide-strip {
  display: inline-flex;
  align-items: center;
  gap: 0.36rem;
}

.ce-ide-dot {
  width: 10px;
  height: 10px;
  border-radius: 999px;
  border: 1px solid rgba(0, 0, 0, 0.2);
}

.ce-ide-dot-red {
  background: #ff5f57;
}

.ce-ide-dot-yellow {
  background: #ffbd2e;
}

.ce-ide-dot-green {
  background: #28c840;
}

.ce-code-panel-path-package {
  background: rgba(29, 78, 216, 0.11);
  border-color: rgba(37, 99, 235, 0.35);
  color: #1d4ed8;
}

.ce-code-panel-path-file {
  background: rgba(15, 23, 42, 0.08);
  border-color: rgba(30, 41, 59, 0.22);
  color: #0f172a;
}

[data-theme='dark'] .ce-code-panel-path-package {
  background: rgba(96, 165, 250, 0.16);
  border-color: rgba(147, 197, 253, 0.3);
  color: #cbe4ff;
}

[data-theme='dark'] .ce-code-panel-path-file {
  background: rgba(15, 23, 42, 0.85);
  border-color: #253e65;
  color: #dbeafe;
}

.theme-code-block {
  border-radius: 12px;
}

.theme-code-block pre {
  background: #f8fbff;
}

[data-theme='dark'] .theme-code-block pre {
  background: #101a2d;
}

.theme-code-block pre code {
  font-size: 0.84rem;
}

@media (max-width: 996px) {
  .ce-chat-bubble-wrap {
    max-width: 88%;
  }

  .ce-code-panel-header {
    flex-direction: column;
    align-items: flex-start;
  }

  .ce-code-panel-head-right {
    width: 100%;
    justify-content: space-between;
  }
}

/* --- File/Method tags across docs --- */
.ce-file-ref,
.ce-method-ref {
  display: inline-block;
  border-radius: 0;
  padding: 0;
  margin: 0;
  font-family: var(--ifm-font-family-monospace);
  font-size: 0.8em;
  border: 0;
  line-height: 1.35;
}

.markdown :not(pre)>code {
  display: inline-block;
  background: transparent !important;
  border: 0 !important;
  border-radius: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
  color: #7f1d1d !important;
  font-family: var(--ifm-font-family-monospace);
  line-height: 1.35;
}

[data-theme='dark'] .markdown :not(pre)>code {
  color: #93c5fd !important;
}

.ce-file-ref {
  color: #7f1d1d;
  background: transparent;
}

.ce-method-ref {
  color: #7f1d1d;
  background: transparent;
  font-weight: 700;
}

[data-theme='dark'] .ce-file-ref {
  color: #93c5fd;
  background: transparent;
}

[data-theme='dark'] .ce-method-ref {
  color: #93c5fd !important;
  background: transparent;
}

[data-theme='dark'] .markdown :not(pre)>code {
  background: transparent !important;
  border: 0 !important;
}

/* In FlowStep cards, keep technical terms as plain themed text (no chip bubble) */
.ce-flow-step-card :is(.ce-file-ref, .ce-method-ref, code, kbd, samp) {
  background: transparent !important;
  border: 0 !important;
  border-radius: 0 !important;
  padding: 0 !important;
  margin: 0 0.14rem !important;
  box-shadow: none !important;
}

/* Consumer Extensions page typography polish */
.ce-extensions-page {
  font-size: 0.95rem;
}

.ce-extensions-page :is(p, li) {
  font-size: 0.93rem;
  line-height: 1.58;
}

.ce-extensions-page h2 {
  margin-top: 1.9rem;
  margin-bottom: 0.7rem;
  font-size: 1.28rem !important;
  line-height: 1.28;
  letter-spacing: -0.01em;
}

.ce-extensions-page h3 {
  margin-top: 1.45rem;
  margin-bottom: 0.56rem;
  font-size: 1.05rem !important;
  line-height: 1.3;
  letter-spacing: -0.005em;
}

.ce-extensions-page h2:not(:first-of-type) {
  padding-top: 0.25rem;
}

[data-theme='dark'] .ce-extensions-page :is(h2, h3, p, li) {
  color: #e2e8f0 !important;
}

.ce-extensions-page .ce-chip-groups {
  display: grid;
  gap: 0.62rem;
}

.ce-extensions-page .ce-chip-group {
  display: grid;
  gap: 0.34rem;
}

.ce-extensions-page .ce-chip-group-label {
  font-size: 0.78rem;
  font-weight: 800;
  color: #2f7dc7;
  text-transform: uppercase;
  letter-spacing: 0.02em;
}

.ce-extensions-page .ce-chip-list {
  display: grid;
  grid-template-columns: 1fr;
  gap: 0.42rem;
}

.ce-extensions-page .ce-chip-item {
  display: inline-flex;
  align-items: center;
  justify-self: start;
  width: fit-content;
  border-radius: 10px;
  border: 1px solid rgba(30, 64, 175, 0.28);
  background: rgba(219, 234, 254, 0.95);
  padding: 0.24rem 0.62rem;
  max-width: 100%;
  font-weight: 700;
}

.ce-extensions-page .ce-chip-item .ce-file-ref {
  margin: 0 !important;
  padding: 0 !important;
  border: 0 !important;
  background: transparent !important;
  color: #0f172a !important;
  font-weight: 700 !important;
}

.ce-extensions-page .ce-chip-list .ce-chip-item:nth-child(4n + 1) {
  background: rgba(219, 234, 254, 0.95);
  border-color: rgba(37, 99, 235, 0.34);
}

.ce-extensions-page .ce-chip-list .ce-chip-item:nth-child(4n + 2) {
  background: rgba(220, 252, 231, 0.92);
  border-color: rgba(22, 163, 74, 0.35);
}

.ce-extensions-page .ce-chip-list .ce-chip-item:nth-child(4n + 3) {
  background: rgba(254, 243, 199, 0.92);
  border-color: rgba(217, 119, 6, 0.36);
}

.ce-extensions-page .ce-chip-list .ce-chip-item:nth-child(4n + 4) {
  background: rgba(243, 232, 255, 0.92);
  border-color: rgba(147, 51, 234, 0.34);
}

[data-theme='dark'] .ce-extensions-page .ce-chip-group-label {
  color: #93c5fd;
}

[data-theme='dark'] .ce-extensions-page .ce-chip-item {
  border-color: rgba(71, 85, 105, 0.72);
}

[data-theme='dark'] .ce-extensions-page .ce-chip-item .ce-file-ref {
  color: #e2e8f0 !important;
}

[data-theme='dark'] .ce-extensions-page .ce-chip-list .ce-chip-item:nth-child(4n + 1) {
  background: rgba(30, 58, 138, 0.42);
  border-color: rgba(96, 165, 250, 0.44);
}

[data-theme='dark'] .ce-extensions-page .ce-chip-list .ce-chip-item:nth-child(4n + 2) {
  background: rgba(20, 83, 45, 0.42);
  border-color: rgba(74, 222, 128, 0.42);
}

[data-theme='dark'] .ce-extensions-page .ce-chip-list .ce-chip-item:nth-child(4n + 3) {
  background: rgba(120, 53, 15, 0.44);
  border-color: rgba(251, 191, 36, 0.45);
}

[data-theme='dark'] .ce-extensions-page .ce-chip-list .ce-chip-item:nth-child(4n + 4) {
  background: rgba(88, 28, 135, 0.4);
  border-color: rgba(196, 181, 253, 0.45);
}

/* Global technical token color pass */
.theme-doc-markdown :is(.ce-file-ref, .ce-method-ref, code, kbd, samp) {
  color: #7f1d1d;
}

[data-theme='dark'] .theme-doc-markdown :is(.ce-file-ref, .ce-method-ref, code, kbd, samp) {
  color: #93c5fd !important;
}

.theme-doc-markdown .ce-flow-step-card h4,
.theme-doc-markdown .ce-callout-title,
.theme-doc-markdown .ce-table-card-title {
  color: var(--ifm-color-content);
}

[data-theme='dark'] .theme-doc-markdown .ce-flow-step-card h4,
[data-theme='dark'] .theme-doc-markdown .ce-callout-title,
[data-theme='dark'] .theme-doc-markdown .ce-table-card-title {
  color: var(--ifm-color-content) !important;
}

.theme-doc-markdown .ce-flow-step-card,
.theme-doc-markdown .ce-flow-step-card p,
.theme-doc-markdown .ce-flow-step-card li,
.theme-doc-markdown .ce-flow-step-card div {
  color: var(--ifm-color-content);
}

[data-theme='dark'] .theme-doc-markdown .ce-flow-step-card,
[data-theme='dark'] .theme-doc-markdown .ce-flow-step-card p,
[data-theme='dark'] .theme-doc-markdown .ce-flow-step-card li,
[data-theme='dark'] .theme-doc-markdown .ce-flow-step-card div {
  color: var(--ifm-color-content) !important;
}

.theme-doc-markdown .ce-callout-body :is(.ce-file-ref, .ce-method-ref, code, kbd, samp) {
  color: #7f1d1d !important;
}

[data-theme='dark'] .theme-doc-markdown .ce-callout-body :is(.ce-file-ref, .ce-method-ref, code, kbd, samp) {
  color: #93c5fd !important;
}

/* --- Better table visuals --- */
.ce-table-card {
  border: 1px solid var(--ce-border);
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 10px 30px rgba(15, 23, 42, 0.06);
}

[data-theme='dark'] .ce-table-card {
  box-shadow: 0 12px 34px rgba(2, 8, 22, 0.4);
}

.ce-table-card table {
  font-size: 0.92rem;
}

.ce-table-card thead th {
  position: sticky;
  top: 0;
  z-index: 1;
  background: linear-gradient(90deg, rgba(37, 99, 235, 0.14), rgba(191, 219, 254, 0.24));
}

[data-theme='dark'] .ce-table-card thead th {
  background: linear-gradient(90deg, rgba(30, 64, 175, 0.55), rgba(2, 6, 23, 0.65));
}

.ce-table-card tbody tr:nth-child(even) {
  background: rgba(191, 219, 254, 0.12);
}

[data-theme='dark'] .ce-table-card tbody tr:nth-child(even) {
  background: rgba(15, 23, 42, 0.55);
}

.ce-table-card tbody tr:hover {
  background: rgba(59, 130, 246, 0.12);
}

[data-theme='dark'] .ce-table-card tbody tr:hover {
  background: rgba(37, 99, 235, 0.22);
}

/* --- Collapsible method trace --- */
.ce-trace-details {
  border: 1px solid var(--ce-border);
  border-radius: 12px;
  background: var(--ce-surface);
  padding: 0.65rem 0.8rem;
  margin-top: 1rem;
}

.ce-trace-details>summary {
  cursor: pointer;
  font-weight: 700;
  color: var(--ifm-color-primary);
}

.ce-trace-details[open] {
  box-shadow: inset 0 0 0 1px rgba(37, 99, 235, 0.2);
}

/* --- New UI Components (Deep Dive) --- */

/* Chat Bubble Container */
.ce-chat-container {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin: 1.5rem 0;
  padding: 1rem 1.15rem;
  border: 1px solid var(--ce-border);
  border-radius: 16px;
  background: var(--ce-surface);
  max-width: none;
}

.ce-chat-message {
  display: flex;
  align-items: flex-end;
  /* Align avatars to bottom */
  gap: 0.75rem;
  max-width: 85%;
}

.ce-chat-message-user {
  align-self: flex-end;
  flex-direction: row-reverse;
}

.ce-chat-message-assistant {
  align-self: flex-start;
}

.ce-chat-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: grid;
  place-items: center;
  flex-shrink: 0;
  background: var(--ce-surface-2);
  border: 1px solid var(--ce-border);
  color: var(--ifm-color-primary);
}

.ce-chat-message-user .ce-chat-avatar {
  background: #2563eb;
  color: #ffffff;
  border: none;
}

.ce-chat-bubble-content {
  padding: 0.75rem 1rem;
  border-radius: 18px;
  font-size: 0.95rem;
  line-height: 1.5;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.ce-chat-message-user .ce-chat-bubble-content {
  background: linear-gradient(135deg, #3b82f6, #2563eb);
  color: #ffffff;
  border-bottom-right-radius: 4px;
}

.ce-chat-message-assistant .ce-chat-bubble-content {
  background: var(--ce-surface-2);
  color: var(--ifm-color-content);
  border: 1px solid var(--ce-border);
  border-bottom-left-radius: 4px;
}

/* Code Window (IntelliJ Style) */
.ce-code-window {
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
  margin: 1.5rem 0;
  border: 1px solid var(--ce-border);
  background: #1e1e1e;
  /* IntelliJ Dark Background */
}

.ce-code-window-header {
  background: #2b2d30;
  /* IntelliJ Header Grey */
  padding: 0.6rem 1rem;
  display: flex;
  align-items: center;
  border-bottom: 1px solid #1e1e1e;
}

.ce-window-controls {
  display: flex;
  gap: 0.4rem;
  margin-right: 1rem;
}

.ce-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
}

.ce-dot-red {
  background: #ff5f56;
}

.ce-dot-yellow {
  background: #ffbd2e;
}

.ce-dot-green {
  background: #27c93f;
}

.ce-window-title {
  flex-grow: 1;
  text-align: center;
  font-family: var(--ifm-font-family-monospace);
  font-size: 0.8rem;
  color: #a9b7c6;
}

.ce-window-toggle {
  background: transparent;
  border: 1px solid #555;
  color: #a9b7c6;
  border-radius: 4px;
  padding: 2px 8px;
  font-size: 0.75rem;
  cursor: pointer;
  margin-left: 1rem;
  transition: all 0.2s;
}

.ce-window-toggle:hover {
  background: #444;
  border-color: #777;
  color: #fff;
}

.ce-code-window-body {
  padding: 0;
}

.ce-code-window-body pre {
  margin: 0;
  border: none;
  border-radius: 0;
  background: #1e1e1e !important;
  /* Force dark background */
}

.ce-code-window-body code {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.85rem;
  color: #a9b7c6;
  /* Light grey text for code */
}

/* --- TOC Toggle Logic --- */
.ce-toc-container {
  display: none;
}

.ce-main-column {
  /* Default full width when TOC is hidden */
  max-width: 100% !important;
  flex: 0 0 100% !important;
}

html.ce-show-toc .ce-toc-container {
  display: block;
}

@media (min-width: 997px) {
  html.ce-show-toc .ce-main-column {
    /* Mimic .col--9 or 75% width when TOC is shown */
    max-width: 75% !important;
    flex: 0 0 75% !important;
  }
}

/* --- Engine Debug Flow --- */
.ce-debug-flow-shell {
  border: 1px solid var(--ce-border);
  border-radius: 16px;
  overflow: hidden;
  background: var(--ce-surface);
  margin: 1rem 0 1.5rem;
}

.ce-debug-flow-head {
  padding: 0.9rem 1rem;
  border-bottom: 1px solid var(--ce-border);
  background: linear-gradient(90deg, rgba(59, 130, 246, 0.14), rgba(147, 197, 253, 0.08));
}

.ce-debug-flow-head h3 {
  margin: 0;
  font-size: 1rem;
}

.ce-debug-flow-head p {
  margin: 0.35rem 0 0;
  color: var(--ce-text-soft);
  font-size: 0.84rem;
}

.ce-debug-flow-grid {
  display: grid;
  grid-template-columns: 240px minmax(460px, 1fr) 360px;
  min-height: 560px;
}

.ce-debug-tree-panel,
.ce-debug-detail-panel {
  border-right: 1px solid var(--ce-border);
  background: var(--ce-surface-2);
}

.ce-debug-detail-panel {
  border-right: 0;
  border-left: 1px solid var(--ce-border);
}

.ce-debug-tree-title,
.ce-debug-detail-title {
  font-weight: 800;
  font-size: 0.84rem;
  letter-spacing: 0.02em;
  padding: 0.8rem 0.9rem;
  border-bottom: 1px solid var(--ce-border);
  text-transform: uppercase;
  color: var(--ce-text-soft);
}

.ce-debug-tree-list {
  display: flex;
  flex-direction: column;
  padding: 0.55rem;
  gap: 0.5rem;
}

.ce-debug-step-item {
  display: flex;
  align-items: center;
  gap: 0.55rem;
  text-align: left;
  border: 1px solid var(--ce-border);
  background: var(--ce-surface);
  color: var(--ifm-color-content);
  padding: 0.48rem 0.62rem;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.18s ease;
  width: 100%;
  min-width: 0;
}

.ce-debug-step-item:hover {
  border-color: rgba(37, 99, 235, 0.55);
  background: rgba(37, 99, 235, 0.08);
  transform: translateY(-1px);
}

.ce-debug-step-item-active {
  border-color: rgba(37, 99, 235, 0.75);
  background: linear-gradient(90deg, rgba(37, 99, 235, 0.22), rgba(191, 219, 254, 0.1));
  box-shadow: 0 8px 18px rgba(37, 99, 235, 0.22);
}

.ce-debug-step-badge {
  width: 24px;
  height: 24px;
  min-width: 24px;
  border-radius: 999px;
  border: 1px solid rgba(37, 99, 235, 0.55);
  background: #eff6ff;
  color: #1e40af;
  display: grid;
  place-items: center;
  font-size: 0.74rem;
  font-weight: 800;
}

.ce-debug-step-item-active .ce-debug-step-badge {
  background: #2563eb;
  color: #fff;
  border-color: #1d4ed8;
}

.ce-debug-step-label {
  font-size: 0.8rem;
  line-height: 1.25;
  font-weight: 700;
  min-width: 0;
  overflow-wrap: anywhere;
  word-break: break-word;
}

.ce-debug-canvas-panel {
  min-height: 560px;
  background:
    radial-gradient(700px 280px at 50% -5%, rgba(47, 125, 199, 0.08), transparent 55%),
    linear-gradient(180deg, rgba(255, 255, 255, 0.64), rgba(255, 255, 255, 0.2));
}

.ce-debug-detail-panel {
  padding: 0 0.65rem 0.7rem;
}

.ce-debug-detail-card {
  margin: 0.7rem 0.1rem 0;
  border: 1px solid var(--ce-border);
  border-radius: 14px;
  padding: 0.75rem 0.78rem;
  background: var(--ce-surface);
  box-shadow: 0 10px 22px rgba(15, 23, 42, 0.08);
}

.ce-debug-detail-hero {
  background: linear-gradient(145deg, rgba(37, 99, 235, 0.1), rgba(147, 197, 253, 0.08));
}

.ce-debug-detail-panel h4 {
  margin: 0;
  font-size: 1rem;
}

.ce-debug-detail-panel p {
  margin: 0.45rem 0 0;
  font-size: 0.87rem;
}

.ce-debug-stage-pill {
  margin-top: 0.5rem;
  width: fit-content;
  border: 1px solid rgba(37, 99, 235, 0.55);
  border-radius: 999px;
  background: rgba(37, 99, 235, 0.12);
  color: #1d4ed8;
  font-size: 0.7rem;
  font-weight: 800;
  letter-spacing: 0.01em;
  padding: 0.22rem 0.52rem;
}

.ce-debug-kv {
  display: flex;
  flex-direction: column;
  gap: 0.22rem;
  margin-bottom: 0.62rem;
}

.ce-debug-kv:last-child {
  margin-bottom: 0;
}

.ce-debug-kv span {
  font-size: 0.73rem;
  font-weight: 700;
  color: var(--ce-text-soft);
  text-transform: uppercase;
  letter-spacing: 0.02em;
}

.ce-debug-kv code {
  font-size: 0.78rem;
  color: var(--ifm-color-content);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.ce-debug-path-code,
.ce-debug-method-code {
  display: block;
  width: 100%;
  max-width: 100%;
}

.ce-debug-chip-list {
  margin: 0.2rem 0 0;
  padding: 0;
  list-style: none;
  display: grid;
  grid-template-columns: 1fr;
  gap: 0.48rem;
}

.ce-debug-detail-chip {
  margin: 0 0.9rem 0.45rem;
  border: 1px solid var(--ce-border);
  border-radius: 999px;
  font-size: 0.72rem;
  padding: 0.18rem 0.5rem;
  width: fit-content;
  color: var(--ce-text-soft);
  background: var(--ce-surface);
}

.ce-debug-detail-subtitle {
  margin: 0;
  font-size: 0.78rem;
  font-weight: 700;
  color: var(--ce-text-soft);
  text-transform: uppercase;
}

.ce-debug-chip {
  border: 1px solid var(--ce-border);
  border-radius: 12px;
  padding: 0.34rem 0.58rem;
  font-size: 0.76rem;
  background: var(--ce-surface-2);
  width: 100%;
  min-height: 34px;
  display: flex;
  align-items: center;
  overflow-wrap: anywhere;
  word-break: break-word;
}

.ce-debug-chip-db {
  border-color: rgba(22, 163, 74, 0.45);
  background: rgba(22, 163, 74, 0.1);
}

.ce-rf-node-wrap,
.ce-rf-node-wrap-active {
  border-radius: 14px;
}

.ce-rf-node {
  border: 1px solid var(--ce-border);
  border-radius: 14px;
  background: linear-gradient(180deg, var(--ce-surface), var(--ce-surface-2));
  color: var(--ifm-color-content);
  box-shadow: 0 10px 24px rgba(15, 23, 42, 0.1);
  width: 100%;
  overflow: hidden;
}

.ce-rf-node-head {
  display: flex;
  align-items: center;
  gap: 0.52rem;
  padding: 0.52rem 0.62rem;
  border-bottom: 1px solid var(--ce-border);
  background: linear-gradient(90deg, rgba(47, 125, 199, 0.16), rgba(191, 219, 254, 0.14));
}

.ce-rf-node-badge {
  width: 1.28rem;
  height: 1.28rem;
  border-radius: 999px;
  display: inline-grid;
  place-items: center;
  font-size: 0.68rem;
  font-weight: 800;
  color: #fff;
  background: #2f7dc7;
}

.ce-rf-node-title {
  font-size: 0.78rem;
  font-weight: 800;
  line-height: 1.2;
}

.ce-rf-node-stage {
  margin: 0.5rem 0.62rem 0.56rem;
  width: fit-content;
  border: 1px solid rgba(47, 125, 199, 0.45);
  border-radius: 999px;
  background: rgba(47, 125, 199, 0.14);
  color: #1e40af;
  font-size: 0.64rem;
  font-weight: 800;
  padding: 0.14rem 0.48rem;
  letter-spacing: 0.01em;
}

.ce-rf-handle {
  width: 8px !important;
  height: 8px !important;
  border: 1px solid #2f7dc7 !important;
  background: #dbeafe !important;
}

.ce-rf-node-active {
  border-color: rgba(47, 125, 199, 0.78);
  box-shadow: 0 12px 28px rgba(47, 125, 199, 0.26);
}

.ce-debug-canvas-panel .react-flow__edge-path {
  stroke: #2f7dc7;
  stroke-width: 2.2;
}

.ce-debug-canvas-panel .react-flow__edge-textbg {
  fill: rgba(37, 99, 235, 0.22);
  stroke: #60a5fa;
}

.ce-debug-canvas-panel .react-flow__edge-text {
  fill: #ffffff;
  font-weight: 800;
}

[data-theme='dark'] .ce-debug-canvas-panel {
  background:
    radial-gradient(720px 320px at 50% -8%, rgba(199, 21, 133, 0.1), transparent 58%),
    linear-gradient(180deg, rgba(15, 23, 42, 0.84), rgba(15, 23, 42, 0.45));
}

[data-theme='dark'] .ce-rf-node {
  background: linear-gradient(180deg, #0f172a, #111c32);
  border-color: #334155;
  box-shadow: 0 12px 28px rgba(2, 8, 22, 0.52);
}

[data-theme='dark'] .ce-rf-node-head {
  border-bottom-color: #334155;
  background: linear-gradient(90deg, rgba(199, 21, 133, 0.34), rgba(59, 130, 246, 0.24));
}

[data-theme='dark'] .ce-rf-node-badge {
  background: #c71585;
}

[data-theme='dark'] .ce-rf-node-stage {
  border-color: rgba(199, 21, 133, 0.58);
  background: rgba(199, 21, 133, 0.2);
  color: #f9a8d4;
}

[data-theme='dark'] .ce-rf-handle {
  border-color: #c71585 !important;
  background: #1f2937 !important;
}

[data-theme='dark'] .ce-rf-node-active {
  border-color: rgba(199, 21, 133, 0.7);
  box-shadow: 0 14px 30px rgba(199, 21, 133, 0.24);
}

[data-theme='dark'] .ce-debug-canvas-panel .react-flow__edge-path {
  stroke: #c71585;
}

[data-theme='dark'] .ce-debug-canvas-panel .react-flow__edge-textbg {
  fill: rgba(37, 99, 235, 0.22);
  stroke: #60a5fa;
}

[data-theme='dark'] .ce-debug-canvas-panel .react-flow__edge-text {
  fill: #ffffff;
}

[data-theme='dark'] .ce-debug-flow-head {
  background: linear-gradient(90deg, rgba(37, 99, 235, 0.5), rgba(96, 165, 250, 0.3));
}

[data-theme='dark'] .ce-debug-step-item {
  background: #0f172a;
  border-color: #334155;
}

[data-theme='dark'] .ce-debug-step-item:hover {
  background: rgba(37, 99, 235, 0.22);
  border-color: #3b82f6;
}

[data-theme='dark'] .ce-debug-step-item-active {
  background: rgba(37, 99, 235, 0.28);
  border-color: #60a5fa;
}

[data-theme='dark'] .ce-debug-step-badge {
  background: #1e293b;
  color: #bfdbfe;
  border-color: #3b82f6;
}

[data-theme='dark'] .ce-debug-step-item-active .ce-debug-step-badge {
  background: #2563eb;
  color: #ffffff;
}

[data-theme='dark'] .ce-debug-detail-card {
  background: #0f172a;
  border-color: #334155;
  box-shadow: 0 12px 24px rgba(2, 8, 22, 0.45);
}

[data-theme='dark'] .ce-debug-stage-pill {
  color: #dbeafe;
  border-color: #60a5fa;
  background: rgba(59, 130, 246, 0.28);
}

[data-theme='dark'] .ce-debug-chip {
  border-color: #334155;
  background: #1e293b;
  color: #e2e8f0;
}

[data-theme='dark'] .ce-debug-chip-db {
  border-color: rgba(34, 197, 94, 0.5);
  background: rgba(22, 163, 74, 0.22);
}

/* --- Floating section hamburger (DocItem layout) --- */
.ce-sections-wrap {
  position: sticky;
  top: 72px;
  z-index: 45;
  width: fit-content;
  margin-left: auto;
  margin-bottom: 0.6rem;
}

.ce-sections-fab {
  position: relative;
  top: 0;
  right: auto;
  z-index: 40;
  margin: 0;
  display: inline-flex;
  align-items: center;
  gap: 0.45rem;
  border: 1px solid var(--ce-border);
  border-radius: 999px;
  background: var(--ce-surface);
  color: var(--ifm-color-content);
  padding: 0.34rem 0.72rem;
  font-size: 0.8rem;
  font-weight: 700;
  box-shadow: 0 10px 26px rgba(15, 23, 42, 0.12);
}

.ce-sections-fab-icon {
  font-size: 0.88rem;
  line-height: 1;
}

.ce-sections-fab-secondary {
  margin-left: 0.45rem;
}

.ce-toc-fab {
  position: fixed;
  right: 18px;
  bottom: 20px;
  z-index: 80;
  display: inline-flex;
  align-items: center;
  gap: 0.45rem;
  border: 1px solid var(--ce-border);
  border-radius: 999px;
  background: var(--ce-surface);
  color: var(--ifm-color-content);
  padding: 0.42rem 0.84rem;
  font-size: 0.82rem;
  font-weight: 700;
  box-shadow: 0 12px 30px rgba(15, 23, 42, 0.18);
}

.ce-toc-toggle-btn {
  position: fixed;
  right: 18px;
  bottom: 20px;
  z-index: 1200;
  display: inline-flex;
  align-items: center;
  gap: 0.45rem;
  border: 1px solid var(--ce-border);
  border-radius: 999px;
  background: var(--ce-surface);
  color: var(--ifm-color-content);
  padding: 0.46rem 0.86rem;
  font-size: 0.82rem;
  font-weight: 700;
  box-shadow: 0 12px 30px rgba(15, 23, 42, 0.2);
}

.ce-toc-toggle-icon {
  font-size: 0.9rem;
  line-height: 1;
}

.ce-toc-toggle-label {
  line-height: 1;
}

.ce-navbar-toc-btn {
  margin-right: 0.35rem;
  width: 34px;
  height: 34px;
  border-radius: 999px;
  border: 1px solid var(--ce-border);
  background: var(--ce-surface);
  color: var(--ifm-color-content);
  display: inline-grid;
  place-items: center;
  box-shadow: 0 6px 16px rgba(15, 23, 42, 0.14);
}

.ce-navbar-toc-btn:hover {
  border-color: rgba(37, 99, 235, 0.6);
  background: rgba(37, 99, 235, 0.08);
}

.ce-navbar-toc-btn-active {
  border-color: rgba(37, 99, 235, 0.72);
  background: rgba(37, 99, 235, 0.16);
  color: #1d4ed8;
}

.ce-navbar-toc-btn-icon {
  font-size: 0.95rem;
  line-height: 1;
}

@media (max-width: 996px) {
  .ce-sections-wrap {
    top: 66px;
    margin-bottom: 0.45rem;
  }

  .ce-sections-fab {
    font-size: 0.76rem;
    padding: 0.34rem 0.66rem;
  }

  .ce-sections-drawer {
    top: calc(100% + 8px);
    right: 0;
    width: min(360px, calc(100vw - 18px));
    z-index: 1100;
  }

  .ce-sections-fab-secondary {
    display: none;
  }

  .ce-toc-fab {
    right: 12px;
    bottom: 14px;
    font-size: 0.76rem;
    padding: 0.36rem 0.7rem;
  }

  .ce-toc-toggle-btn {
    right: 12px;
    bottom: 14px;
    font-size: 0.76rem;
    padding: 0.38rem 0.72rem;
    z-index: 1200;
  }
}

.ce-sections-drawer {
  position: absolute;
  top: calc(100% + 8px);
  right: 0;
  margin: 0;
  width: min(390px, calc(100vw - 24px));
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  pointer-events: none;
  transform: translateY(-8px) scale(0.97);
  filter: blur(2px);
  will-change: opacity, transform, filter, max-height;
  transition:
    opacity 0.55s cubic-bezier(0.22, 0.61, 0.36, 1),
    transform 0.55s cubic-bezier(0.22, 0.61, 0.36, 1),
    filter 0.55s cubic-bezier(0.22, 0.61, 0.36, 1),
    max-height 0.55s cubic-bezier(0.22, 0.61, 0.36, 1);
  border: 1px solid var(--ce-border);
  border-radius: 14px;
  background: var(--ce-surface);
  box-shadow: 0 14px 34px rgba(15, 23, 42, 0.14);
}

.ce-sections-drawer-open {
  max-height: 56vh;
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0) scale(1);
  filter: blur(0);
}

.ce-sections-drawer-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.6rem;
  padding: 0.62rem 0.75rem;
  border-bottom: 1px solid var(--ce-border);
  background: linear-gradient(90deg, rgba(37, 99, 235, 0.12), rgba(147, 197, 253, 0.05));
}

.ce-sections-drawer-head button {
  border: 1px solid var(--ce-border);
  border-radius: 10px;
  background: var(--ce-surface);
  color: var(--ifm-color-content);
  width: 28px;
  height: 28px;
  line-height: 1;
}

.ce-sections-drawer-body {
  overflow: auto;
  max-height: calc(56vh - 48px);
  padding: 0.42rem;
  display: flex;
  flex-direction: column;
  gap: 0.36rem;
}

.ce-sections-link {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  border: 1px solid var(--ce-border);
  border-radius: 10px;
  padding: 0.42rem 0.55rem;
  color: var(--ifm-color-content);
  text-decoration: none;
  font-size: 0.82rem;
}

.ce-sections-link code {
  color: #7f1d4e !important;
  background: rgba(199, 21, 133, 0.12) !important;
  border: 1px solid rgba(199, 21, 133, 0.45) !important;
  border-radius: 8px;
  padding: 0.08rem 0.34rem;
  font-size: 0.75rem;
  font-weight: 700;
}

.ce-sections-link:hover {
  border-color: rgba(37, 99, 235, 0.62);
  background: rgba(37, 99, 235, 0.09);
  text-decoration: none;
}

.ce-sections-link-active {
  border-color: rgba(37, 99, 235, 0.72);
  background: rgba(37, 99, 235, 0.16);
}

.ce-jump-target-flash {
  border-radius: 10px;
  padding: 0.22rem 0.46rem;
  animation: ceJumpTargetFlash 3s ease-out 1;
}

@keyframes ceJumpTargetFlash {
  0% {
    background: rgba(134, 239, 172, 0.42);
    box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.28);
  }
  100% {
    background: transparent;
    box-shadow: none;
  }
}

.ce-sections-link-index {
  width: 20px;
  height: 20px;
  min-width: 20px;
  border-radius: 999px;
  border: 1px solid rgba(37, 99, 235, 0.45);
  background: #eff6ff;
  color: #1e40af;
  display: grid;
  place-items: center;
  padding: 0;
  font-size: 0.68rem;
  font-weight: 800;
  line-height: 1;
}

.ce-sections-link-index-nested {
  width: auto;
  min-width: 28px;
  padding: 0 0.48rem;
}

[data-theme='dark'] .ce-sections-fab,
[data-theme='dark'] .ce-sections-drawer {
  background: #0f172a;
  border-color: #334155;
}

[data-theme='dark'] .ce-toc-fab {
  background: #0f172a;
  border-color: #334155;
  color: #e2e8f0;
}

[data-theme='dark'] .ce-toc-toggle-btn {
  background: #0f172a;
  border-color: #334155;
  color: #e2e8f0;
}

[data-theme='dark'] .ce-navbar-toc-btn {
  background: #0f172a;
  border-color: #334155;
  color: #e2e8f0;
}

[data-theme='dark'] .ce-navbar-toc-btn:hover {
  border-color: #60a5fa;
  background: rgba(37, 99, 235, 0.24);
}

[data-theme='dark'] .ce-navbar-toc-btn-active {
  border-color: #60a5fa;
  background: rgba(37, 99, 235, 0.3);
  color: #bfdbfe;
}

[data-theme='dark'] .ce-sections-drawer-head {
  background: linear-gradient(90deg, rgba(37, 99, 235, 0.45), rgba(96, 165, 250, 0.24));
}

[data-theme='dark'] .ce-sections-drawer-head,
[data-theme='dark'] .ce-sections-drawer-head strong,
[data-theme='dark'] .ce-sections-drawer-head span {
  color: #e2e8f0 !important;
}

[data-theme='dark'] :is(.ce-debug-flow-head, .ce-code-panel-header, .ce-rf-node-head, .ce-popup-head, .ce-table-card-title, .ce-flow-step-header, .ce-code-window-header) {
  color: #e2e8f0 !important;
}

[data-theme='dark'] :is(.ce-debug-flow-head, .ce-code-panel-header, .ce-rf-node-head, .ce-popup-head, .ce-table-card-title, .ce-flow-step-header, .ce-code-window-header) :is(h1, h2, h3, h4, h5, h6, strong, span, p, small) {
  color: #e2e8f0 !important;
}

[data-theme='dark'] .ce-sections-link {
  border-color: #334155;
  color: #e2e8f0;
  background: #0f172a;
}

[data-theme='dark'] .ce-sections-link code {
  color: #93c5fd !important;
  background: rgba(47, 125, 199, 0.25) !important;
  border-color: rgba(96, 165, 250, 0.58) !important;
}

[data-theme='dark'] .ce-sections-link:hover {
  border-color: #60a5fa;
  background: rgba(37, 99, 235, 0.24);
}

[data-theme='dark'] .ce-sections-link-active {
  border-color: #60a5fa;
  background: rgba(37, 99, 235, 0.34);
}

[data-theme='dark'] .ce-jump-target-flash {
  animation-name: ceJumpTargetFlashDark;
}

@keyframes ceJumpTargetFlashDark {
  0% {
    background: rgba(20, 83, 45, 0.5);
    box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.24);
  }
  100% {
    background: transparent;
    box-shadow: none;
  }
}

[data-theme='dark'] .ce-sections-link-index {
  background: #1e293b;
  color: #bfdbfe;
  border-color: #3b82f6;
}

/* --- Apple-like docs revamp (global polish) --- */
:root {
  --ce-apple-bg: #f6f8fb;
  --ce-apple-surface: #ffffff;
  --ce-apple-surface-2: #f8fafd;
  --ce-apple-border: #d9e2ef;
  --ce-apple-border-strong: #c2d0e2;
  --ce-apple-text: #0f172a;
  --ce-apple-muted: #475569;
  --ce-apple-blue: #0a66ff;
  --ce-apple-blue-soft: #eaf2ff;
}

[data-theme='dark'] {
  --ce-apple-bg: #020617;
  --ce-apple-surface: #0b1220;
  --ce-apple-surface-2: #0f172a;
  --ce-apple-border: #27354a;
  --ce-apple-border-strong: #37506e;
  --ce-apple-text: #e7edf7;
  --ce-apple-muted: #a2b2c8;
  --ce-apple-blue: #60a5fa;
  --ce-apple-blue-soft: #11233f;
}

body.docs-doc-page {
  background: radial-gradient(1200px 600px at 100% -10%, rgba(10, 102, 255, 0.06), transparent 52%),
    radial-gradient(900px 500px at -10% 8%, rgba(2, 132, 199, 0.05), transparent 50%),
    var(--ce-apple-bg);
}

.docs-doc-page .theme-doc-markdown {
  color: var(--ce-apple-text);
}

.docs-doc-page .theme-doc-markdown h1,
.docs-doc-page .theme-doc-markdown h2,
.docs-doc-page .theme-doc-markdown h3,
.docs-doc-page .theme-doc-markdown h4 {
  letter-spacing: -0.02em;
  font-weight: 740;
}

.docs-doc-page .theme-doc-markdown p,
.docs-doc-page .theme-doc-markdown li {
  color: var(--ce-apple-muted);
  line-height: 1.66;
}

.docs-doc-page .theme-doc-markdown h1+p {
  color: var(--ce-apple-muted);
  font-size: 1.06rem;
}

.docs-doc-page .theme-doc-markdown section,
.docs-doc-page .theme-doc-markdown .ce-callout,
.docs-doc-page .theme-doc-markdown .ce-flow-step-card,
.docs-doc-page .theme-doc-markdown .ce-decision-card,
.docs-doc-page .theme-doc-markdown .ce-schema-card {
  border-color: var(--ce-apple-border);
}

/* Apple-style table cards */
.ce-table-card {
  border: 1px solid var(--ce-apple-border-strong);
  background: var(--ce-apple-surface);
  border-radius: 18px;
  overflow: hidden;
  box-shadow: 0 18px 42px rgba(15, 23, 42, 0.08);
}

.ce-table-card-title {
  background: linear-gradient(180deg, var(--ce-apple-surface), var(--ce-apple-surface-2));
  border-bottom: 1px solid var(--ce-apple-border);
  color: var(--ce-apple-text);
  font-size: 0.94rem;
  font-weight: 760;
  letter-spacing: -0.01em;
  padding: 0.86rem 1rem;
}

.ce-table-wrap {
  background: var(--ce-apple-surface);
}

.ce-table-card table {
  border-collapse: separate;
  border-spacing: 0;
  width: 100%;
}

.ce-table-card thead th {
  position: sticky;
  top: 0;
  z-index: 2;
  background: linear-gradient(180deg, var(--ce-apple-blue-soft), var(--ce-apple-surface-2));
  color: var(--ce-apple-text);
  font-size: 0.76rem;
  font-weight: 760;
  letter-spacing: 0.01em;
  text-transform: uppercase;
  border-bottom: 1px solid var(--ce-apple-border);
}

.ce-table-card th,
.ce-table-card td {
  padding: 0.72rem 0.92rem;
  border-bottom: 1px solid var(--ce-apple-border);
  vertical-align: top;
}

.ce-table-card tbody td {
  color: var(--ce-apple-text);
  font-size: 0.86rem;
}

.ce-table-cell-content {
  display: inline-block;
}

.ce-table-card tbody td:first-child {
  font-weight: 700;
  color: var(--ce-apple-text);
}

.ce-table-card tbody tr:nth-child(odd) {
  background: color-mix(in srgb, var(--ce-apple-surface) 95%, var(--ce-apple-blue-soft));
}

.ce-table-card tbody tr:nth-child(even) {
  background: var(--ce-apple-surface);
}

.ce-table-card tbody tr:hover {
  background: color-mix(in srgb, var(--ce-apple-blue-soft) 70%, var(--ce-apple-surface));
}

.ce-table-note {
  padding: 0.66rem 0.92rem;
  color: var(--ce-apple-muted);
  font-size: 0.8rem;
  border-top: 1px solid var(--ce-apple-border);
  background: var(--ce-apple-surface-2);
}

/* Standard markdown tables also get upgraded */
.theme-doc-markdown table {
  border: 1px solid var(--ce-apple-border);
  border-radius: 14px;
  overflow: hidden;
}

.theme-doc-markdown table thead tr {
  background: var(--ce-apple-blue-soft);
}

.theme-doc-markdown table th {
  color: var(--ce-apple-text);
  font-size: 0.76rem;
  text-transform: uppercase;
  letter-spacing: 0.02em;
}

.theme-doc-markdown table td {
  color: var(--ce-apple-text);
}

/* Ce-IDE panel visual polish */
.ce-code-panel {
  border: 1px solid var(--ce-apple-border-strong);
  border-radius: 16px;
  background: var(--ce-apple-surface);
  box-shadow: 0 14px 36px rgba(15, 23, 42, 0.08);
}

.ce-code-panel-header {
  background: linear-gradient(180deg, color-mix(in srgb, var(--ce-apple-blue-soft) 80%, var(--ce-apple-surface)), var(--ce-apple-surface));
}

.ce-code-panel-title {
  color: var(--ce-apple-text);
  letter-spacing: -0.01em;
}

.ce-code-panel-path {
  border-color: var(--ce-apple-border);
}

.ce-code-panel .theme-code-block pre {
  border-radius: 10px;
}

/* Dark-mode contrast tune for table text */
[data-theme='dark'] .ce-table-card,
[data-theme='dark'] .ce-table-card * {
  color: var(--ce-apple-text);
}

[data-theme='dark'] .ce-table-card tbody tr:hover {
  background: #1a2a45;
}

/* YAML property reference table style (maroon key tags + green value bubbles) */
.ce-config-ref-table tbody td:nth-child(1) .ce-table-cell-content,
.ce-config-ref-table thead th:nth-child(1) .ce-table-cell-content {
  font-family: var(--ifm-font-family-monospace);
  color: #7f1d1d;
  background: rgba(127, 29, 29, 0.08);
  border: 1px solid rgba(127, 29, 29, 0.24);
  border-radius: 999px;
  padding: 0.18rem 0.52rem;
  line-height: 1.2;
}

[data-theme='dark'] .ce-config-ref-table tbody td:nth-child(1) .ce-table-cell-content,
[data-theme='dark'] .ce-config-ref-table thead th:nth-child(1) .ce-table-cell-content {
  color: #fecdd3;
  background: rgba(127, 29, 29, 0.25);
  border-color: rgba(251, 113, 133, 0.4);
}

.ce-config-ref-table tbody td:nth-child(3) .ce-table-cell-content,
.ce-config-ref-table thead th:nth-child(3) .ce-table-cell-content {
  font-family: var(--ifm-font-family-monospace);
  color: #14532d;
  background: rgba(34, 197, 94, 0.13);
  border: 1px solid rgba(22, 163, 74, 0.35);
  border-radius: 999px;
  padding: 0.18rem 0.52rem;
  line-height: 1.2;
}

[data-theme='dark'] .ce-config-ref-table tbody td:nth-child(3) .ce-table-cell-content,
[data-theme='dark'] .ce-config-ref-table thead th:nth-child(3) .ce-table-cell-content {
  color: #bbf7d0;
  background: rgba(22, 163, 74, 0.26);
  border-color: rgba(34, 197, 94, 0.5);
}

.ce-debug-canvas-panel .react-flow__attribution {
  display: none;
}

.ce-debug-canvas-panel .react-flow__controls {
  border: 1px solid var(--ce-border);
  box-shadow: none;
}

.ce-debug-canvas-panel .react-flow__controls-button {
  background: var(--ce-surface);
  border-bottom: 1px solid var(--ce-border);
  color: var(--ifm-color-content);
}

.ce-debug-canvas-panel .react-flow__minimap {
  background: var(--ce-surface);
  border: 1px solid var(--ce-border);
}

@media (max-width: 1200px) {
  .ce-debug-flow-grid {
    grid-template-columns: 1fr;
  }

  .ce-debug-tree-panel,
  .ce-debug-detail-panel {
    border-right: 0;
    border-left: 0;
    border-top: 1px solid var(--ce-border);
  }

  .ce-debug-canvas-panel {
    min-height: 460px;
  }
}

/* --- Final contrast overrides (dark mode reliability) --- */
.ce-table-card,
.ce-table-card-title,
.ce-table-card table,
.ce-table-card th,
.ce-table-card td,
.ce-table-note {
  color: var(--ifm-color-content);
}

.ce-table-card {
  background: var(--ce-surface);
}

.ce-table-card th {
  color: var(--ifm-color-content);
}

[data-theme='dark'] .ce-table-card {
  background: #0f172a;
  border-color: #334155;
}

[data-theme='dark'] .ce-table-card-title {
  background: #13213a;
  border-bottom-color: #334155;
  color: #e2e8f0;
}

[data-theme='dark'] .ce-table-card th,
[data-theme='dark'] .ce-table-card td,
[data-theme='dark'] .ce-table-note {
  color: #e2e8f0;
  border-bottom-color: #334155;
}

[data-theme='dark'] .ce-table-card tbody tr {
  background: #0f172a;
}

[data-theme='dark'] .ce-table-card tbody tr:nth-child(even) {
  background: #12203a;
}

[data-theme='dark'] .ce-table-card tbody tr:hover {
  background: #1d355f;
}

/* --- Global dark-mode header/title brightness pass (final override) --- */
[data-theme='dark'] :is(
  .ce-chat-shell-title,
  .ce-code-panel-header,
  .ce-table-card-title,
  .ce-debug-flow-head,
  .ce-rf-node-head,
  .ce-popup-head,
  .ce-sections-drawer-head,
  .ce-code-window-header
) {
  color: #eaf2ff !important;
  background: linear-gradient(90deg, rgba(37, 99, 235, 0.48), rgba(96, 165, 250, 0.3)) !important;
}

[data-theme='dark'] :is(
  .ce-chat-shell-title,
  .ce-code-panel-header,
  .ce-table-card-title,
  .ce-debug-flow-head,
  .ce-rf-node-head,
  .ce-popup-head,
  .ce-sections-drawer-head,
  .ce-code-window-header
) :is(h1, h2, h3, h4, h5, h6, p, span, strong, small) {
  color: #eaf2ff !important;
}

[data-theme='dark'] .ce-table-card thead th {
  background: linear-gradient(90deg, rgba(30, 64, 175, 0.55), rgba(2, 6, 23, 0.65)) !important;
  color: #e2e8f0 !important;
}

/* --- Final table system (global) --- */
.ce-table-card {
  overflow: hidden;
  width: 100%;
}

.ce-table-wrap {
  display: block;
  width: 100%;
  overflow-x: auto;
  overflow-y: hidden;
  border-radius: 0 !important;
}

.ce-table-card table,
.ce-table-card thead,
.ce-table-card tbody,
.ce-table-card tr,
.ce-table-card th,
.ce-table-card td {
  border-radius: 0 !important;
}

.ce-table-card table {
  border: 0 !important;
  width: 100% !important;
  min-width: 100% !important;
  table-layout: fixed;
}

.ce-table-card th,
.ce-table-card td {
  width: auto;
  box-sizing: border-box;
}

.ce-table-card thead th {
  background: color-mix(in srgb, var(--ce-apple-blue-soft) 84%, var(--ce-apple-surface)) !important;
}

.ce-table-card thead .ce-table-cell-content {
  background: transparent !important;
  border: 0 !important;
  border-radius: 0 !important;
  padding: 0 !important;
  color: var(--ce-apple-text) !important;
  font-family: var(--ifm-font-family-monospace);
  font-size: 0.74rem;
  letter-spacing: 0.02em;
  text-transform: uppercase;
}

.ce-table-card tbody .ce-table-cell-body {
  display: inline-block;
  border: 1px solid transparent;
  border-radius: 12px;
  padding: 0.42rem 0.82rem 0.46rem;
  line-height: 1.4;
  min-height: 2rem;
  margin: 0.08rem 0;
  white-space: normal;
  max-width: 100%;
  word-break: break-word;
}

.ce-table-card tbody td:nth-child(1) .ce-table-cell-body {
  background: rgba(127, 29, 29, 0.08);
  border-color: rgba(127, 29, 29, 0.22);
  color: #7f1d1d;
  font-family: var(--ifm-font-family-monospace);
  font-weight: 700;
}

.ce-table-card tbody td:nth-child(2) .ce-table-cell-body {
  background: rgba(37, 99, 235, 0.12);
  border-color: rgba(37, 99, 235, 0.34);
  color: #1e40af;
}

.ce-table-card tbody td:nth-child(3) .ce-table-cell-body {
  background: rgba(22, 163, 74, 0.14);
  border-color: rgba(22, 163, 74, 0.35);
  color: #14532d;
  font-family: var(--ifm-font-family-monospace);
  border-radius: 8px;
  padding: 0.48rem 0.96rem 0.5rem;
  line-height: 1.42;
}

.ce-table-card tbody td:nth-child(4) .ce-table-cell-body {
  background: rgba(202, 138, 4, 0.14);
  border-color: rgba(202, 138, 4, 0.35);
  color: #854d0e;
}

.ce-table-card tbody td:nth-child(5) .ce-table-cell-body {
  background: rgba(79, 70, 229, 0.14);
  border-color: rgba(79, 70, 229, 0.35);
  color: #3730a3;
}

/* Config reference tables: first column must be dark-maroon text style (no bubble) */
.ce-config-ref-table tbody td:nth-child(1) .ce-table-cell-body {
  background: transparent !important;
  border: 0 !important;
  border-radius: 0 !important;
  padding: 0 !important;
  min-height: auto !important;
  margin: 0 !important;
  color: #7f1d1d !important;
  font-family: var(--ifm-font-family-monospace);
  font-weight: 700;
  display: inline;
}

/* Config reference tables: expected-values column should stay green chip */
.ce-config-ref-table tbody td:nth-child(3) .ce-table-cell-body {
  background: rgba(22, 163, 74, 0.16) !important;
  border-color: rgba(22, 163, 74, 0.38) !important;
  color: #14532d !important;
  border-radius: 8px !important;
  padding: 0.5rem 1rem 0.52rem !important;
  line-height: 1.44 !important;
}

[data-theme='dark'] .ce-table-card thead .ce-table-cell-content {
  color: #e2e8f0 !important;
}

[data-theme='dark'] .ce-table-card tbody td:nth-child(1) .ce-table-cell-body {
  background: rgba(127, 29, 29, 0.24);
  border-color: rgba(251, 113, 133, 0.4);
  color: #fecdd3;
}

[data-theme='dark'] .ce-table-card tbody td:nth-child(2) .ce-table-cell-body {
  background: rgba(37, 99, 235, 0.3);
  border-color: rgba(96, 165, 250, 0.6);
  color: #dbeafe;
}

[data-theme='dark'] .ce-table-card tbody td:nth-child(3) .ce-table-cell-body {
  background: rgba(20, 83, 45, 0.58);
  border-color: rgba(74, 222, 128, 0.62);
  color: #dcfce7;
  border-radius: 8px;
  padding: 0.5rem 1rem 0.52rem;
  line-height: 1.44;
}

[data-theme='dark'] .ce-table-card tbody td:nth-child(4) .ce-table-cell-body {
  background: rgba(180, 83, 9, 0.28);
  border-color: rgba(251, 191, 36, 0.55);
  color: #fde68a;
}

[data-theme='dark'] .ce-table-card tbody td:nth-child(5) .ce-table-cell-body {
  background: rgba(67, 56, 202, 0.3);
  border-color: rgba(129, 140, 248, 0.6);
  color: #e0e7ff;
}

[data-theme='dark'] .ce-config-ref-table tbody td:nth-child(1) .ce-table-cell-body {
  background: transparent !important;
  border: 0 !important;
  color: #fecdd3 !important;
  min-height: auto !important;
  margin: 0 !important;
  display: inline;
}

[data-theme='dark'] .ce-config-ref-table tbody td:nth-child(3) .ce-table-cell-body {
  background: rgba(20, 83, 45, 0.62) !important;
  border-color: rgba(74, 222, 128, 0.66) !important;
  color: #dcfce7 !important;
  border-radius: 8px !important;
  padding: 0.52rem 1.04rem 0.54rem !important;
  line-height: 1.46 !important;
}

.theme-doc-markdown .ce-table-card table {
  width: 100% !important;
  min-width: 100% !important;
}

/* Architecture and markdown body text readability in dark mode */
[data-theme='dark'] .theme-doc-markdown,
[data-theme='dark'] .theme-doc-markdown p,
[data-theme='dark'] .theme-doc-markdown li,
[data-theme='dark'] .theme-doc-markdown h1,
[data-theme='dark'] .theme-doc-markdown h2,
[data-theme='dark'] .theme-doc-markdown h3,
[data-theme='dark'] .theme-doc-markdown h4,
[data-theme='dark'] .theme-doc-markdown h5,
[data-theme='dark'] .theme-doc-markdown h6 {
  color: #e2e8f0 !important;
}

[data-theme='dark'] .ce-flow-step-card,
[data-theme='dark'] .ce-decision-card,
[data-theme='dark'] .ce-schema-card {
  color: #e2e8f0;
}

[data-theme='dark'] .ce-flow-step-card {
  background: #0b1628;
  border-color: #223556;
}

[data-theme='dark'] .ce-flow-step-index {
  border-color: rgba(96, 165, 250, 0.56);
  background: rgba(37, 99, 235, 0.24);
  color: #bfdbfe !important;
  box-shadow: 0 6px 14px rgba(37, 99, 235, 0.28);
}

[data-theme='dark'] .ce-flow-step-title-ribbon {
  border: 0;
  background: transparent;
  color: #dbeafe !important;
}

[data-theme='dark'] .ce-flow-step-body {
  color: #e2e8f0 !important;
}

.ce-step-badge-list {
  display: flex;
  flex-wrap: wrap;
  gap: 0.58rem;
  margin: 0.9rem 0 1.2rem;
}

.ce-step-badge-list-vertical {
  flex-direction: column;
  flex-wrap: nowrap;
  align-items: flex-start;
}

.ce-step-badge-list-vertical .ce-step-badge-item {
  width: max-content;
}

.ce-step-badge-item {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  border: 1px solid var(--ce-border);
  border-radius: 999px;
  padding: 0.26rem 0.66rem 0.26rem 0.28rem;
  font-family: var(--ifm-font-family-monospace);
  font-size: 0.76rem;
  font-weight: 700;
  line-height: 1.2;
}

.ce-step-badge-index {
  width: 1.28rem;
  height: 1.28rem;
  min-width: 1.28rem;
  border-radius: 999px;
  display: inline-grid;
  place-items: center;
  font-size: 0.68rem;
  font-weight: 800;
  color: #ffffff;
}

.ce-step-badge-label {
  white-space: nowrap;
}

.ce-step-badge-item:nth-child(1) {
  background: rgba(37, 99, 235, 0.12);
  border-color: rgba(37, 99, 235, 0.34);
  color: #1e3a8a;
}

.ce-step-badge-item:nth-child(1) .ce-step-badge-index {
  background: #1d4ed8;
}

.ce-step-badge-item:nth-child(2) {
  background: rgba(79, 70, 229, 0.12);
  border-color: rgba(79, 70, 229, 0.34);
  color: #312e81;
}

.ce-step-badge-item:nth-child(2) .ce-step-badge-index {
  background: #4f46e5;
}

.ce-step-badge-item:nth-child(3) {
  background: rgba(124, 58, 237, 0.12);
  border-color: rgba(124, 58, 237, 0.34);
  color: #5b21b6;
}

.ce-step-badge-item:nth-child(3) .ce-step-badge-index {
  background: #7c3aed;
}

.ce-step-badge-item:nth-child(4) {
  background: rgba(192, 38, 211, 0.12);
  border-color: rgba(192, 38, 211, 0.34);
  color: #86198f;
}

.ce-step-badge-item:nth-child(4) .ce-step-badge-index {
  background: #c026d3;
}

.ce-step-badge-item:nth-child(5) {
  background: rgba(225, 29, 72, 0.12);
  border-color: rgba(225, 29, 72, 0.34);
  color: #9f1239;
}

.ce-step-badge-item:nth-child(5) .ce-step-badge-index {
  background: #e11d48;
}

.ce-step-badge-item:nth-child(6) {
  background: rgba(234, 88, 12, 0.12);
  border-color: rgba(234, 88, 12, 0.34);
  color: #9a3412;
}

.ce-step-badge-item:nth-child(6) .ce-step-badge-index {
  background: #ea580c;
}

.ce-step-badge-item:nth-child(7) {
  background: rgba(217, 119, 6, 0.12);
  border-color: rgba(217, 119, 6, 0.34);
  color: #92400e;
}

.ce-step-badge-item:nth-child(7) .ce-step-badge-index {
  background: #d97706;
}

.ce-step-badge-item:nth-child(8) {
  background: rgba(202, 138, 4, 0.12);
  border-color: rgba(202, 138, 4, 0.34);
  color: #854d0e;
}

.ce-step-badge-item:nth-child(8) .ce-step-badge-index {
  background: #ca8a04;
}

.ce-step-badge-item:nth-child(9) {
  background: rgba(101, 163, 13, 0.12);
  border-color: rgba(101, 163, 13, 0.34);
  color: #3f6212;
}

.ce-step-badge-item:nth-child(9) .ce-step-badge-index {
  background: #65a30d;
}

.ce-step-badge-item:nth-child(10) {
  background: rgba(22, 163, 74, 0.12);
  border-color: rgba(22, 163, 74, 0.34);
  color: #166534;
}

.ce-step-badge-item:nth-child(10) .ce-step-badge-index {
  background: #16a34a;
}

.ce-step-badge-item:nth-child(11) {
  background: rgba(5, 150, 105, 0.12);
  border-color: rgba(5, 150, 105, 0.34);
  color: #065f46;
}

.ce-step-badge-item:nth-child(11) .ce-step-badge-index {
  background: #059669;
}

.ce-step-badge-item:nth-child(12) {
  background: rgba(13, 148, 136, 0.12);
  border-color: rgba(13, 148, 136, 0.34);
  color: #115e59;
}

.ce-step-badge-item:nth-child(12) .ce-step-badge-index {
  background: #0d9488;
}

.ce-step-badge-item:nth-child(13) {
  background: rgba(8, 145, 178, 0.12);
  border-color: rgba(8, 145, 178, 0.34);
  color: #155e75;
}

.ce-step-badge-item:nth-child(13) .ce-step-badge-index {
  background: #0891b2;
}

.ce-step-badge-item:nth-child(14) {
  background: rgba(2, 132, 199, 0.12);
  border-color: rgba(2, 132, 199, 0.34);
  color: #0c4a6e;
}

.ce-step-badge-item:nth-child(14) .ce-step-badge-index {
  background: #0284c7;
}

.ce-step-badge-item:nth-child(15) {
  background: rgba(37, 99, 235, 0.12);
  border-color: rgba(37, 99, 235, 0.34);
  color: #1e3a8a;
}

.ce-step-badge-item:nth-child(15) .ce-step-badge-index {
  background: #2563eb;
}

.ce-step-badge-item:nth-child(16) {
  background: rgba(99, 102, 241, 0.12);
  border-color: rgba(99, 102, 241, 0.34);
  color: #3730a3;
}

.ce-step-badge-item:nth-child(16) .ce-step-badge-index {
  background: #6366f1;
}

[data-theme='dark'] .ce-step-badge-item {
  color: #e2e8f0;
}

.ce-step-badge-item-clickable {
  cursor: pointer;
  transition: transform 120ms ease, filter 120ms ease, box-shadow 120ms ease;
}

.ce-step-badge-item-clickable:hover {
  filter: saturate(1.1);
  transform: translateY(-1px);
}

.ce-step-badge-item-clickable:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px rgba(96, 165, 250, 0.5);
}

.ce-popup-overlay {
  position: fixed;
  inset: 0;
  z-index: 1200;
  background: rgba(2, 6, 23, 0.54);
  display: grid;
  place-items: center;
  padding: 1rem;
}

.ce-popup-card {
  width: min(640px, 96vw);
  border-radius: 14px;
  border: 1px solid rgba(96, 165, 250, 0.45);
  background: linear-gradient(180deg, rgba(248, 250, 255, 0.98), rgba(239, 246, 255, 0.98));
  box-shadow: 0 16px 40px rgba(15, 23, 42, 0.32);
  padding: 0.95rem 1rem 1rem;
}

.ce-popup-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.7rem;
  margin-bottom: 0.45rem;
}

.ce-popup-head h4 {
  margin: 0;
  font-size: 0.95rem;
  line-height: 1.3;
  font-weight: 800;
  color: #1e3a8a;
}

.ce-popup-card p {
  margin: 0;
  color: #0f172a;
  font-size: 0.88rem;
  line-height: 1.55;
}

.ce-popup-close {
  width: 1.9rem;
  height: 1.9rem;
  border-radius: 9px;
  border: 1px solid rgba(30, 64, 175, 0.35);
  background: rgba(37, 99, 235, 0.1);
  color: #1e3a8a;
  font-size: 1.15rem;
  line-height: 1;
  cursor: pointer;
}

.ce-popup-close:hover {
  background: rgba(37, 99, 235, 0.18);
}

[data-theme='dark'] .ce-popup-overlay {
  background: rgba(2, 6, 23, 0.72);
}

[data-theme='dark'] .ce-popup-card {
  border-color: rgba(96, 165, 250, 0.5);
  background: linear-gradient(180deg, rgba(10, 18, 35, 0.98), rgba(15, 28, 50, 0.98));
}

[data-theme='dark'] .ce-popup-head h4 {
  color: #93c5fd;
}

[data-theme='dark'] .ce-popup-card p {
  color: #dbeafe;
}

[data-theme='dark'] .ce-popup-close {
  border-color: rgba(96, 165, 250, 0.45);
  background: rgba(59, 130, 246, 0.14);
  color: #bfdbfe;
}

[data-theme='dark'] .ce-popup-close:hover {
  background: rgba(59, 130, 246, 0.24);
}

/* --- Hard overrides for table width + last-row border behavior --- */
.ce-table-card {
  display: block !important;
  width: 100% !important;
  max-width: 100% !important;
}

.ce-table-card .ce-table-wrap {
  width: 100% !important;
  max-width: 100% !important;
}

.ce-table-card table {
  width: 100% !important;
  min-width: 100% !important;
  table-layout: auto !important;
}

.ce-table-card tbody tr:last-child td {
  border-bottom: 0 !important;
}

.theme-doc-markdown table {
  width: 100% !important;
  min-width: 100% !important;
}

.ce-table-card.ce-table-cols-2 th:first-child,
.ce-table-card.ce-table-cols-2 td:first-child {
  width: 25% !important;
}

.ce-table-card.ce-table-cols-2 th:last-child,
.ce-table-card.ce-table-cols-2 td:last-child {
  width: 75% !important;
}

.ce-table-card.ce-table-cols-2 table {
  table-layout: fixed !important;
}

.ce-table-card.ce-table-cols-2 tbody td .ce-table-cell-body {
  display: block;
  width: 100%;
  box-sizing: border-box;
}

.ce-table-card.ce-table-cols-2 td:last-child .ce-table-cell-body {
  width: 100%;
}

.ce-table-card.ce-table-cols-3 th:nth-child(1),
.ce-table-card.ce-table-cols-3 td:nth-child(1) {
  width: 25%;
}

.ce-table-card.ce-table-cols-3 th:nth-child(2),
.ce-table-card.ce-table-cols-3 td:nth-child(2) {
  width: 40%;
}

.ce-table-card.ce-table-cols-3 th:nth-child(3),
.ce-table-card.ce-table-cols-3 td:nth-child(3) {
  width: 35%;
}

.ce-table-card.ce-table-cols-3 tbody td:nth-child(1) .ce-table-cell-body {
  white-space: nowrap;
}

/* --- Final table column sizing overrides (all column counts fill full card) --- */
.ce-table-card[class*='ce-table-cols-'] {
  width: 100% !important;
  max-width: 100% !important;
}

.ce-table-card[class*='ce-table-cols-'] .ce-table-wrap,
.ce-table-card[class*='ce-table-cols-'] table {
  width: 100% !important;
  min-width: 100% !important;
  table-layout: fixed !important;
}

.ce-table-card[class*='ce-table-cols-'] tbody td .ce-table-cell-body {
  display: block !important;
  width: 100% !important;
  box-sizing: border-box;
}

.ce-table-card.ce-table-cols-2 th:nth-child(1),
.ce-table-card.ce-table-cols-2 td:nth-child(1) {
  width: 25% !important;
}

.ce-table-card.ce-table-cols-2 th:nth-child(2),
.ce-table-card.ce-table-cols-2 td:nth-child(2) {
  width: 75% !important;
}

.ce-table-card.ce-table-cols-3 th:nth-child(1),
.ce-table-card.ce-table-cols-3 td:nth-child(1) {
  width: 25% !important;
}

.ce-table-card.ce-table-cols-3 th:nth-child(2),
.ce-table-card.ce-table-cols-3 td:nth-child(2) {
  width: 40% !important;
}

.ce-table-card.ce-table-cols-3 th:nth-child(3),
.ce-table-card.ce-table-cols-3 td:nth-child(3) {
  width: 35% !important;
}

.ce-table-card.ce-table-cols-4 th:nth-child(1),
.ce-table-card.ce-table-cols-4 td:nth-child(1) {
  width: 22% !important;
}

.ce-table-card.ce-table-cols-4 th:nth-child(2),
.ce-table-card.ce-table-cols-4 td:nth-child(2) {
  width: 28% !important;
}

.ce-table-card.ce-table-cols-4 th:nth-child(3),
.ce-table-card.ce-table-cols-4 td:nth-child(3) {
  width: 25% !important;
}

.ce-table-card.ce-table-cols-4 th:nth-child(4),
.ce-table-card.ce-table-cols-4 td:nth-child(4) {
  width: 25% !important;
}

.ce-table-card.ce-table-cols-5 th:nth-child(1),
.ce-table-card.ce-table-cols-5 td:nth-child(1) {
  width: 18% !important;
}

.ce-table-card.ce-table-cols-5 th:nth-child(2),
.ce-table-card.ce-table-cols-5 td:nth-child(2) {
  width: 22% !important;
}

.ce-table-card.ce-table-cols-5 th:nth-child(3),
.ce-table-card.ce-table-cols-5 td:nth-child(3),
.ce-table-card.ce-table-cols-5 th:nth-child(4),
.ce-table-card.ce-table-cols-5 td:nth-child(4),
.ce-table-card.ce-table-cols-5 th:nth-child(5),
.ce-table-card.ce-table-cols-5 td:nth-child(5) {
  width: 20% !important;
}

/* Absolute final width lock for DbTable inside docs markdown */
.theme-doc-markdown .ce-table-card {
  width: 100% !important;
  max-width: 100% !important;
}

.theme-doc-markdown .ce-table-card .ce-table-wrap {
  display: block !important;
  width: 100% !important;
  max-width: 100% !important;
  overflow-x: auto !important;
}

.theme-doc-markdown .ce-table-card table {
  display: table !important;
  width: 100% !important;
  min-width: 100% !important;
  max-width: 100% !important;
  table-layout: fixed !important;
  margin: 0 !important;
}

.theme-doc-markdown .ce-table-card thead {
  display: table-header-group !important;
}

.theme-doc-markdown .ce-table-card tbody {
  display: table-row-group !important;
}

.theme-doc-markdown .ce-table-card tr {
  display: table-row !important;
}

.theme-doc-markdown .ce-table-card th,
.theme-doc-markdown .ce-table-card td {
  display: table-cell !important;
}
