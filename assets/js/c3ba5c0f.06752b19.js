"use strict";(globalThis.webpackChunkconvengine_docs=globalThis.webpackChunkconvengine_docs||[]).push([[2220],{1300(e,t,s){s.r(t),s.d(t,{assets:()=>u,cancelDetails:()=>b,cancelEdges:()=>N,cancelNodes:()=>E,contentTitle:()=>d,default:()=>R,faqDetails:()=>h,faqEdges:()=>m,faqNodes:()=>p,frontMatter:()=>c,invDetails:()=>I,invEdges:()=>S,invNodes:()=>T,metadata:()=>a,supportDetails:()=>v,supportEdges:()=>f,supportNodes:()=>A,toc:()=>y,transferDetails:()=>g,transferEdges:()=>x,transferNodes:()=>_});const a=JSON.parse('{"id":"examples","title":"Flow Examples","description":"This page is the practical E2E companion to the V2 architecture. Each example shows:","source":"@site/docs/v2/examples.mdx","sourceDirName":".","slug":"/examples","permalink":"/docs/v2/examples","draft":false,"unlisted":false,"editUrl":"https://github.com/salilvnair/convengine-docs/tree/main/docs/v2/examples.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Flow Examples","sidebar_position":3,"hide_table_of_contents":true},"sidebar":"docSidebar","previous":{"title":"Architecture","permalink":"/docs/v2/architecture"},"next":{"title":"FAQ","permalink":"/docs/v2/faq"}}');var n=s(4848),i=s(8453),l=s(1470),r=s(9365),o=s(7555);const c={title:"Flow Examples",sidebar_position:3,hide_table_of_contents:!0},d="Flow Examples",u={},p=[{id:"faq_intent",position:{x:20,y:60},data:{label:"IntentResolutionStep"}},{id:"faq_schema",position:{x:300,y:60},data:{label:"SchemaExtractionStep"}},{id:"faq_rules",position:{x:580,y:60},data:{label:"RulesStep"}},{id:"faq_resp",position:{x:300,y:220},data:{label:"ResponseResolutionStep"}},{id:"faq_mem",position:{x:580,y:220},data:{label:"MemoryStep"}}],m=[{id:"faq_e1",source:"faq_intent",target:"faq_schema"},{id:"faq_e2",source:"faq_schema",target:"faq_rules"},{id:"faq_e3",source:"faq_rules",target:"faq_resp"},{id:"faq_e4",source:"faq_resp",target:"faq_mem"}],h={faq_intent:{title:"Intent resolution",file:"engine/steps/IntentResolutionStep.java",method:"execute(...) ",stage:"INTENT_RESOLVED",summary:"Classifier resolves FAQ intent.",session:["intent=FAQ, state=IDLE"]},faq_schema:{title:"Fact extraction",file:"engine/steps/SchemaExtractionStep.java",method:"execute(...) ",stage:"SCHEMA_EVALUATED",summary:"Minimal schema evaluation.",session:["schema complete"]},faq_rules:{title:"Rules evaluation",file:"engine/steps/RulesStep.java",method:"execute(...) ",stage:"RULE_NO_MATCH",summary:"No auto-advance transition required.",session:["state unchanged"]},faq_resp:{title:"Response resolution",file:"engine/steps/ResponseResolutionStep.java",method:"execute(...) ",stage:"ASSISTANT_OUTPUT",summary:"Resolves DERIVED response text.",session:["LLM synthesized string"]},faq_mem:{title:"Context memory",file:"engine/steps/MemoryStep.java",method:"execute(...) ",stage:"MEMORY_UPDATED",summary:"Records turn for future summaries.",session:["memory summary updated"]}},_=[{id:"t_intent",position:{x:20,y:60},data:{label:"IntentResolutionStep"}},{id:"t_schema",position:{x:300,y:60},data:{label:"SchemaExtractionStep"}},{id:"t_rules1",position:{x:580,y:60},data:{label:"RulesStep (Turn 1)"}},{id:"t_resp1",position:{x:860,y:60},data:{label:"Ask for slots"}},{id:"t_schema2",position:{x:300,y:220},data:{label:"SchemaExtractionStep (Turn 2)"}},{id:"t_rules2",position:{x:580,y:220},data:{label:"RulesStep -> Confirm"}}],x=[{id:"t_e1",source:"t_intent",target:"t_schema"},{id:"t_e2",source:"t_schema",target:"t_rules1"},{id:"t_e3",source:"t_rules1",target:"t_resp1"},{id:"t_e4",source:"t_resp1",target:"t_schema2",style:{strokeDasharray:"5,5"},label:"Next Turn"},{id:"t_e5",source:"t_schema2",target:"t_rules2"}],g={t_intent:{title:"Intent resolution",file:"engine/steps/IntentResolutionStep.java",method:"execute(...) ",stage:"INTENT_RESOLVED",summary:"CONNECTION_TRANSFER locked.",session:["state=IDLE"]},t_schema:{title:"Slot extraction",file:"engine/steps/SchemaExtractionStep.java",method:"execute(...) ",stage:"SCHEMA_INCOMPLETE",summary:"Identifies missing slots.",session:["missingFields tracked"]},t_rules1:{title:"Bootstrap state",file:"engine/steps/RulesStep.java",method:"execute(...) ",stage:"RULE_MATCH",summary:"Transitions IDLE -> COLLECT_INPUTS.",session:["state -> COLLECT_INPUTS"]},t_resp1:{title:"Clarification",file:"engine/steps/ResponseResolutionStep.java",method:"execute(...) ",stage:"ASSISTANT_OUTPUT",summary:"Prompts for customerId, email, etc.",session:["Prompt sent"]},t_schema2:{title:"Fill slots",file:"engine/steps/SchemaExtractionStep.java",method:"execute(...) ",stage:"SCHEMA_COMPLETE",summary:"User provides all missing slots.",session:["schema locked"]},t_rules2:{title:"Advance",file:"engine/steps/RulesStep.java",method:"execute(...) ",stage:"RULE_MATCH",summary:"Transitions to AWAITING_CONFIRMATION.",session:["state -> AWAITING_CONFIRMATION"]}},E=[{id:"c_act",position:{x:20,y:60},data:{label:"DialogueActStep"}},{id:"c_policy",position:{x:300,y:60},data:{label:"InteractionPolicyStep"}},{id:"c_guard",position:{x:580,y:60},data:{label:"GuardrailStep"}},{id:"c_pending",position:{x:860,y:60},data:{label:"PendingActionStep"}},{id:"c_rules",position:{x:300,y:220},data:{label:"RulesStep"}},{id:"c_resp",position:{x:580,y:220},data:{label:"Finalizer"}}],N=[{id:"c_e1",source:"c_act",target:"c_policy"},{id:"c_e2",source:"c_policy",target:"c_guard"},{id:"c_e3",source:"c_guard",target:"c_pending"},{id:"c_e4",source:"c_pending",target:"c_rules"},{id:"c_e5",source:"c_rules",target:"c_resp"}],b={c_act:{title:"Act check",file:"engine/steps/DialogueActStep.java",method:"execute(...) ",stage:"DIALOGUE_ACT_CLASSIFIED",summary:"User says 'yes'. Act=AFFIRM.",session:["dialogueAct=AFFIRM"]},c_policy:{title:"Policy lock",file:"engine/steps/InteractionPolicyStep.java",method:"execute(...) ",stage:"INTERACTION_POLICY_DECIDED",summary:"Routes to pending task over intent.",session:["policyDecision=EXECUTE_PENDING_ACTION"]},c_guard:{title:"Safety check",file:"engine/steps/GuardrailStep.java",method:"execute(...) ",stage:"GUARDRAIL_ALLOW",summary:"Ensures benign operation.",session:["result=ALLOW"]},c_pending:{title:"Task execute",file:"engine/steps/PendingActionStep.java",method:"execute(...) ",stage:"PENDING_ACTION_EXECUTED",summary:"Triggers API cancellation bean.",session:["status=EXECUTED"]},c_rules:{title:"Completion rule",file:"engine/steps/RulesStep.java",method:"execute(...) ",stage:"RULE_MATCH",summary:"EXECUTED -> CANCELLED state.",session:["state -> CANCELLED"]},c_resp:{title:"Response",file:"engine/steps/ResponseResolutionStep.java",method:"execute(...) ",stage:"ASSISTANT_OUTPUT",summary:"Completion text.",session:["done"]}},T=[{id:"i_intent",position:{x:20,y:60},data:{label:"IntentResolutionStep"}},{id:"i_orch",position:{x:300,y:60},data:{label:"ToolOrchestrationStep"}},{id:"i_java",position:{x:580,y:60},data:{label:"Live MCP Tool Call"}},{id:"i_ret",position:{x:300,y:220},data:{label:"Orchestration Returns"}},{id:"i_resp",position:{x:580,y:220},data:{label:"ResponseResolutionStep"}}],S=[{id:"i_e1",source:"i_intent",target:"i_orch"},{id:"i_e2",source:"i_orch",target:"i_java"},{id:"i_e3",source:"i_java",target:"i_ret"},{id:"i_e4",source:"i_ret",target:"i_resp"}],I={i_intent:{title:"Intent",file:"engine/steps/IntentResolutionStep.java",method:"execute(...) ",stage:"INTENT_RESOLVED",summary:"DATABASE_QUERY intent.",session:["intent=DATABASE_QUERY"]},i_orch:{title:"Tool Dispatch",file:"engine/steps/ToolOrchestrationStep.java",method:"execute(...) ",stage:"TOOL_ORCHESTRATION_DISPATCH",summary:"Delegates to MCP runtime.",session:["group=INVENTORY_DB"]},i_java:{title:"Execution",file:"external/java/Adapter.java",method:"execute(...) ",stage:"EXTERNAL",summary:"Java connector runs backend DB.",session:["Fetching rows"]},i_ret:{title:"Tool Finish",file:"engine/steps/ToolOrchestrationStep.java",method:"execute(...) ",stage:"TOOL_ORCHESTRATION_RESULT",summary:"Assigns result to session context.",session:["tool_result.dbList"]},i_resp:{title:"Interpolate",file:"engine/steps/ResponseResolutionStep.java",method:"execute(...) ",stage:"ASSISTANT_OUTPUT",summary:"LLM uses live tool data in response.",session:["Synthesized text"]}},A=[{id:"s_mem1",position:{x:20,y:60},data:{label:"MemoryStep (Load)"}},{id:"s_intent",position:{x:300,y:60},data:{label:"IntentResolutionStep"}},{id:"s_resp",position:{x:580,y:60},data:{label:"ResponseResolutionStep"}},{id:"s_mem2",position:{x:860,y:60},data:{label:"MemoryStep (Compute)"}}],f=[{id:"s_e1",source:"s_mem1",target:"s_intent"},{id:"s_e2",source:"s_intent",target:"s_resp"},{id:"s_e3",source:"s_resp",target:"s_mem2"}],v={s_mem1:{title:"Load summary",file:"engine/steps/MemoryStep.java",method:"execute(...) ",stage:"MEMORY_INJECTED",summary:"Injects context from 14 turns ago.",session:["memory.session_summary available"]},s_intent:{title:"Guided AI",file:"engine/steps/IntentResolutionStep.java",method:"execute(...) ",stage:"INTENT_RESOLVED",summary:"Resolves meaning over ambiguous input.",session:["intent=SUPPORT_DIAGNOSTIC"]},s_resp:{title:"Accurate query",file:"engine/steps/ResponseResolutionStep.java",method:"execute(...) ",stage:"ASSISTANT_OUTPUT",summary:"Answers with previous link text.",session:["derived text"]},s_mem2:{title:"Update Rolling",file:"engine/steps/MemoryStep.java",method:"execute(...) ",stage:"MEMORY_UPDATED",summary:"Compresses latest turns into new summary.",session:["re-evaluated summary"]}},y=[{value:"Canonical V2 Runtime Step Set",id:"canonical-v2-runtime-step-set",level:2},{value:"FAQ",id:"faq",level:2},{value:"CONNECTION_TRANSFER",id:"connection_transfer",level:2},{value:"ORDER_CANCELLATION",id:"order_cancellation",level:2},{value:"INVENTORY_LOOKUP",id:"inventory_lookup",level:2},{value:"SUPPORT_DIAGNOSTIC",id:"support_diagnostic",level:2}];function j(e){const t={a:"a",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"flow-examples",children:"Flow Examples"})}),"\n",(0,n.jsx)(t.p,{children:"This page is the practical E2E companion to the V2 architecture. Each example shows:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"conversation UX"}),"\n",(0,n.jsx)(t.li,{children:"runtime flow graph (interactive)"}),"\n",(0,n.jsx)(t.li,{children:"DML seed rows"}),"\n",(0,n.jsx)(t.li,{children:"expected audit stages"}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"canonical-v2-runtime-step-set",children:"Canonical V2 Runtime Step Set"}),"\n",(0,n.jsx)(o.f4,{type:"info",title:"Step loop behavior",children:(0,n.jsxs)(t.p,{children:["Step loop invokes each ",(0,n.jsx)(o.pu,{children:"execute(session)"}),". If a step returns ",(0,n.jsx)(o.pu,{children:"Stop"}),", response returns immediately; otherwise loop continues."]})}),"\n",(0,n.jsxs)("div",{className:"ce-step-badge-list",role:"list","aria-label":"Canonical runtime step set",children:[(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"1"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"LoadOrCreateConversationStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"2"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"CacheInspectAuditStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"3"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"ResetConversationStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"4"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"PersistConversationBootstrapStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"5"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"AuditUserInputStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"6"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"PolicyEnforcementStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"7"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"DialogueActStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"8"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"InteractionPolicyStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"9"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"CorrectionStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"10"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"ActionLifecycleStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"11"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"DisambiguationStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"12"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"GuardrailStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"13"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"IntentResolutionStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"14"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"ResetResolvedIntentStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"15"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"FallbackIntentStateStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"16"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"AddContainerDataStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"17"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"PendingActionStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"18"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"ToolOrchestrationStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"19"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"McpToolStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"20"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"SchemaExtractionStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"21"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"AutoAdvanceStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"22"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"RulesStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"23"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"StateGraphStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"24"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"ResponseResolutionStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"25"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"MemoryStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"26"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"PersistConversationStep"})]}),(0,n.jsxs)("div",{className:"ce-step-badge-item",children:[(0,n.jsx)("span",{className:"ce-step-badge-index",children:"27"}),(0,n.jsx)("span",{className:"ce-step-badge-label",children:"PipelineEndGuardStep"})]})]}),"\n",(0,n.jsx)(t.h2,{id:"faq",children:"FAQ"}),"\n",(0,n.jsxs)(l.A,{groupId:"example-faq",children:[(0,n.jsxs)(r.A,{value:"conversation",label:"Conversation + Flow",default:!0,children:[(0,n.jsxs)(o.sy,{title:"FAQ",children:[(0,n.jsx)(o.KJ,{info:["FAQ style informational request.","Triggers QUESTION dialogue act."],children:"How do I transfer my electricity connection?"}),(0,n.jsx)(o.Fb,{tables:["ce_intent","ce_intent_classifier","ce_response"],info:["Intent resolved as FAQ.","Response selected from FAQ mapping."],children:"Share customerId, phone, email, source city, and target city. Then confirm to submit transfer."})]}),(0,n.jsx)(o.il,{title:"FAQ runtime flow",subtitle:"Basic Intent + Memory retention",nodes:p,edges:m,detailsById:h,defaultSelectedId:"faq_intent"})]}),(0,n.jsx)(r.A,{value:"dml",label:"DML Entries",children:(0,n.jsx)(o.vl,{title:"FAQ seed SQL",language:"sql",defaultOpen:!0,children:"INSERT INTO ce_intent (intent_code, description, priority, enabled)\nVALUES ('FAQ', 'Answer informational questions from FAQ knowledge base', 10, true);\n\nINSERT INTO ce_intent_classifier (intent_code, rule_type, pattern, priority, enabled)\nVALUES ('FAQ', 'REGEX', '(?i)\\b(what|how|help|faq|information|details|explain)\\b', 10, true);\n\nINSERT INTO ce_prompt_template (intent_code, state_code, response_type, system_prompt, user_prompt, temperature, enabled)\nVALUES ('FAQ', 'IDLE', 'TEXT',\n      'You are a concise FAQ assistant. Answer directly and clearly.',\n      'User question: {{user_input}}\nFAQ context: {{container_data}}\nReturn short helpful answer.',\n      0.10, true);\n\nINSERT INTO ce_response (intent_code, state_code, output_format, response_type, derivation_hint, priority, enabled)\nVALUES ('FAQ', 'IDLE', 'TEXT', 'DERIVED',\n      'Answer FAQ using available context and user question.', 10, true);"})}),(0,n.jsx)(r.A,{value:"audit",label:"Audit Trail",children:(0,n.jsx)(o.p,{title:"Expected audit stages (ordered)",columns:["Order","Stage","Must contain"],rows:[["1","USER_INPUT","original user message"],["2","DIALOGUE_ACT_CLASSIFIED","dialogueAct=QUESTION"],["3","INTERACTION_POLICY_DECIDED","policyDecision=RECLASSIFY_INTENT"],["4","INTENT_RESOLVED","intent=FAQ"],["5","RESOLVE_RESPONSE_SELECTED","responseType=DERIVED"],["6","ASSISTANT_OUTPUT","output text or json payload"],["7","MEMORY_UPDATED","summaryChars/recalled flags"]]})})]}),"\n",(0,n.jsx)(t.h2,{id:"connection_transfer",children:"CONNECTION_TRANSFER"}),"\n",(0,n.jsxs)(l.A,{groupId:"example-transfer",children:[(0,n.jsxs)(r.A,{value:"conversation",label:"Conversation + Flow",default:!0,children:[(0,n.jsxs)(o.sy,{title:"Connection transfer conversation",children:[(0,n.jsx)(o.KJ,{info:["Initial transfer request.","Intent should resolve to CONNECTION_TRANSFER."],children:"Move my electricity connection from City1 to City2."}),(0,n.jsx)(o.Fb,{tables:["ce_output_schema","ce_response"],info:["Schema incomplete path.","Assistant asks for required fields."],children:"Please provide customerId, phone, email, sourceCity, and targetCity."}),(0,n.jsxs)(o.KJ,{info:["User provides all required slots.","Schema completeness expected = true."],children:["customerId 9912, phone 9988776655, email ",(0,n.jsx)(t.a,{href:"mailto:user@zapper.com",children:"user@zapper.com"}),", sourceCity City1, targetCity City2"]}),(0,n.jsx)(o.Fb,{tables:["ce_rule","ce_pending_action"],info:["State moves to AWAITING_CONFIRMATION.","Pending action staged for confirmation."],children:"Do you want to move this connection right away?"})]}),(0,n.jsx)(o.il,{title:"Connection Transfer Flow",subtitle:"Slot fill auto advance",nodes:_,edges:x,detailsById:g,defaultSelectedId:"t_schema"})]}),(0,n.jsx)(r.A,{value:"dml",label:"DML Entries",children:(0,n.jsx)(o.vl,{title:"Schema & Rules SQL",language:"sql",defaultOpen:!0,children:"INSERT INTO ce_intent (intent_code, enabled) VALUES ('CONNECTION_TRANSFER', true);\n\nINSERT INTO ce_output_schema (intent_code, format_type, schema_json, enabled)\nVALUES ('CONNECTION_TRANSFER', 'JSON', '{\"properties\":{\"customerId\":{},\"phone\":{},\"email\":{},\"sourceCity\":{},\"targetCity\":{}}, \"required\":[\"customerId\",\"phone\",\"email\",\"sourceCity\",\"targetCity\"]}', true);\n\nINSERT INTO ce_rule (phase, intent_code, state_code, rule_type, match_pattern, \"action\", action_value, priority, enabled)\nVALUES\n('PRE_RESPONSE_RESOLUTION', 'CONNECTION_TRANSFER', 'IDLE', 'REGEX', '.*', 'SET_STATE', 'COLLECT_INPUTS', 10, true),\n('PRE_RESPONSE_RESOLUTION', 'CONNECTION_TRANSFER', 'COLLECT_INPUTS', 'JSON_PATH',\n'$[?(@.state == ''COLLECT_INPUTS'' && @.customerId && @.phone && @.email && @.sourceCity && @.targetCity)]',\n'SET_STATE', 'AWAITING_CONFIRMATION', 100, true);\n\nINSERT INTO ce_response (intent_code, state_code, response_type, output_format, enabled)\nVALUES ('CONNECTION_TRANSFER', 'COLLECT_INPUTS', 'DERIVED', 'TEXT', true);\n\nINSERT INTO ce_response (intent_code, state_code, response_type, output_format, enabled)\nVALUES ('CONNECTION_TRANSFER', 'AWAITING_CONFIRMATION', 'DERIVED', 'TEXT', true);"})}),(0,n.jsx)(r.A,{value:"audit",label:"Audit Trail",children:(0,n.jsx)(o.p,{title:"Collection Turn Expected Trace",columns:["Stage","Meaning"],rows:[["INTENT_RESOLVED","Intent locked to CONNECTION_TRANSFER"],["SCHEMA_INCOMPLETE","Signals partial JSON payload extraction"],["RULE_MATCH","Initial IDLE -> COLLECT_INPUTS switch"],["ASSISTANT_OUTPUT","Prompts for slot filling"]]})})]}),"\n",(0,n.jsx)(t.h2,{id:"order_cancellation",children:"ORDER_CANCELLATION"}),"\n",(0,n.jsxs)(l.A,{groupId:"example-cancel",children:[(0,n.jsxs)(r.A,{value:"conversation",label:"Conversation + Flow",default:!0,children:[(0,n.jsxs)(o.sy,{title:"Protected Order Cancellation",children:[(0,n.jsx)(o.KJ,{info:["Cancellation intent request.","Order id missing in this turn."],children:"Cancel my shoe order."}),(0,n.jsx)(o.Fb,{tables:["ce_output_schema","ce_response"],info:["Missing-field follow-up.","Collect order number before execution."],children:"What is your order number?"}),(0,n.jsx)(o.KJ,{info:["Provides order number.","Enables confirmation state transition."],children:"It's 48392."}),(0,n.jsx)(o.Fb,{tables:["ce_rule","ce_pending_action"],info:["Action moved to confirmation state.","Awaiting explicit AFFIRM from user."],children:"Are you sure you want to cancel order 48392?"}),(0,n.jsx)(o.KJ,{info:["AFFIRM dialogue act.","Interaction policy should execute pending action."],children:"Yes please do that."}),(0,n.jsx)(o.Fb,{tables:["ce_audit","ce_response"],info:["Pending action executed.","Final cancelled response generated."],children:"Order 48392 has been completely cancelled."})]}),(0,n.jsx)(o.il,{title:"Action Execution Flow (Turn 3)",subtitle:"Interaction Policy executing Pending Action",nodes:E,edges:N,detailsById:b,defaultSelectedId:"c_policy"})]}),(0,n.jsx)(r.A,{value:"dml",label:"DML Entries",children:(0,n.jsx)(o.vl,{title:"Pending Action Assignment SQL",language:"sql",defaultOpen:!0,children:"INSERT INTO ce_intent (intent_code, enabled) VALUES ('CANCEL_ORDER', true);\n\nINSERT INTO ce_pending_action (intent_code, state_code, action_key, bean_name, method_names, priority, enabled, description)\nVALUES ('CANCEL_ORDER', 'CONFIRM_CANCEL', 'stripe_cancel', 'stripeCancelTask', 'execute', 10, true, 'Cancel the order in the provider system');\n\nINSERT INTO ce_rule (intent_code, state_code, rule_type, rule_value, action, action_value, phase, priority, enabled)\nVALUES ('CANCEL_ORDER', 'CONFIRM_CANCEL', 'EXACT', 'ANY', 'SET_STATE', 'CANCELLED', 'PRE_RESPONSE_RESOLUTION', 10, true);\n\nINSERT INTO ce_prompt_template (intent_code, response_type, system_prompt, user_prompt, template_id, enabled)\nVALUES ('CANCEL_ORDER', 'DERIVED', 'Format cleanly.', 'Order {{context.orderNumber}} has been completely cancelled.', 'tmpl_cancelled', true);"})}),(0,n.jsx)(r.A,{value:"audit",label:"Audit Trail",children:(0,n.jsx)(o.p,{title:"Action Commit Expected Trace",columns:["Stage","Required Contents"],rows:[["DIALOGUE_ACT_CLASSIFIED","dialogueAct=AFFIRM"],["INTERACTION_POLICY_DECIDED","policyDecision=EXECUTE_PENDING_ACTION"],["PENDING_ACTION_EXECUTED","status=EXECUTED, pendingActionRef=stripeCancelTask"],["RULE_APPLIED","state -> CANCELLED"]]})})]}),"\n",(0,n.jsx)(t.h2,{id:"inventory_lookup",children:"INVENTORY_LOOKUP"}),"\n",(0,n.jsxs)(l.A,{groupId:"example-inventory",children:[(0,n.jsxs)(r.A,{value:"conversation",label:"Conversation + Flow",default:!0,children:[(0,n.jsxs)(o.sy,{title:"DB Orchestration Flow",children:[(0,n.jsx)(o.KJ,{info:["Tool-backed inventory lookup request.","Expected tool group: DB/INVENTORY."],children:"How many running shoes are left in warehouse B?"}),(0,n.jsx)(o.Fb,{tables:["ce_mcp_tool"],info:["Tool orchestration starts.","System preparing DB call."],children:"Checking the inventory database..."}),(0,n.jsx)(o.KJ,{info:["Represents async tool latency.","No new user data provided."],children:(0,n.jsx)(t.em,{children:"[System delay executing Tool]"})}),(0,n.jsx)(o.Fb,{tables:["ce_audit","ce_response"],info:["tool_result injected into response derivation.","Final value rendered from tool output."],children:"We currently have 421 units of running shoes allocated to warehouse B."})]}),(0,n.jsx)(o.il,{title:"Tool Request Flow",subtitle:"Tool orchestration injects payload",nodes:T,edges:S,detailsById:I,defaultSelectedId:"i_orch"})]}),(0,n.jsx)(r.A,{value:"dml",label:"DML Entries",children:(0,n.jsx)(o.vl,{title:"Virtual DB Binding SQL",language:"sql",defaultOpen:!0,children:"INSERT INTO ce_mcp_tool (intent_code, tool_group, required_params_json, execution_timeout_ms, enabled)\nVALUES ('DATABASE_QUERY', 'INVENTORY_DB', '[\"itemType\", \"warehouseId\"]', 5000, true);\n\nINSERT INTO ce_prompt_template (intent_code, response_type, system_prompt, user_prompt, template_id, enabled)\nVALUES ('DATABASE_QUERY', 'DERIVED', 'You are an inventory assistant.', 'Answer from these database results: {{tool_result.dbList}}', 'tmpl_inventory_gen', true);\n\nINSERT INTO ce_response (intent_code, state_code, response_type, template_id, priority, enabled)\nVALUES ('DATABASE_QUERY', 'IDLE', 'DERIVED', 'tmpl_inventory_gen', 10, true);"})}),(0,n.jsx)(r.A,{value:"audit",label:"Audit Trail",children:(0,n.jsx)(o.p,{title:"Data Request Trace",columns:["Stage","Context Checkpoint"],rows:[["TOOL_ORCHESTRATION_DISPATCH","toolGroup=INVENTORY_DB"],["TOOL_ORCHESTRATION_RESULT","toolResult={'count': 421}"],["ASSISTANT_OUTPUT","Final text uses 421 units output"]]})})]}),"\n",(0,n.jsx)(t.h2,{id:"support_diagnostic",children:"SUPPORT_DIAGNOSTIC"}),"\n",(0,n.jsxs)(l.A,{groupId:"example-support",children:[(0,n.jsxs)(r.A,{value:"conversation",label:"Conversation + Flow",default:!0,children:[(0,n.jsxs)(o.sy,{title:"Long Context Support Thread",children:[(0,n.jsx)(o.KJ,{info:["Late-turn follow-up question.","Requires memory/session summary recall."],children:"[Turn 15]: Wait, what link did you tell me to use for the firmware reset again?"}),(0,n.jsxs)(o.Fb,{tables:["ce_conversation_history","ce_audit"],info:["Memory-assisted recall response.","References earlier troubleshooting context."],children:["Based on our previous troubleshooting, you should use ",(0,n.jsx)(t.a,{href:"http://router.local/admin_reset",children:"http://router.local/admin_reset"})," with the default PIN 1234."]})]}),(0,n.jsx)(o.il,{title:"Memory Summary Flow",subtitle:"Long-context retrieval during turn evaluation",nodes:A,edges:f,detailsById:v,defaultSelectedId:"s_mem1"})]}),(0,n.jsx)(r.A,{value:"dml",label:"DML Entries",children:(0,n.jsx)(o.vl,{title:"Memory Auto-Summarization Config",language:"yaml",defaultOpen:!0,children:"convengine:\nflow:\n  memory:\n    enabled: true\n    # Max token size for the compressed summary string\n    summary-max-chars: 1200\n    # Number of turns to trigger a new summary compression cycle\n    recent-turns-for-summary: 3"})}),(0,n.jsx)(r.A,{value:"audit",label:"Audit Trail",children:(0,n.jsx)(o.p,{title:"Memory Trace",columns:["Stage","Context Action"],rows:[["MEMORY_INJECTED","old sequence of facts available to tool_result/intent logic"],["INTENT_RESOLVED","Supports historical context"],["MEMORY_UPDATED","newSummary generated and injected"]]})})]}),"\n",(0,n.jsx)(o.f4,{type:"tip",title:"Fast validation",children:(0,n.jsxs)(t.p,{children:["For each example run, inspect both ",(0,n.jsxs)(o.Mn,{children:["/api/v2/conversation/audit/","{conversationId}"]})," and ",(0,n.jsxs)(o.Mn,{children:["/api/v2/conversation/audit/","{conversationId}","/trace"]}),"."]})})]})}function R(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(j,{...e})}):j(e)}},1470(e,t,s){s.d(t,{A:()=>A});var a=s(6540),n=s(4164),i=s(7559),l=s(3104),r=s(6347),o=s(205),c=s(7485),d=s(1682),u=s(679);function p(e){return a.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function m(e){const{values:t,children:s}=e;return(0,a.useMemo)(()=>{const e=t??function(e){return p(e).map(({props:{value:e,label:t,attributes:s,default:a}})=>({value:e,label:t,attributes:s,default:a}))}(s);return function(e){const t=(0,d.XI)(e,(e,t)=>e.value===t.value);if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[t,s])}function h({value:e,tabValues:t}){return t.some(t=>t.value===e)}function _({queryString:e=!1,groupId:t}){const s=(0,r.W6)(),n=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,c.aZ)(n),(0,a.useCallback)(e=>{if(!n)return;const t=new URLSearchParams(s.location.search);t.set(n,e),s.replace({...s.location,search:t.toString()})},[n,s])]}function x(e){const{defaultValue:t,queryString:s=!1,groupId:n}=e,i=m(e),[l,r]=(0,a.useState)(()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!h({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const s=t.find(e=>e.default)??t[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:t,tabValues:i})),[c,d]=_({queryString:s,groupId:n}),[p,x]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[s,n]=(0,u.Dv)(t);return[s,(0,a.useCallback)(e=>{t&&n.set(e)},[t,n])]}({groupId:n}),g=(()=>{const e=c??p;return h({value:e,tabValues:i})?e:null})();(0,o.A)(()=>{g&&r(g)},[g]);return{selectedValue:l,selectValue:(0,a.useCallback)(e=>{if(!h({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);r(e),d(e),x(e)},[d,x,i]),tabValues:i}}var g=s(2303);const E="tabList__CuJ",N="tabItem_LNqP";var b=s(4848);function T({className:e,block:t,selectedValue:s,selectValue:a,tabValues:i}){const r=[],{blockElementScrollPositionUntilNextRender:o}=(0,l.a_)(),c=e=>{const t=e.currentTarget,n=r.indexOf(t),l=i[n].value;l!==s&&(o(t),a(l))},d=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const s=r.indexOf(e.currentTarget)+1;t=r[s]??r[0];break}case"ArrowLeft":{const s=r.indexOf(e.currentTarget)-1;t=r[s]??r[r.length-1];break}}t?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,n.A)("tabs",{"tabs--block":t},e),children:i.map(({value:e,label:t,attributes:a})=>(0,b.jsx)("li",{role:"tab",tabIndex:s===e?0:-1,"aria-selected":s===e,ref:e=>{r.push(e)},onKeyDown:d,onClick:c,...a,className:(0,n.A)("tabs__item",N,a?.className,{"tabs__item--active":s===e}),children:t??e},e))})}function S({lazy:e,children:t,selectedValue:s}){const i=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=i.find(e=>e.props.value===s);return e?(0,a.cloneElement)(e,{className:(0,n.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:i.map((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==s}))})}function I(e){const t=x(e);return(0,b.jsxs)("div",{className:(0,n.A)(i.G.tabs.container,"tabs-container",E),children:[(0,b.jsx)(T,{...t,...e}),(0,b.jsx)(S,{...t,...e})]})}function A(e){const t=(0,g.A)();return(0,b.jsx)(I,{...e,children:p(e.children)},String(t))}},9365(e,t,s){s.d(t,{A:()=>l});s(6540);var a=s(4164);const n="tabItem_Ymn6";var i=s(4848);function l({children:e,hidden:t,className:s}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,a.A)(n,s),hidden:t,children:e})}}}]);