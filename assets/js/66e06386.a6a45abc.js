"use strict";(globalThis.webpackChunkconvengine_docs=globalThis.webpackChunkconvengine_docs||[]).push([[311],{1414(e,t,n){n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>d,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"deep-dive/data-model","title":"Data Model","description":"ConvEngine is configuration-driven. Behavior is defined in the following tables.","source":"@site/docs/deep-dive/data-model.mdx","sourceDirName":"deep-dive","slug":"/deep-dive/data-model","permalink":"/docs/deep-dive/data-model","draft":false,"unlisted":false,"editUrl":"https://github.com/salilvnair/convengine-docs/tree/main/docs/deep-dive/data-model.mdx","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Data Model","sidebar_position":4,"hide_table_of_contents":true},"sidebar":"docSidebar","previous":{"title":"Real-world Examples (Debug Trace)","permalink":"/docs/deep-dive/examples"},"next":{"title":"Developer Guide","permalink":"/docs/deep-dive/developer-guide"}}');var a=n(4848),s=n(8453),o=n(3224);const r={title:"Data Model",sidebar_position:4,hide_table_of_contents:!0},d="Data Model",l={},c=[{value:"Configuration Tables",id:"configuration-tables",level:2},{value:"Runtime Tables",id:"runtime-tables",level:2},{value:"Common Operations",id:"common-operations",level:2},{value:"Setting a Task",id:"setting-a-task",level:3},{value:"Getting Extracted Data",id:"getting-extracted-data",level:3}];function p(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"data-model",children:"Data Model"})}),"\n",(0,a.jsx)(t.p,{children:"ConvEngine is configuration-driven. Behavior is defined in the following tables."}),"\n",(0,a.jsx)(t.h2,{id:"configuration-tables",children:"Configuration Tables"}),"\n",(0,a.jsx)(o.p,{title:"Core Tables",columns:["Table","Purpose","Key Columns"],rows:[["ce_intent","Defines business intents","intent_code, description, enabled"],["ce_intent_classifier","Regex patterns for intents","match_pattern, priority"],["ce_rule","Logic & State Transitions","rule_type, action, match_pattern"],["ce_response","Output mapping","response_type, output_format, exact_text"],["ce_output_schema","Data extraction definition","json_schema, priority"],["ce_prompt_template","LLM Prompts","system_prompt, user_prompt"]]}),"\n",(0,a.jsx)(t.h2,{id:"runtime-tables",children:"Runtime Tables"}),"\n",(0,a.jsx)(o.p,{title:"Runtime Persistence",columns:["Table","Purpose"],rows:[["ce_conversation","Current state of active conversations"],["ce_audit","Append-only log of every step execution"]]}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.h1,{id:"session-api",children:"Session API"}),"\n",(0,a.jsxs)(t.p,{children:["When writing Java extensions (Interceptors, Transformers), you interact with ",(0,a.jsx)(t.code,{children:"EngineSession"}),"."]}),"\n",(0,a.jsx)(o.vl,{title:"EngineSession.java (key methods)",language:"java",packagePath:"com.github.salilvnair.convengine.engine.session",filePath:"src/main/java/com/github/salilvnair/convengine/engine/session/EngineSession.java",children:"// State Management\nvoid setIntent(String intent);\nvoid setState(String state);\n\n// Context (The Memory)\n// Access the JSON context map\nMap<String, Object> contextDict();\nvoid putContext(String key, Object value);\n\n// Persisted Entity\nCeConversation getConversation();\n\n// Flow Control\nvoid setFinalResult(EngineResult result); // Stop pipeline immediately"}),"\n",(0,a.jsx)(t.h2,{id:"common-operations",children:"Common Operations"}),"\n",(0,a.jsx)(t.h3,{id:"setting-a-task",children:"Setting a Task"}),"\n",(0,a.jsx)(t.p,{children:"Used to signal the UI or downstream systems to perform client-side actions."}),"\n",(0,a.jsx)(o.vl,{title:"Set task",language:"java",packagePath:"consumer logic",children:'session.putContext("task", "OPEN_PAYMENT_MODAL");'}),"\n",(0,a.jsx)(t.h3,{id:"getting-extracted-data",children:"Getting Extracted Data"}),"\n",(0,a.jsx)(t.p,{children:"Access data extracted by the Schema Extraction step."}),"\n",(0,a.jsx)(o.vl,{title:"Read extracted value",language:"java",packagePath:"consumer logic",children:'String accountId = (String) session.contextDict().get("accountId");'})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}}}]);