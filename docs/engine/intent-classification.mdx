import { Highlight, Decision, FlowStep, Conversation, User, Assistant } from "../../src/components/convengine";

# ğŸ§­ Intent Classification

Intent classification answers one simple question:

<Highlight type="success">
<strong>What is the user fundamentally trying to do?</strong>
</Highlight>

ConvEngine treats intent as a **stable, engine-owned signal** â€” not an LLM guess.

---

## ğŸ§  Philosophy

<Decision type="deterministic">
Intent is decided by the engine using rules and classifiers â€” not by the LLM.
</Decision>

LLMs may help with wording, but **intent controls the entire flow**:
- Which schema applies
- Which rules fire
- Which responses are valid

---

## ğŸ§© Step 1: Baseline Classification

<FlowStep step="1" title="Baseline Intent Detection">
ConvEngine first evaluates <code>ce_intent_classifier</code> rules.
These are simple, fast, deterministic checks (regex, contains, starts-with).
</FlowStep>

Example classifiers:

```sql
('GREETING', 'REGEX', '^(hi|hello|hey).*'),
('ACTION', 'CONTAINS', 'move'),
('ACTION', 'CONTAINS', 'from')
```

First match (by priority) wins.

---

## ğŸ§© Step 2: Rule Overrides

<FlowStep step="2" title="Rule-Based Overrides">
After baseline classification, <code>ce_rule</code> entries are applied.
Rules have higher authority than classifiers.
</FlowStep>

Rules can:
- Override intent
- Set state
- Short-circuit execution

---

## ğŸ§ª Example Walkthrough

<Conversation
  engineStatus="RUNNING"
  engineDetails={
    <>
      <div className="ce-engine-item ok">classifier â†’ ACTION</div>
      <div className="ce-engine-item ok">intent set</div>
    </>
  }
>
  <User>move from A</User>
  <Assistant>
    I understand you want to move a service.
    Where do you want to move it?
  </Assistant>
</Conversation>

<Decision type="deterministic">
Intent = ACTION (sticky unless overridden)
</Decision>

---

## ğŸ” Intent Stickiness

<Highlight type="info">
Once intent is set, it is reused across turns unless a rule explicitly changes it.
</Highlight>

This prevents intent flapping and makes conversations predictable.

---

## ğŸš« What Intent Classification Never Does

<Highlight type="danger">
- Extract data  
- Change schema  
- Call the LLM  
- Decide responses  
</Highlight>

Intent classification only labels **purpose**, nothing else.

---

## âœ… Why This Design Matters

- Cheap (no LLM)
- Fully auditable
- Easy to tune via SQL
- Enterprise-safe

Intent is the **compass** of ConvEngine â€” once set, everything else aligns.
