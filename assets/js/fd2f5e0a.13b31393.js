"use strict";(globalThis.webpackChunkconvengine_docs=globalThis.webpackChunkconvengine_docs||[]).push([[2294],{2851(e,n,i){i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>r,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"deep-dive/intent-and-schema","title":"Intent & Schema","description":"Dialogue act resolution","source":"@site/docs/v2/deep-dive/intent-and-schema.mdx","sourceDirName":"deep-dive","slug":"/deep-dive/intent-and-schema","permalink":"/docs/v2/deep-dive/intent-and-schema","draft":false,"unlisted":false,"editUrl":"https://github.com/salilvnair/convengine-docs/tree/main/docs/v2/deep-dive/intent-and-schema.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Intent & Schema","sidebar_position":5},"sidebar":"docSidebar","previous":{"title":"Pipeline & Steps","permalink":"/docs/v2/deep-dive/pipeline-steps"},"next":{"title":"Rules & Responses","permalink":"/docs/v2/deep-dive/rules-responses"}}');var c=i(4848),l=i(8453);const d={title:"Intent & Schema",sidebar_position:5},r="Intent and Schema Internals (v2)",t={},o=[{value:"Dialogue act resolution",id:"dialogue-act-resolution",level:2},{value:"Interaction policy decision",id:"interaction-policy-decision",level:2},{value:"Intent resolver behavior in v2",id:"intent-resolver-behavior-in-v2",level:2},{value:"Schema extraction",id:"schema-extraction",level:2},{value:"Practical design rule",id:"practical-design-rule",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,l.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"intent-and-schema-internals-v2",children:"Intent and Schema Internals (v2)"})}),"\n",(0,c.jsx)(n.h2,{id:"dialogue-act-resolution",children:"Dialogue act resolution"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"DialogueActStep"})," supports three modes via ",(0,c.jsx)(n.code,{children:"convengine.flow.dialogue-act.resolute"}),":"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"REGEX_ONLY"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"REGEX_THEN_LLM"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"LLM_ONLY"})}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"Regex handles core acts:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"AFFIRM"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"NEGATE"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"EDIT"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"RESET"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"QUESTION"})}),"\n",(0,c.jsxs)(n.li,{children:["fallback ",(0,c.jsx)(n.code,{children:"NEW_REQUEST"})]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"When LLM path is used, it must return strict JSON act + confidence."}),"\n",(0,c.jsx)(n.h2,{id:"interaction-policy-decision",children:"Interaction policy decision"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"InteractionPolicyStep"})," derives policy decision using:"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"dialogue act"}),"\n",(0,c.jsx)(n.li,{children:"pending action/slot presence"}),"\n",(0,c.jsx)(n.li,{children:"optional pending-action registry presence"}),"\n",(0,c.jsxs)(n.li,{children:["configurable matrix in ",(0,c.jsx)(n.code,{children:"convengine.flow.interaction-policy.matrix"})]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"Decisions:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"EXECUTE_PENDING_ACTION"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"REJECT_PENDING_ACTION"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"FILL_PENDING_SLOT"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"RECLASSIFY_INTENT"})}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"intent-resolver-behavior-in-v2",children:"Intent resolver behavior in v2"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"IntentResolutionStep"})," can skip resolution when:"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"schema collection is active/locked"}),"\n",(0,c.jsxs)(n.li,{children:["policy sets ",(0,c.jsx)(n.code,{children:"skip_intent_resolution=true"})]}),"\n",(0,c.jsx)(n.li,{children:"sticky-intent optimization is active during incomplete schema flow"}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"New audit signals:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"INTENT_RESOLVE_SKIPPED_POLICY"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"INTENT_RESOLVE_SKIPPED_SCHEMA_COLLECTION"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"INTENT_RESOLVE_SKIPPED_STICKY_INTENT"})}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"schema-extraction",children:"Schema extraction"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"SchemaExtractionStep"})," still drives missing-field follow-up flows."]}),"\n",(0,c.jsx)(n.p,{children:"Runtime facts are written into input params and then used by rules:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"missing_fields"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"missing_field_options"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"schema_json"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"schema_complete"})}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"practical-design-rule",children:"Practical design rule"}),"\n",(0,c.jsxs)(n.p,{children:["Use schema extraction for required slot collection, and use dialogue+policy for short confirmations (",(0,c.jsx)(n.code,{children:"yes/ok/do that"}),") so intent reclassification does not disrupt active flow."]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}}}]);